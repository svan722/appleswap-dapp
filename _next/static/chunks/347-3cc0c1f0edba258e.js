"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{74347:function(e,i,t){t.r(i),t.d(i,{default:function(){return pools_SupplyLiquidity}});var l=t(11527),n=t(50959),s=t(95686),o={src:"/_next/static/media/setting.4384a03d.svg",height:24,width:24,blurWidth:0,blurHeight:0},a=t(67391),d=t(75546),c=t(28976),r=t(39657),N=t(20019),u=t(72532),C=t(6559),R=t(43238),g=t(59722),E=t(68401),m=t(16193),U=t(61430),_=t(79055),y=t(52754),v=t(64116),Y=t(74038),h=t(83071),x=t(31650),A=t(65148),p=t(66343);let B=u.JSBI.BigInt(0);function useMintState(){return(0,y.v9)(e=>e.mint)}var f=t(71242),b=t(23017),j=t(26415),w=t(28903),L={src:"/_next/static/media/plus.ab2cec1a.svg",height:28,width:28,blurWidth:0,blurHeight:0},I={src:"/_next/static/media/switch.3152db13.svg",height:19,width:19,blurWidth:0,blurHeight:0},S=t(72418),T=t(67846),k=t.n(T),Z=t(76188),q=t(26608),P=t(38152),AddLiquidity_AddLiquidity=e=>{var i,t,o,T,H,D,M,O,W,K,G,V;let{currencyBgClass:F}=e,{t:X}=(0,d.useTranslation)("common"),[z,$]=(0,n.useState)(null),{account:J,chainId:Q,library:ee}=(0,p.ZP)(),[ei,et]=(0,n.useState)(!0),[el,en]=(0,n.useState)(!1),[es,eo]=(0,n.useState)(!1),[ea,ed]=(0,n.useState)(!1),[ec,er]=(0,n.useState)(!1),[eN]=(0,f.$2)(),eu=(0,g.Z)(),[eC,eR]=(0,n.useState)(""),eg=(0,_.h7)(),eE=(0,_.m9)(),em=null!=Q?Q:u.ChainId.BNB,eU=(0,S.wi)()[em],e_=(0,w.UO)(),ey=(0,j.Z)(),ev=(0,A.U8)(e_&&e_.currencyIdA?"matic"===e_.currencyIdA.toLowerCase()||"eth"===e_.currencyIdA.toLowerCase()||"bsc"===e_.currencyIdA.toLowerCase()?"ETH":e_.currencyIdA:ey&&ey.currency0?ey.currency0:void 0),eY=(0,A.U8)(e_&&e_.currencyIdB?"matic"===e_.currencyIdB.toLowerCase()||"eth"===e_.currencyIdB.toLowerCase()||"bsc"===e_.currencyIdB.toLowerCase()?"ETH":e_.currencyIdB:ey&&ey.currency1?ey.currency1:void 0),{independentField:eh,typedValue:ex,otherTypedValue:eA}=useMintState(),ep=(0,f.LO)(),{dependentField:eB,currencies:ef,pair:eb,pairState:ej,currencyBalances:ew,parsedAmounts:eL,price:eI,noLiquidity:eS,liquidityMinted:eT,poolTokenPercentage:ek,error:eZ}=function(){var e,i,t,l;let s;let{account:o,chainId:a}=(0,p.ZP)(),{t:c}=(0,d.useTranslation)("common"),{independentField:r,typedValue:N,[m.gN.CURRENCY_A]:{currencyId:C},[m.gN.CURRENCY_B]:{currencyId:R},otherTypedValue:g}=useMintState(),E=(0,A.U8)(C),_=(0,A.U8)(R),y=r===m.gN.CURRENCY_A?m.gN.CURRENCY_B:m.gN.CURRENCY_A,f=(0,n.useMemo)(()=>({[m.gN.CURRENCY_A]:null!=E?E:void 0,[m.gN.CURRENCY_B]:null!=_?_:void 0}),[E,_]),[b,j]=(0,U.yX)(f[m.gN.CURRENCY_A],f[m.gN.CURRENCY_B]),w=(0,v.A)(null==j?void 0:j.liquidityToken),L=b===U._G.NOT_EXISTS||!!(w&&u.JSBI.equal(w.raw,B)),I=(0,x.K5)(null!=o?o:void 0,[f[m.gN.CURRENCY_A],f[m.gN.CURRENCY_B]]),S={[m.gN.CURRENCY_A]:I[0],[m.gN.CURRENCY_B]:I[1]},T=(0,h.eo)(a,N,f[r]),k=(0,n.useMemo)(()=>{if(L)return g&&f[y]?(0,h.eo)(a,g,f[y]):void 0;if(T){let e=(0,Y.N)(T,a),[i,t]=[(0,Y.pu)(null!=E?E:void 0,a),(0,Y.pu)(null!=_?_:void 0,a)];if(i&&t&&e&&j){let l=y===m.gN.CURRENCY_B?_:E,n=y===m.gN.CURRENCY_B?j.priceOf(i):j.priceOf(t);try{let i=n.quote(a,e);return l===u.ETHER[a]?u.CurrencyAmount.ether(a,i.raw):i}catch(e){console.debug("Failed to quote amount",e)}}return}},[L,g,f,y,T,E,a,_,j]),Z=(0,n.useMemo)(()=>({[m.gN.CURRENCY_A]:r===m.gN.CURRENCY_A?T:k,[m.gN.CURRENCY_B]:r===m.gN.CURRENCY_A?k:T}),[k,T,r]),q=(0,n.useMemo)(()=>{if(L){let{[m.gN.CURRENCY_A]:e,[m.gN.CURRENCY_B]:i}=Z;return e&&i?new u.Price(e.currency,i.currency,e.raw,i.raw):void 0}{let e=(0,Y.pu)(null!=E?E:void 0,a);return j&&e?j.priceOf(e):void 0}},[a,E,L,j,Z]),P=(0,n.useMemo)(()=>{let{[m.gN.CURRENCY_A]:e,[m.gN.CURRENCY_B]:i}=Z,[t,l]=[(0,Y.N)(e,a),(0,Y.N)(i,a)];return j&&w&&t&&l?j.getLiquidityMinted(w,t,l):void 0},[Z,a,j,w]),H=(0,n.useMemo)(()=>P&&w?new u.Percent(P.raw,w.add(P).raw):void 0,[P,w]);o||(s=c("connectWallet")),b===U._G.INVALID&&(s=null!=s?s:c("invalidPair")),Z[m.gN.CURRENCY_A]&&Z[m.gN.CURRENCY_B]||(s=null!=s?s:c("enterAnAmount"));let{[m.gN.CURRENCY_A]:D,[m.gN.CURRENCY_B]:M}=Z;return D&&(null==S?void 0:null===(e=S[m.gN.CURRENCY_A])||void 0===e?void 0:e.lessThan(D))&&(s=c("insufficientBalance",{symbol:null===(t=f[m.gN.CURRENCY_A])||void 0===t?void 0:t.symbol})),M&&(null==S?void 0:null===(i=S[m.gN.CURRENCY_B])||void 0===i?void 0:i.lessThan(M))&&(s=c("insufficientBalance",{symbol:null===(l=f[m.gN.CURRENCY_B])||void 0===l?void 0:l.symbol})),{dependentField:y,currencies:f,pair:j,pairState:b,currencyBalances:S,parsedAmounts:Z,price:q,noLiquidity:L,liquidityMinted:P,poolTokenPercentage:H,error:s}}(),eq={amountA:(0,b.LH)(eL[m.gN.CURRENCY_A]),symbolA:null===(i=ef[m.gN.CURRENCY_A])||void 0===i?void 0:i.symbol,amountB:(0,b.LH)(eL[m.gN.CURRENCY_B]),symbolB:null===(t=ef[m.gN.CURRENCY_B])||void 0===t?void 0:t.symbol},eP=X("supplyingTokens",eq),{onFieldAInput:eH,onFieldBInput:eD,onCurrencySelection:eM}=function(e){let i=(0,y.I0)(),{chainId:t}=(0,p.ZP)(),l=(0,n.useCallback)(t=>{i((0,m.LC)({field:m.gN.CURRENCY_A,typedValue:t,noLiquidity:!0===e}))},[i,e]),s=(0,n.useCallback)(t=>{i((0,m.LC)({field:m.gN.CURRENCY_B,typedValue:t,noLiquidity:!0===e}))},[i,e]),o=(0,n.useCallback)((e,l)=>{i((0,m.j)({field:e,currencyId:l instanceof u.Token?l.address:l===u.ETHER[t]?"ETH":""}))},[i]);return{onFieldAInput:l,onFieldBInput:s,onCurrencySelection:o}}(eS),eO=[m.gN.CURRENCY_A,m.gN.CURRENCY_B].reduce((e,i)=>({...e,[i]:(0,b.iN)(Q,ew[i])}),{}),eW={[eh]:ex,[eB]:eS?eA:null!==(V=null===(o=eL[eB])||void 0===o?void 0:o.toExact())&&void 0!==V?V:""},{ethereum:eK}=window,[eG,eV]=(0,n.useState)(null),[eF,eX]=(0,n.useState)(!1),[ez,e$]=(0,n.useState)(!1),[eJ,eQ]=(0,E.qL)(eL[m.gN.CURRENCY_A],Q?u.ROUTER_ADDRESS[Q]:void 0),[e0,e1]=(0,E.qL)(eL[m.gN.CURRENCY_B],Q?u.ROUTER_ADDRESS[Q]:void 0),e2=(0,x.mM)(null!=J?J:void 0,null==eb?void 0:eb.liquidityToken),e3=[m.gN.CURRENCY_A,m.gN.CURRENCY_B].reduce((e,i)=>{var t,l;return{...e,[i]:null===(t=eO[i])||void 0===t?void 0:t.equalTo(null!==(l=eL[i])&&void 0!==l?l:"0")}},{}),e5=(0,n.useCallback)(e=>{eM(m.gN.CURRENCY_A,e)},[eM]),e6=(0,n.useCallback)(e=>{eM(m.gN.CURRENCY_B,e)},[eM]);(0,n.useEffect)(()=>{ev?eM(m.gN.CURRENCY_A,ev):Q===u.ChainId.ARBITRUM?setTimeout(()=>{eM(m.gN.CURRENCY_A,u.ETHER[Q])},1e3):eM(m.gN.CURRENCY_A,C.xY.tokens.COMMON[Q].USDT),eY?eM(m.gN.CURRENCY_B,eY):Q===u.ChainId.ARBITRUM?eM(m.gN.CURRENCY_B,C.xY.tokens.COMMON[Q].USDT):Q===u.ChainId.BNB?eM(m.gN.CURRENCY_B,C.xY.tokens.COMMON[Q].AP):setTimeout(()=>{eM(m.gN.CURRENCY_B,u.ETHER[Q])},500)},[eM,ev,eY,Q]);let onAdd=async()=>{$(null),eR(""),ep?onAddLiquidity():(en(!0),eV({liquidityTokenData:eq,currencies:ef}))},e8=(0,R.U)(),e4=(0,R.v$)(),checkPoolIsInFarm=(e,i)=>{if(e&&i){let t=[];Object.keys(eU).forEach(e=>{t.push(eU[e])});let l=t.some(t=>{let l=t.tokens[0],n=t.tokens[1];if(l&&n){let l=t.tokens.map(e=>e.address?e.address.toLowerCase():"");return l.includes(e.toLowerCase())&&l.includes(i.toLowerCase())}return!1});l&&er(!0)}},onAddLiquidity=async()=>{var e,i,t,l,n,s,o,a;let d,c,C,R;if(!Q||!ee||!J||!e8)return;let{[m.gN.CURRENCY_A]:g,[m.gN.CURRENCY_B]:E}=eL;if(!g||!E||!ef[m.gN.CURRENCY_A]||!ef[m.gN.CURRENCY_B]||!eu)return;let U={[m.gN.CURRENCY_A]:(0,b.uc)(g,eS?0:eN)[0],[m.gN.CURRENCY_B]:(0,b.uc)(E,eS?0:eN)[0]};if(ef[m.gN.CURRENCY_A]===u.ETHER[Q]||ef[m.gN.CURRENCY_B]===u.ETHER[Q]){let t=ef[m.gN.CURRENCY_B]===u.ETHER[Q];c=e8.estimateGas.addLiquidityETH,e8.addLiquidityETH,d="addLiquidityETH",C=[null!==(i=null===(e=(0,Y.pu)(t?ef[m.gN.CURRENCY_A]:ef[m.gN.CURRENCY_B],Q))||void 0===e?void 0:e.address)&&void 0!==i?i:"",(t?g:E).raw.toString(),U[t?m.gN.CURRENCY_A:m.gN.CURRENCY_B].toString(),U[t?m.gN.CURRENCY_B:m.gN.CURRENCY_A].toString(),J,eu.toHexString()],R=r.O$.from((t?E:g).raw.toString())}else c=e8.estimateGas.addLiquidity,d="addLiquidity",e8.addLiquidity,C=[null!==(n=null===(t=(0,Y.pu)(ef[m.gN.CURRENCY_A],Q))||void 0===t?void 0:t.address)&&void 0!==n?n:"",null!==(s=null===(l=(0,Y.pu)(ef[m.gN.CURRENCY_B],Q))||void 0===l?void 0:l.address)&&void 0!==s?s:"",g.raw.toString(),E.raw.toString(),U[m.gN.CURRENCY_A].toString(),U[m.gN.CURRENCY_B].toString(),J,eu.toHexString()],R=null;eo(!0);let[_,y]=C;try{let e=await (null==e4?void 0:e4.write[d]([...C],{gasLimit:c,value:R||0}));if(e){eo(!1),ed(!0),eR(e);let i=X("addLiquidityTokens",eq),t=await (0,b.fs)(e,Q);if(eg(t,{summary:i}),t){let{transactionReciept:l}=await (0,b.j7)(e,Q);checkPoolIsInFarm(_,y),eE(l,{summary:i}),en(!0),eR(t.hash),ed(!1),N.ZP.event({category:"Liquidity",action:"Add",label:[null===(o=ef[m.gN.CURRENCY_A])||void 0===o?void 0:o.symbol,null===(a=ef[m.gN.CURRENCY_B])||void 0===a?void 0:a.symbol].join("/")})}}}catch(e){ed(!1),eo(!1),$(X("txRejected")),(null==e?void 0:e.code)!==4001&&console.error(e)}},{open:e7,close:e9}=(0,q.k_)(),connectWallet=async()=>{Q&&!(0,b.p)(Q)&&J&&await (0,Z.If)({chainId:P.e.id}),e7()},ie=(0,n.useCallback)(()=>{en(!1),er(!1),eC&&eH(""),eR("")},[eH,eC]),ii=(0,n.useMemo)(()=>J?null!=eZ?eZ:X("supply"):Q&&!(0,b.p)(Q)&&J?X("switchNetwork"):X("connectWallet"),[J,eK,eZ,X]),modalHeader=()=>{var e,i;return(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(s.Z,{className:"supplyingContent",children:[(0,l.jsxs)("p",{className:"flex items-center gap-2",children:[X("supplying"),(0,l.jsx)(a.Xw,{currency:ef[m.gN.CURRENCY_A],size:"32px"}),eq.amountA," ",eq.symbolA]}),(0,l.jsx)(k(),{src:L,alt:""}),(0,l.jsxs)("p",{className:"flex items-center gap-2",children:[(0,l.jsx)(a.Xw,{currency:ef[m.gN.CURRENCY_B],size:"32px"}),eq.amountB," ",eq.symbolB]})]}),(0,l.jsx)(s.Z,{mb:2,textAlign:"center",children:(0,l.jsx)("h6",{className:"color-neuture-0",children:X("receiveLPTokens",{amount:(0,b.LH)(eT),symbolA:null===(e=ef[m.gN.CURRENCY_A])||void 0===e?void 0:e.symbol,symbolB:null===(i=ef[m.gN.CURRENCY_B])||void 0===i?void 0:i.symbol})})}),(0,l.jsx)(s.Z,{mb:3,textAlign:"center",children:(0,l.jsx)("small",{className:"color-neuture-600",children:X("outputEstimated",{slippage:eN/100})})}),(0,l.jsx)(s.Z,{className:"swapButtonWrapper",children:(0,l.jsx)(c.Z,{fullWidth:!0,onClick:onAddLiquidity,children:X("confirmSupply")})})]})};return(0,l.jsxs)(s.Z,{children:[el&&(0,l.jsx)(a.xy,{isOpen:el,onDismiss:ie,attemptingTxn:es,txPending:ea,isFarming:ec,hash:eC,poolData:eG,content:()=>z?(0,l.jsx)(a.ht,{onDismiss:ie,message:z}):(0,l.jsx)(a.pM,{title:X("supplyingliquidity"),onDismiss:ie,content:modalHeader}),pendingText:eP,modalContent:ea?X("submittedTxLiquidity"):X("successAddedliquidity")}),(0,l.jsx)(a.LH,{id:"add-liquidity-input-tokena",currency:ef[m.gN.CURRENCY_A],showHalfButton:!!eO[m.gN.CURRENCY_A],showMaxButton:!e3[m.gN.CURRENCY_A],onMax:()=>{var e,i;return eH(null!==(i=null===(e=eO[m.gN.CURRENCY_A])||void 0===e?void 0:e.toExact())&&void 0!==i?i:"")},onHalf:(e,i)=>{let t=eO[m.gN.CURRENCY_A];t&&eH(t.divide(e).multiply(i).toFixed(t.currency.decimals))},handleCurrencySelect:e5,amount:eW[m.gN.CURRENCY_A],setAmount:eH,bgClass:"".concat(F," section")}),(0,l.jsx)(s.Z,{mt:2.5,className:"bridge",children:(0,l.jsx)(k(),{src:L,alt:""})}),(0,l.jsx)(a.LH,{id:"add-liquidity-input-tokenb",showHalfButton:!!eO[m.gN.CURRENCY_B],currency:ef[m.gN.CURRENCY_B],showMaxButton:!e3[m.gN.CURRENCY_B],onHalf:(e,i)=>{let t=eO[m.gN.CURRENCY_B];t&&eD(t.divide(e).multiply(i).toFixed(t.currency.decimals))},onMax:()=>{var e,i;return eD(null!==(i=null===(e=eO[m.gN.CURRENCY_B])||void 0===e?void 0:e.toExact())&&void 0!==i?i:"")},handleCurrencySelect:e6,amount:eW[m.gN.CURRENCY_B],setAmount:eD,bgClass:"".concat(F," section")}),ef[m.gN.CURRENCY_A]&&ef[m.gN.CURRENCY_B]&&ej!==U._G.INVALID&&eI&&(0,l.jsx)(s.Z,{className:"section swap-prices-section",children:(0,l.jsxs)(s.Z,{className:"swapPrice single",children:[ei&&(0,l.jsxs)("small",{children:["1 ",null===(T=ef[m.gN.CURRENCY_A])||void 0===T?void 0:T.symbol," ="," ",eI.toSignificant(3)," ",null===(H=ef[m.gN.CURRENCY_B])||void 0===H?void 0:H.symbol," "]}),!ei&&(0,l.jsxs)("small",{children:["1 ",null===(D=ef[m.gN.CURRENCY_B])||void 0===D?void 0:D.symbol," ="," ",eI.invert().toSignificant(3)," ",null===(M=ef[m.gN.CURRENCY_A])||void 0===M?void 0:M.symbol," "]}),(0,l.jsx)(s.Z,{className:"cursor-pointer",onClick:()=>et(!ei),children:(0,l.jsx)(k(),{src:I,alt:"SwitchIcon"})})]})}),(0,l.jsxs)(s.Z,{className:"swapButtonWrapper flex-wrap",mb:.5,children:[(eJ===E.UK.NOT_APPROVED||eJ===E.UK.PENDING||e0===E.UK.NOT_APPROVED||e0===E.UK.PENDING)&&!eZ&&(0,l.jsxs)(s.Z,{className:"flex fullWidth justify-between gap-1",mb:.5,children:[eJ!==E.UK.APPROVED&&(0,l.jsx)(s.Z,{className:"flex-1",children:(0,l.jsx)(c.Z,{fullWidth:!0,onClick:async()=>{eX(!0);try{await eQ(),eX(!1)}catch(e){eX(!1)}},disabled:eF||eJ===E.UK.PENDING,children:eJ===E.UK.PENDING?"".concat(X("approving")," ").concat(null===(O=ef[m.gN.CURRENCY_A])||void 0===O?void 0:O.symbol):"".concat(X("approve")," ").concat(null===(W=ef[m.gN.CURRENCY_A])||void 0===W?void 0:W.symbol)})}),e0!==E.UK.APPROVED&&(0,l.jsx)(s.Z,{className:"flex-1",children:(0,l.jsx)(c.Z,{fullWidth:!0,onClick:async()=>{e$(!0);try{await e1(),e$(!1)}catch(e){e$(!1)}},disabled:ez||e0===E.UK.PENDING,children:e0===E.UK.PENDING?"".concat(X("approving")," ").concat(null===(K=ef[m.gN.CURRENCY_B])||void 0===K?void 0:K.symbol):"".concat(X("approve")," ").concat(null===(G=ef[m.gN.CURRENCY_B])||void 0===G?void 0:G.symbol)})})]}),(0,l.jsx)(c.Z,{fullWidth:!0,disabled:!!J&&(!!eZ||eJ!==E.UK.APPROVED||e0!==E.UK.APPROVED),onClick:J?onAdd:connectWallet,children:ii})]}),ef[m.gN.CURRENCY_A]&&ef[m.gN.CURRENCY_B]&&ej!==U._G.INVALID&&eI&&(0,l.jsxs)(s.Z,{className:"flex items-center justify-between section",children:[(0,l.jsxs)(s.Z,{className:"swap-info",children:[(0,l.jsxs)(s.Z,{className:"flex items-center gap-1",mb:1.5,children:[X("yourPoolShare"),":"]}),(0,l.jsxs)(s.Z,{className:"flex items-center gap-1",children:[X("lpTokenReceived"),":"]})]}),(0,l.jsxs)(s.Z,{className:"swap-info",children:[(0,l.jsx)(s.Z,{mb:1.5,children:ek?ek.toSignificant(6)+"%":"-"}),(0,l.jsxs)(s.Z,{children:[(0,b.LH)(e2)," ",X("lpTokens")]})]})]})]})},H=t(87880),pools_SupplyLiquidity=()=>{let{t:e}=(0,d.useTranslation)("common"),[i,t]=(0,n.useState)(!1);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"supplyLiquidity",children:[i&&(0,l.jsx)(a.TB,{open:i,onClose:()=>t(!1)}),(0,l.jsxs)(s.Z,{className:"flex justify-between items-center section setting",children:[(0,l.jsx)("p",{className:"title",children:e("supplyLiquidity")}),(0,l.jsxs)(s.Z,{className:"flex items-center gap-1",children:[(0,l.jsx)(s.Z,{className:"headingItem",children:(0,l.jsx)(a.s6,{size:24,className:"text-secondary",text:e("supplyLiquidityHelp")})}),(0,l.jsx)(s.Z,{className:"headingItem",children:(0,l.jsx)(H.Z,{src:o,onClick:()=>t(!0)})})]})]}),(0,l.jsx)(s.Z,{children:(0,l.jsx)(AddLiquidity_AddLiquidity,{currencyBgClass:"bg-transparent"})})]})})}}}]);