(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80],{61326:function(i,r,c){"use strict";r.Xx=r._w=r.aP=r.KS=r.jQ=void 0,c(54889);let l=c(21318);function gf(i){let r=new Float64Array(16);if(i)for(let c=0;c<i.length;c++)r[c]=i[c];return r}c(49644),r.jQ=64,r.KS=64,r.aP=32;let E=new Uint8Array(32);E[0]=9;let P=gf(),S=gf([1]),C=(gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),R=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function set25519(i,r){for(let c=0;c<16;c++)i[c]=0|r[c]}function car25519(i){let r=1;for(let c=0;c<16;c++){let l=i[c]+r+65535;r=Math.floor(l/65536),i[c]=l-65536*r}i[0]+=r-1+37*(r-1)}function sel25519(i,r,c){let l=~(c-1);for(let c=0;c<16;c++){let E=l&(i[c]^r[c]);i[c]^=E,r[c]^=E}}function pack25519(i,r){let c=gf(),l=gf();for(let i=0;i<16;i++)l[i]=r[i];car25519(l),car25519(l),car25519(l);for(let i=0;i<2;i++){c[0]=l[0]-65517;for(let i=1;i<15;i++)c[i]=l[i]-65535-(c[i-1]>>16&1),c[i-1]&=65535;c[15]=l[15]-32767-(c[14]>>16&1);let i=c[15]>>16&1;c[14]&=65535,sel25519(l,c,1-i)}for(let r=0;r<16;r++)i[2*r]=255&l[r],i[2*r+1]=l[r]>>8}gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function add(i,r,c){for(let l=0;l<16;l++)i[l]=r[l]+c[l]}function sub(i,r,c){for(let l=0;l<16;l++)i[l]=r[l]-c[l]}function mul(i,r,c){let l,E,P=0,S=0,C=0,R=0,A=0,T=0,q=0,M=0,$=0,U=0,J=0,F=0,Q=0,X=0,ee=0,et=0,eo=0,ec=0,el=0,eh=0,ep=0,ef=0,ed=0,eg=0,ey=0,em=0,e_=0,ew=0,eb=0,eE=0,eI=0,ex=c[0],eP=c[1],eS=c[2],eC=c[3],eR=c[4],eO=c[5],eA=c[6],eL=c[7],eN=c[8],ej=c[9],eT=c[10],ez=c[11],eD=c[12],eM=c[13],ek=c[14],e$=c[15];P+=(l=r[0])*ex,S+=l*eP,C+=l*eS,R+=l*eC,A+=l*eR,T+=l*eO,q+=l*eA,M+=l*eL,$+=l*eN,U+=l*ej,J+=l*eT,F+=l*ez,Q+=l*eD,X+=l*eM,ee+=l*ek,et+=l*e$,S+=(l=r[1])*ex,C+=l*eP,R+=l*eS,A+=l*eC,T+=l*eR,q+=l*eO,M+=l*eA,$+=l*eL,U+=l*eN,J+=l*ej,F+=l*eT,Q+=l*ez,X+=l*eD,ee+=l*eM,et+=l*ek,eo+=l*e$,C+=(l=r[2])*ex,R+=l*eP,A+=l*eS,T+=l*eC,q+=l*eR,M+=l*eO,$+=l*eA,U+=l*eL,J+=l*eN,F+=l*ej,Q+=l*eT,X+=l*ez,ee+=l*eD,et+=l*eM,eo+=l*ek,ec+=l*e$,R+=(l=r[3])*ex,A+=l*eP,T+=l*eS,q+=l*eC,M+=l*eR,$+=l*eO,U+=l*eA,J+=l*eL,F+=l*eN,Q+=l*ej,X+=l*eT,ee+=l*ez,et+=l*eD,eo+=l*eM,ec+=l*ek,el+=l*e$,A+=(l=r[4])*ex,T+=l*eP,q+=l*eS,M+=l*eC,$+=l*eR,U+=l*eO,J+=l*eA,F+=l*eL,Q+=l*eN,X+=l*ej,ee+=l*eT,et+=l*ez,eo+=l*eD,ec+=l*eM,el+=l*ek,eh+=l*e$,T+=(l=r[5])*ex,q+=l*eP,M+=l*eS,$+=l*eC,U+=l*eR,J+=l*eO,F+=l*eA,Q+=l*eL,X+=l*eN,ee+=l*ej,et+=l*eT,eo+=l*ez,ec+=l*eD,el+=l*eM,eh+=l*ek,ep+=l*e$,q+=(l=r[6])*ex,M+=l*eP,$+=l*eS,U+=l*eC,J+=l*eR,F+=l*eO,Q+=l*eA,X+=l*eL,ee+=l*eN,et+=l*ej,eo+=l*eT,ec+=l*ez,el+=l*eD,eh+=l*eM,ep+=l*ek,ef+=l*e$,M+=(l=r[7])*ex,$+=l*eP,U+=l*eS,J+=l*eC,F+=l*eR,Q+=l*eO,X+=l*eA,ee+=l*eL,et+=l*eN,eo+=l*ej,ec+=l*eT,el+=l*ez,eh+=l*eD,ep+=l*eM,ef+=l*ek,ed+=l*e$,$+=(l=r[8])*ex,U+=l*eP,J+=l*eS,F+=l*eC,Q+=l*eR,X+=l*eO,ee+=l*eA,et+=l*eL,eo+=l*eN,ec+=l*ej,el+=l*eT,eh+=l*ez,ep+=l*eD,ef+=l*eM,ed+=l*ek,eg+=l*e$,U+=(l=r[9])*ex,J+=l*eP,F+=l*eS,Q+=l*eC,X+=l*eR,ee+=l*eO,et+=l*eA,eo+=l*eL,ec+=l*eN,el+=l*ej,eh+=l*eT,ep+=l*ez,ef+=l*eD,ed+=l*eM,eg+=l*ek,ey+=l*e$,J+=(l=r[10])*ex,F+=l*eP,Q+=l*eS,X+=l*eC,ee+=l*eR,et+=l*eO,eo+=l*eA,ec+=l*eL,el+=l*eN,eh+=l*ej,ep+=l*eT,ef+=l*ez,ed+=l*eD,eg+=l*eM,ey+=l*ek,em+=l*e$,F+=(l=r[11])*ex,Q+=l*eP,X+=l*eS,ee+=l*eC,et+=l*eR,eo+=l*eO,ec+=l*eA,el+=l*eL,eh+=l*eN,ep+=l*ej,ef+=l*eT,ed+=l*ez,eg+=l*eD,ey+=l*eM,em+=l*ek,e_+=l*e$,Q+=(l=r[12])*ex,X+=l*eP,ee+=l*eS,et+=l*eC,eo+=l*eR,ec+=l*eO,el+=l*eA,eh+=l*eL,ep+=l*eN,ef+=l*ej,ed+=l*eT,eg+=l*ez,ey+=l*eD,em+=l*eM,e_+=l*ek,ew+=l*e$,X+=(l=r[13])*ex,ee+=l*eP,et+=l*eS,eo+=l*eC,ec+=l*eR,el+=l*eO,eh+=l*eA,ep+=l*eL,ef+=l*eN,ed+=l*ej,eg+=l*eT,ey+=l*ez,em+=l*eD,e_+=l*eM,ew+=l*ek,eb+=l*e$,ee+=(l=r[14])*ex,et+=l*eP,eo+=l*eS,ec+=l*eC,el+=l*eR,eh+=l*eO,ep+=l*eA,ef+=l*eL,ed+=l*eN,eg+=l*ej,ey+=l*eT,em+=l*ez,e_+=l*eD,ew+=l*eM,eb+=l*ek,eE+=l*e$,et+=(l=r[15])*ex,eo+=l*eP,ec+=l*eS,el+=l*eC,eh+=l*eR,ep+=l*eO,ef+=l*eA,ed+=l*eL,eg+=l*eN,ey+=l*ej,em+=l*eT,e_+=l*ez,ew+=l*eD,eb+=l*eM,eE+=l*ek,eI+=l*e$,P+=38*eo,S+=38*ec,C+=38*el,R+=38*eh,A+=38*ep,T+=38*ef,q+=38*ed,M+=38*eg,$+=38*ey,U+=38*em,J+=38*e_,F+=38*ew,Q+=38*eb,X+=38*eE,ee+=38*eI,E=Math.floor((l=P+(E=1)+65535)/65536),P=l-65536*E,E=Math.floor((l=S+E+65535)/65536),S=l-65536*E,E=Math.floor((l=C+E+65535)/65536),C=l-65536*E,E=Math.floor((l=R+E+65535)/65536),R=l-65536*E,E=Math.floor((l=A+E+65535)/65536),A=l-65536*E,E=Math.floor((l=T+E+65535)/65536),T=l-65536*E,E=Math.floor((l=q+E+65535)/65536),q=l-65536*E,E=Math.floor((l=M+E+65535)/65536),M=l-65536*E,E=Math.floor((l=$+E+65535)/65536),$=l-65536*E,E=Math.floor((l=U+E+65535)/65536),U=l-65536*E,E=Math.floor((l=J+E+65535)/65536),J=l-65536*E,E=Math.floor((l=F+E+65535)/65536),F=l-65536*E,E=Math.floor((l=Q+E+65535)/65536),Q=l-65536*E,E=Math.floor((l=X+E+65535)/65536),X=l-65536*E,E=Math.floor((l=ee+E+65535)/65536),ee=l-65536*E,E=Math.floor((l=et+E+65535)/65536),et=l-65536*E,P+=E-1+37*(E-1),E=Math.floor((l=P+(E=1)+65535)/65536),P=l-65536*E,E=Math.floor((l=S+E+65535)/65536),S=l-65536*E,E=Math.floor((l=C+E+65535)/65536),C=l-65536*E,E=Math.floor((l=R+E+65535)/65536),R=l-65536*E,E=Math.floor((l=A+E+65535)/65536),A=l-65536*E,E=Math.floor((l=T+E+65535)/65536),T=l-65536*E,E=Math.floor((l=q+E+65535)/65536),q=l-65536*E,E=Math.floor((l=M+E+65535)/65536),M=l-65536*E,E=Math.floor((l=$+E+65535)/65536),$=l-65536*E,E=Math.floor((l=U+E+65535)/65536),U=l-65536*E,E=Math.floor((l=J+E+65535)/65536),J=l-65536*E,E=Math.floor((l=F+E+65535)/65536),F=l-65536*E,E=Math.floor((l=Q+E+65535)/65536),Q=l-65536*E,E=Math.floor((l=X+E+65535)/65536),X=l-65536*E,E=Math.floor((l=ee+E+65535)/65536),ee=l-65536*E,E=Math.floor((l=et+E+65535)/65536),et=l-65536*E,P+=E-1+37*(E-1),i[0]=P,i[1]=S,i[2]=C,i[3]=R,i[4]=A,i[5]=T,i[6]=q,i[7]=M,i[8]=$,i[9]=U,i[10]=J,i[11]=F,i[12]=Q,i[13]=X,i[14]=ee,i[15]=et}function edadd(i,r){let c=gf(),l=gf(),E=gf(),P=gf(),S=gf(),R=gf(),A=gf(),T=gf(),q=gf();sub(c,i[1],i[0]),sub(q,r[1],r[0]),mul(c,c,q),add(l,i[0],i[1]),add(q,r[0],r[1]),mul(l,l,q),mul(E,i[3],r[3]),mul(E,E,C),mul(P,i[2],r[2]),add(P,P,P),sub(S,l,c),sub(R,P,E),add(A,P,E),add(T,l,c),mul(i[0],S,R),mul(i[1],T,A),mul(i[2],A,R),mul(i[3],S,T)}function cswap(i,r,c){for(let l=0;l<4;l++)sel25519(i[l],r[l],c)}function pack(i,r){let c=gf(),l=gf(),E=gf();(function(i,r){let c;let l=gf();for(c=0;c<16;c++)l[c]=r[c];for(c=253;c>=0;c--)mul(l,l,l),2!==c&&4!==c&&mul(l,l,r);for(c=0;c<16;c++)i[c]=l[c]})(E,r[2]),mul(c,r[0],E),mul(l,r[1],E),pack25519(i,l),i[31]^=function(i){let r=new Uint8Array(32);return pack25519(r,i),1&r[0]}(c)<<7}function scalarbase(i,r){let c=[gf(),gf(),gf(),gf()];set25519(c[0],R),set25519(c[1],A),set25519(c[2],S),mul(c[3],R,A),function(i,r,c){set25519(i[0],P),set25519(i[1],S),set25519(i[2],S),set25519(i[3],P);for(let l=255;l>=0;--l){let E=c[l/8|0]>>(7&l)&1;cswap(i,r,E),edadd(r,i),edadd(i,i),cswap(i,r,E)}}(i,c,r)}r._w=function(i){if(i.length!==r.aP)throw Error(`ed25519: seed must be ${r.aP} bytes`);let c=(0,l.hash)(i);c[0]&=248,c[31]&=127,c[31]|=64;let E=new Uint8Array(32),P=[gf(),gf(),gf(),gf()];scalarbase(P,c),pack(E,P);let S=new Uint8Array(64);return S.set(i),S.set(E,32),{publicKey:E,secretKey:S}};let T=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(i,r){let c,l,E,P;for(l=63;l>=32;--l){for(c=0,E=l-32,P=l-12;E<P;++E)r[E]+=c-16*r[l]*T[E-(l-32)],c=Math.floor((r[E]+128)/256),r[E]-=256*c;r[E]+=c,r[l]=0}for(E=0,c=0;E<32;E++)r[E]+=c-(r[31]>>4)*T[E],c=r[E]>>8,r[E]&=255;for(E=0;E<32;E++)r[E]-=c*T[E];for(l=0;l<32;l++)r[l+1]+=r[l]>>8,i[l]=255&r[l]}function reduce(i){let r=new Float64Array(64);for(let c=0;c<64;c++)r[c]=i[c];for(let r=0;r<64;r++)i[r]=0;modL(i,r)}r.Xx=function(i,r){let c=new Float64Array(64),E=[gf(),gf(),gf(),gf()],P=(0,l.hash)(i.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;let S=new Uint8Array(64);S.set(P.subarray(32),32);let C=new l.SHA512;C.update(S.subarray(32)),C.update(r);let R=C.digest();C.clean(),reduce(R),scalarbase(E,R),pack(S,E),C.reset(),C.update(S.subarray(0,32)),C.update(i.subarray(32)),C.update(r);let A=C.digest();reduce(A);for(let i=0;i<32;i++)c[i]=R[i];for(let i=0;i<32;i++)for(let r=0;r<32;r++)c[i+r]+=A[i]*P[r];return modL(S.subarray(32),c),S}},21318:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=c(6050),E=c(49644);r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var P=function(){function SHA512(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){E.wipe(this._buffer),E.wipe(this._tempHi),E.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(i,c){if(void 0===c&&(c=i.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var l=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=i[l++],c--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(l=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,i,l,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=i[l++],c--;return this},SHA512.prototype.finish=function(i){if(!this._finished){var r=this._bytesHashed,c=this._bufferLength,E=r%128<112?128:256;this._buffer[c]=128;for(var P=c+1;P<E-8;P++)this._buffer[P]=0;l.writeUint32BE(r/536870912|0,this._buffer,E-8),l.writeUint32BE(r<<3,this._buffer,E-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)l.writeUint32BE(this._stateHi[P],i,8*P),l.writeUint32BE(this._stateLo[P],i,8*P+4);return this},SHA512.prototype.digest=function(){var i=new Uint8Array(this.digestLength);return this.finish(i),i},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(i){return this._stateHi.set(i.stateHi),this._stateLo.set(i.stateLo),this._bufferLength=i.bufferLength,i.buffer&&this._buffer.set(i.buffer),this._bytesHashed=i.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(i){E.wipe(i.stateHi),E.wipe(i.stateLo),i.buffer&&E.wipe(i.buffer),i.bufferLength=0,i.bytesHashed=0},SHA512}();r.SHA512=P;var S=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(i,r,c,E,P,C,R){for(var A,T,q,M,$,U,J,F,Q=c[0],X=c[1],ee=c[2],et=c[3],eo=c[4],ec=c[5],el=c[6],eh=c[7],ep=E[0],ef=E[1],ed=E[2],eg=E[3],ey=E[4],em=E[5],e_=E[6],ew=E[7];R>=128;){for(var eb=0;eb<16;eb++){var eE=8*eb+C;i[eb]=l.readUint32BE(P,eE),r[eb]=l.readUint32BE(P,eE+4)}for(var eb=0;eb<80;eb++){var eI=Q,ex=X,eP=ee,eS=et,eC=eo,eR=ec,eO=el,eA=eh,eL=ep,eN=ef,ej=ed,eT=eg,ez=ey,eD=em,eM=e_,ek=ew;if(A=eh,$=65535&(T=ew),U=T>>>16,J=65535&A,F=A>>>16,A=(eo>>>14|ey<<18)^(eo>>>18|ey<<14)^(ey>>>9|eo<<23),$+=65535&(T=(ey>>>14|eo<<18)^(ey>>>18|eo<<14)^(eo>>>9|ey<<23)),U+=T>>>16,J+=65535&A,F+=A>>>16,A=eo&ec^~eo&el,$+=65535&(T=ey&em^~ey&e_),U+=T>>>16,J+=65535&A,F+=A>>>16,A=S[2*eb],$+=65535&(T=S[2*eb+1]),U+=T>>>16,J+=65535&A,F+=A>>>16,A=i[eb%16],$+=65535&(T=r[eb%16]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,q=65535&J|F<<16,M=65535&$|U<<16,A=q,$=65535&(T=M),U=T>>>16,J=65535&A,F=A>>>16,A=(Q>>>28|ep<<4)^(ep>>>2|Q<<30)^(ep>>>7|Q<<25),$+=65535&(T=(ep>>>28|Q<<4)^(Q>>>2|ep<<30)^(Q>>>7|ep<<25)),U+=T>>>16,J+=65535&A,F+=A>>>16,A=Q&X^Q&ee^X&ee,$+=65535&(T=ep&ef^ep&ed^ef&ed),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,eA=65535&J|F<<16,ek=65535&$|U<<16,A=eS,$=65535&(T=eT),U=T>>>16,J=65535&A,F=A>>>16,A=q,$+=65535&(T=M),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,eS=65535&J|F<<16,eT=65535&$|U<<16,X=eI,ee=ex,et=eP,eo=eS,ec=eC,el=eR,eh=eO,Q=eA,ef=eL,ed=eN,eg=ej,ey=eT,em=ez,e_=eD,ew=eM,ep=ek,eb%16==15)for(var eE=0;eE<16;eE++)A=i[eE],$=65535&(T=r[eE]),U=T>>>16,J=65535&A,F=A>>>16,A=i[(eE+9)%16],$+=65535&(T=r[(eE+9)%16]),U+=T>>>16,J+=65535&A,F+=A>>>16,A=((q=i[(eE+1)%16])>>>1|(M=r[(eE+1)%16])<<31)^(q>>>8|M<<24)^q>>>7,$+=65535&(T=(M>>>1|q<<31)^(M>>>8|q<<24)^(M>>>7|q<<25)),U+=T>>>16,J+=65535&A,F+=A>>>16,A=((q=i[(eE+14)%16])>>>19|(M=r[(eE+14)%16])<<13)^(M>>>29|q<<3)^q>>>6,$+=65535&(T=(M>>>19|q<<13)^(q>>>29|M<<3)^(M>>>6|q<<26)),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,i[eE]=65535&J|F<<16,r[eE]=65535&$|U<<16}A=Q,$=65535&(T=ep),U=T>>>16,J=65535&A,F=A>>>16,A=c[0],$+=65535&(T=E[0]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[0]=Q=65535&J|F<<16,E[0]=ep=65535&$|U<<16,A=X,$=65535&(T=ef),U=T>>>16,J=65535&A,F=A>>>16,A=c[1],$+=65535&(T=E[1]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[1]=X=65535&J|F<<16,E[1]=ef=65535&$|U<<16,A=ee,$=65535&(T=ed),U=T>>>16,J=65535&A,F=A>>>16,A=c[2],$+=65535&(T=E[2]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[2]=ee=65535&J|F<<16,E[2]=ed=65535&$|U<<16,A=et,$=65535&(T=eg),U=T>>>16,J=65535&A,F=A>>>16,A=c[3],$+=65535&(T=E[3]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[3]=et=65535&J|F<<16,E[3]=eg=65535&$|U<<16,A=eo,$=65535&(T=ey),U=T>>>16,J=65535&A,F=A>>>16,A=c[4],$+=65535&(T=E[4]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[4]=eo=65535&J|F<<16,E[4]=ey=65535&$|U<<16,A=ec,$=65535&(T=em),U=T>>>16,J=65535&A,F=A>>>16,A=c[5],$+=65535&(T=E[5]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[5]=ec=65535&J|F<<16,E[5]=em=65535&$|U<<16,A=el,$=65535&(T=e_),U=T>>>16,J=65535&A,F=A>>>16,A=c[6],$+=65535&(T=E[6]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[6]=el=65535&J|F<<16,E[6]=e_=65535&$|U<<16,A=eh,$=65535&(T=ew),U=T>>>16,J=65535&A,F=A>>>16,A=c[7],$+=65535&(T=E[7]),U+=T>>>16,J+=65535&A,F+=A>>>16,U+=$>>>16,J+=U>>>16,F+=J>>>16,c[7]=eh=65535&J|F<<16,E[7]=ew=65535&$|U<<16,C+=128,R-=128}return C}r.hash=function(i){var r=new P;r.update(i);var c=r.digest();return r.clean(),c}},72165:function(i,r,c){"use strict";function getBrowerCrypto(){return(null===c.g||void 0===c.g?void 0:c.g.crypto)||(null===c.g||void 0===c.g?void 0:c.g.msCrypto)||{}}function getSubtleCrypto(){let i=getBrowerCrypto();return i.subtle||i.webkitSubtle}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowserCryptoAvailable=r.getSubtleCrypto=r.getBrowerCrypto=void 0,r.getBrowerCrypto=getBrowerCrypto,r.getSubtleCrypto=getSubtleCrypto,r.isBrowserCryptoAvailable=function(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},73027:function(i,r,c){"use strict";var l=c(14224);function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==l&&void 0!==l.versions&&void 0!==l.versions.node}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowser=r.isNode=r.isReactNative=void 0,r.isReactNative=isReactNative,r.isNode=isNode,r.isBrowser=function(){return!isReactNative()&&!isNode()}},88497:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(65949);l.__exportStar(c(72165),r),l.__exportStar(c(73027),r)},20080:function(i,r,c){"use strict";let l;c.d(r,{EthereumProvider:function(){return iB}});var E=c(72100),P=c.n(E),S=c(5747);let C=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,R=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,A=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(i,r){if("__proto__"===i||"constructor"===i&&r&&"object"==typeof r&&"prototype"in r){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`);return}return r}function destr(i,r={}){if("string"!=typeof i)return i;let c=i.trim();if('"'===i[0]&&i.endsWith('"')&&!i.includes("\\"))return c.slice(1,-1);if(c.length<=9){let i=c.toLowerCase();if("true"===i)return!0;if("false"===i)return!1;if("undefined"===i)return;if("null"===i)return null;if("nan"===i)return Number.NaN;if("infinity"===i)return Number.POSITIVE_INFINITY;if("-infinity"===i)return Number.NEGATIVE_INFINITY}if(!A.test(i)){if(r.strict)throw SyntaxError("[destr] Invalid JSON");return i}try{if(C.test(i)||R.test(i)){if(r.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(i,jsonParseTransform)}return JSON.parse(i)}catch(c){if(r.strict)throw c;return i}}var T=c(55872).Buffer;function asyncCall(i,...r){try{var c;return(c=i(...r))&&"function"==typeof c.then?c:Promise.resolve(c)}catch(i){return Promise.reject(i)}}function stringify(i){if(function(i){let r=typeof i;return null===i||"object"!==r&&"function"!==r}(i))return String(i);if(function(i){let r=Object.getPrototypeOf(i);return!r||r.isPrototypeOf(Object)}(i)||Array.isArray(i))return JSON.stringify(i);if("function"==typeof i.toJSON)return stringify(i.toJSON());throw Error("[unstorage] Cannot stringify value!")}let q="base64:";function normalizeKey(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function unstorage_8581f561_normalizeBaseKey(i){return(i=normalizeKey(i))?i+":":""}let memory=()=>{let i=new Map;return{name:"memory",options:{},hasItem:r=>i.has(r),getItem:r=>i.get(r)??null,getItemRaw:r=>i.get(r)??null,setItem(r,c){i.set(r,c)},setItemRaw(r,c){i.set(r,c)},removeItem(r){i.delete(r)},getKeys:()=>Array.from(i.keys()),clear(){i.clear()},dispose(){i.clear()}}};function watch(i,r,c){return i.watch?i.watch((i,l)=>r(i,c+l)):()=>{}}async function dispose(i){"function"==typeof i.dispose&&await asyncCall(i.dispose)}function promisifyRequest(i){return new Promise((r,c)=>{i.oncomplete=i.onsuccess=()=>r(i.result),i.onabort=i.onerror=()=>c(i.error)})}function createStore(i,r){let c=indexedDB.open(i);c.onupgradeneeded=()=>c.result.createObjectStore(r);let l=promisifyRequest(c);return(i,c)=>l.then(l=>c(l.transaction(r,i).objectStore(r)))}function defaultGetStore(){return l||(l=createStore("keyval-store","keyval")),l}function get(i,r=defaultGetStore()){return r("readonly",r=>promisifyRequest(r.get(i)))}let JSONStringify=i=>JSON.stringify(i,(i,r)=>"bigint"==typeof r?r.toString()+"n":r),JSONParse=i=>{let r=i.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(r,(i,r)=>{let c="string"==typeof r&&r.match(/^\d+n$/);return c?BigInt(r.substring(0,r.length-1)):r})};function esm_safeJsonParse(i){if("string"!=typeof i)throw Error(`Cannot safe json parse value of type ${typeof i}`);try{return JSONParse(i)}catch(r){return i}}function safeJsonStringify(i){return"string"==typeof i?i:JSONStringify(i)||""}var z=(i={})=>{let r;let c=i.base&&i.base.length>0?`${i.base}:`:"",e=i=>c+i;return i.dbName&&i.storeName&&(r=createStore(i.dbName,i.storeName)),{name:"idb-keyval",options:i,hasItem:async i=>!(typeof await get(e(i),r)>"u"),getItem:async i=>await get(e(i),r)??null,setItem:(i,c)=>(function(i,r,c=defaultGetStore()){return c("readwrite",c=>(c.put(r,i),promisifyRequest(c.transaction)))})(e(i),c,r),removeItem:i=>(function(i,r=defaultGetStore()){return r("readwrite",r=>(r.delete(i),promisifyRequest(r.transaction)))})(e(i),r),getKeys:()=>(function(i=defaultGetStore()){return i("readonly",i=>{var r;if(i.getAllKeys)return promisifyRequest(i.getAllKeys());let c=[];return(r=i=>c.push(i.key),i.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},promisifyRequest(i.transaction)).then(()=>c)})})(r),clear:()=>(function(i=defaultGetStore()){return i("readwrite",i=>(i.clear(),promisifyRequest(i.transaction)))})(r)}};let _=class _{constructor(){this.indexedDb=function(i={}){let r={mounts:{"":i.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=i=>{for(let c of r.mountpoints)if(i.startsWith(c))return{base:c,relativeKey:i.slice(c.length),driver:r.mounts[c]};return{base:"",relativeKey:i,driver:r.mounts[""]}},getMounts=(i,c)=>r.mountpoints.filter(r=>r.startsWith(i)||c&&i.startsWith(r)).map(c=>({relativeBase:i.length>c.length?i.slice(c.length):void 0,mountpoint:c,driver:r.mounts[c]})),onChange=(i,c)=>{if(r.watching)for(let l of(c=normalizeKey(c),r.watchListeners))l(i,c)},startWatch=async()=>{if(!r.watching)for(let i in r.watching=!0,r.mounts)r.unwatch[i]=await watch(r.mounts[i],onChange,i)},stopWatch=async()=>{if(r.watching){for(let i in r.unwatch)await r.unwatch[i]();r.unwatch={},r.watching=!1}},runBatch=(i,r,c)=>{let l=new Map,getBatch=i=>{let r=l.get(i.base);return r||(r={driver:i.driver,base:i.base,items:[]},l.set(i.base,r)),r};for(let c of i){let i="string"==typeof c,l=normalizeKey(i?c:c.key),E=i?void 0:c.value,P=i||!c.options?r:{...r,...c.options},S=getMount(l);getBatch(S).items.push({key:l,value:E,relativeKey:S.relativeKey,options:P})}return Promise.all([...l.values()].map(i=>c(i))).then(i=>i.flat())},c={hasItem(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return asyncCall(l.hasItem,c,r)},getItem(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return asyncCall(l.getItem,c,r).then(i=>destr(i))},getItems:(i,r)=>runBatch(i,r,i=>i.driver.getItems?asyncCall(i.driver.getItems,i.items.map(i=>({key:i.relativeKey,options:i.options})),r).then(r=>r.map(r=>({key:function(...i){return normalizeKey(i.join(":"))}(i.base,r.key),value:destr(r.value)}))):Promise.all(i.items.map(r=>asyncCall(i.driver.getItem,r.relativeKey,r.options).then(i=>({key:r.key,value:destr(i)}))))),getItemRaw(i,r={}){i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);return l.getItemRaw?asyncCall(l.getItemRaw,c,r):asyncCall(l.getItem,c,r).then(i=>"string"==typeof i&&i.startsWith(q)?T.from(i.slice(q.length),"base64"):i)},async setItem(i,r,l={}){if(void 0===r)return c.removeItem(i);i=normalizeKey(i);let{relativeKey:E,driver:P}=getMount(i);P.setItem&&(await asyncCall(P.setItem,E,stringify(r),l),P.watch||onChange("update",i))},async setItems(i,r){await runBatch(i,r,async i=>{if(i.driver.setItems)return asyncCall(i.driver.setItems,i.items.map(i=>({key:i.relativeKey,value:stringify(i.value),options:i.options})),r);i.driver.setItem&&await Promise.all(i.items.map(r=>asyncCall(i.driver.setItem,r.relativeKey,stringify(r.value),r.options)))})},async setItemRaw(i,r,l={}){if(void 0===r)return c.removeItem(i,l);i=normalizeKey(i);let{relativeKey:E,driver:P}=getMount(i);if(P.setItemRaw)await asyncCall(P.setItemRaw,E,r,l);else{if(!P.setItem)return;await asyncCall(P.setItem,E,function(i){if("string"==typeof i)return i;let r=T.from(i).toString("base64");return q+r}(r),l)}P.watch||onChange("update",i)},async removeItem(i,r={}){"boolean"==typeof r&&(r={removeMeta:r}),i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i);l.removeItem&&(await asyncCall(l.removeItem,c,r),(r.removeMeta||r.removeMata)&&await asyncCall(l.removeItem,c+"$",r),l.watch||onChange("remove",i))},async getMeta(i,r={}){"boolean"==typeof r&&(r={nativeOnly:r}),i=normalizeKey(i);let{relativeKey:c,driver:l}=getMount(i),E=Object.create(null);if(l.getMeta&&Object.assign(E,await asyncCall(l.getMeta,c,r)),!r.nativeOnly){let i=await asyncCall(l.getItem,c+"$",r).then(i=>destr(i));i&&"object"==typeof i&&("string"==typeof i.atime&&(i.atime=new Date(i.atime)),"string"==typeof i.mtime&&(i.mtime=new Date(i.mtime)),Object.assign(E,i))}return E},setMeta(i,r,c={}){return this.setItem(i+"$",r,c)},removeMeta(i,r={}){return this.removeItem(i+"$",r)},async getKeys(i,r={}){i=unstorage_8581f561_normalizeBaseKey(i);let c=getMounts(i,!0),l=[],E=[];for(let i of c){let c=await asyncCall(i.driver.getKeys,i.relativeBase,r),P=c.map(r=>i.mountpoint+normalizeKey(r)).filter(i=>!l.some(r=>i.startsWith(r)));E.push(...P),l=[i.mountpoint,...l.filter(r=>!r.startsWith(i.mountpoint))]}return i?E.filter(r=>r.startsWith(i)&&!r.endsWith("$")):E.filter(i=>!i.endsWith("$"))},async clear(i,r={}){i=unstorage_8581f561_normalizeBaseKey(i),await Promise.all(getMounts(i,!1).map(async i=>{if(i.driver.clear)return asyncCall(i.driver.clear,i.relativeBase,r);if(i.driver.removeItem){let c=await i.driver.getKeys(i.relativeBase||"",r);return Promise.all(c.map(c=>i.driver.removeItem(c,r)))}}))},async dispose(){await Promise.all(Object.values(r.mounts).map(i=>dispose(i)))},watch:async i=>(await startWatch(),r.watchListeners.push(i),async()=>{r.watchListeners=r.watchListeners.filter(r=>r!==i),0===r.watchListeners.length&&await stopWatch()}),async unwatch(){r.watchListeners=[],await stopWatch()},mount(i,l){if((i=unstorage_8581f561_normalizeBaseKey(i))&&r.mounts[i])throw Error(`already mounted at ${i}`);return i&&(r.mountpoints.push(i),r.mountpoints.sort((i,r)=>r.length-i.length)),r.mounts[i]=l,r.watching&&Promise.resolve(watch(l,onChange,i)).then(c=>{r.unwatch[i]=c}).catch(console.error),c},async unmount(i,c=!0){(i=unstorage_8581f561_normalizeBaseKey(i))&&r.mounts[i]&&(r.watching&&i in r.unwatch&&(r.unwatch[i](),delete r.unwatch[i]),c&&await dispose(r.mounts[i]),r.mountpoints=r.mountpoints.filter(r=>r!==i),delete r.mounts[i])},getMount(i=""){i=normalizeKey(i)+":";let r=getMount(i);return{driver:r.driver,base:r.base}},getMounts(i="",r={}){i=normalizeKey(i);let c=getMounts(i,r.parents);return c.map(i=>({driver:i.driver,base:i.mountpoint}))}};return c}({driver:z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(i=>[i.key,i.value])}async getItem(i){let r=await this.indexedDb.getItem(i);if(null!==r)return r}async setItem(i,r){await this.indexedDb.setItem(i,safeJsonStringify(r))}async removeItem(i){await this.indexedDb.removeItem(i)}};var M="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},$={exports:{}};function k(i){var r;return[i[0],esm_safeJsonParse(null!=(r=i[1])?r:"")]}!function(){function t(){}t.prototype.getItem=function(i){return this.hasOwnProperty(i)?String(this[i]):null},t.prototype.setItem=function(i,r){this[i]=String(r)},t.prototype.removeItem=function(i){delete this[i]},t.prototype.clear=function(){let i=this;Object.keys(i).forEach(function(r){i[r]=void 0,delete i[r]})},t.prototype.key=function(i){return i=i||0,Object.keys(this)[i]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof M&&M.localStorage?$.exports=M.localStorage:"u">typeof window&&window.localStorage?$.exports=window.localStorage:$.exports=new t}();let K=class K{constructor(){this.localStorage=$.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(k)}async getItem(i){let r=this.localStorage.getItem(i);if(null!==r)return esm_safeJsonParse(r)}async setItem(i,r){this.localStorage.setItem(i,safeJsonStringify(r))}async removeItem(i){this.localStorage.removeItem(i)}};let O=async(i,r,c)=>{let l="wc_storage_version",E=await r.getItem(l);if(E&&E>=1){c(r);return}let P=await i.getKeys();if(!P.length){c(r);return}let S=[];for(;P.length;){let c=P.shift();if(!c)continue;let l=c.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){let l=await i.getItem(c);await r.setItem(c,l),S.push(c)}}await r.setItem(l,1),c(r),j(i,S)},j=async(i,r)=>{r.length&&r.forEach(async r=>{await i.removeItem(r)})};let h=class h{constructor(){this.initialized=!1,this.setInitialized=i=>{this.storage=i,this.initialized=!0};let i=new K;this.storage=i;try{let r=new _;O(i,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(i){return await this.initialize(),this.storage.getItem(i)}async setItem(i,r){return await this.initialize(),this.storage.setItem(i,r)}async removeItem(i){return await this.initialize(),this.storage.removeItem(i)}async initialize(){this.initialized||await new Promise(i=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),i())},20)})}};var U=c(37875),J=c(71315),F=c(36900);let n=class n extends F.q{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}};let index_es_h=class index_es_h extends F.q{constructor(i,r){super(),this.core=i,this.logger=r,this.records=new Map}};let a=class a{constructor(i,r){this.logger=i,this.core=r}};let u=class u extends F.q{constructor(i,r){super(),this.relayer=i,this.logger=r}};let g=class g extends F.q{constructor(i){super()}};let p=class p{constructor(i,r,c,l){this.core=i,this.logger=r,this.name=c}};let d=class d extends F.q{constructor(i,r){super(),this.relayer=i,this.logger=r}};let index_es_E=class index_es_E extends F.q{constructor(i,r){super(),this.core=i,this.logger=r}};let index_es_y=class index_es_y{constructor(i,r){this.projectId=i,this.logger=r}};let v=class v{constructor(i,r){this.projectId=i,this.logger=r}};let b=class b{constructor(i){this.opts=i,this.protocol="wc",this.version=2}};let w=class w{constructor(i){this.client=i}};var Q=c(61326),X=c(54889),ee=c(46196);let et="base64url",eo="base58btc";var ec=c(79722),el=c(89682),eh=c(37573);function encodeJSON(i){return(0,el.toString)((0,eh.fromString)(safeJsonStringify(i),"utf8"),et)}function encodeIss(i){let r=(0,eh.fromString)("K36",eo),c="z"+(0,el.toString)((0,ec.concat)([r,i]),eo);return["did","key",c].join(":")}function generateKeyPair(i=(0,X.randomBytes)(32)){return Q._w(i)}async function signJWT(i,r,c,l,E=(0,ee.fromMiliseconds)(Date.now())){var P,S,C;let R={alg:"EdDSA",typ:"JWT"},A=encodeIss(l.publicKey),T={iss:A,sub:i,aud:r,iat:E,exp:E+c},q=(P={header:R,payload:T},(0,eh.fromString)([encodeJSON(P.header),encodeJSON(P.payload)].join("."),"utf8")),M=Q.Xx(l.secretKey,q);return[encodeJSON((S={header:R,payload:T,signature:M}).header),encodeJSON(S.payload),(C=S.signature,(0,el.toString)(C,et))].join(".")}c(42995);var ep=c(5105);let ef="INTERNAL_ERROR",ed="SERVER_ERROR",eg=[-32700,-32600,-32601,-32602,-32603],ey={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[ef]:{code:-32603,message:"Internal error"},[ed]:{code:-32e3,message:"Server error"}};function getError(i){return Object.keys(ey).includes(i)?ey[i]:ey[ed]}function parseConnectionError(i,r,c){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${c} RPC url at ${r}`):i}var em=c(88497);function payloadId(i=3){let r=Date.now()*Math.pow(10,i);return r+Math.floor(Math.random()*Math.pow(10,i))}function getBigIntRpcId(i=6){return BigInt(payloadId(i))}function formatJsonRpcRequest(i,r,c){return{id:c||payloadId(),jsonrpc:"2.0",method:i,params:r}}function formatJsonRpcResult(i,r){return{id:i,jsonrpc:"2.0",result:r}}function formatJsonRpcError(i,r,c){var l,E;return{id:i,jsonrpc:"2.0",error:void 0===(l=r)?getError(ef):("string"==typeof l&&(l=Object.assign(Object.assign({},getError(ed)),{message:l})),void 0!==c&&(l.data=c),E=l.code,eg.includes(E)&&(l=function(i){let r=Object.values(ey).find(r=>r.code===i);return r||ey[ed]}(l.code)),l)}}let misc_IEvents=class misc_IEvents{};let IBaseJsonRpcProvider=class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}};let IJsonRpcProvider=class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(i){super()}};function matchRegexProtocol(i,r){let c=function(i){let r=i.match(RegExp(/^\w+:/,"gi"));if(r&&r.length)return r[0]}(i);return void 0!==c&&new RegExp(r).test(c)}function isHttpUrl(i){return matchRegexProtocol(i,"^https?:")}function isWsUrl(i){return matchRegexProtocol(i,"^wss?:")}function isJsonRpcPayload(i){return"object"==typeof i&&"id"in i&&"jsonrpc"in i&&"2.0"===i.jsonrpc}function isJsonRpcRequest(i){return isJsonRpcPayload(i)&&"method"in i}function isJsonRpcResponse(i){return isJsonRpcPayload(i)&&(isJsonRpcResult(i)||isJsonRpcError(i))}function isJsonRpcResult(i){return"result"in i}function isJsonRpcError(i){return"error"in i}let JsonRpcProvider=class JsonRpcProvider extends IJsonRpcProvider{constructor(i){super(i),this.events=new E.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(i),this.connection.connected&&this.registerEventListeners()}async connect(i=this.connection){await this.open(i)}async disconnect(){await this.close()}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async request(i,r){return this.requestStrict(formatJsonRpcRequest(i.method,i.params||[],i.id||getBigIntRpcId().toString()),r)}async requestStrict(i,r){return new Promise(async(c,l)=>{if(!this.connection.connected)try{await this.open()}catch(i){l(i)}this.events.on(`${i.id}`,i=>{isJsonRpcError(i)?l(i.error):c(i.result)});try{await this.connection.send(i,r)}catch(i){l(i)}})}setConnection(i=this.connection){return i}onPayload(i){this.events.emit("payload",i),isJsonRpcResponse(i)?this.events.emit(`${i.id}`,i):this.events.emit("message",{type:i.method,data:i.params})}onClose(i){i&&3e3===i.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${i.code} ${i.reason?`(${i.reason})`:""}`)),this.events.emit("disconnect")}async open(i=this.connection){this.connection===i&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof i&&(await this.connection.open(i),i=this.connection),this.connection=this.setConnection(i),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",i=>this.onPayload(i)),this.connection.on("close",i=>this.onClose(i)),this.connection.on("error",i=>this.events.emit("error",i)),this.connection.on("register_error",i=>this.onClose()),this.hasRegisteredEventListeners=!0)}};let index_es_b=()=>"u">typeof WebSocket||"u">typeof c.g&&"u">typeof c.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,index_es_a=i=>i.split("?")[0],e_="u">typeof WebSocket?WebSocket:"u">typeof c.g&&"u">typeof c.g.WebSocket?c.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:c(85783);let f=class f{constructor(i){if(this.url=i,this.events=new E.EventEmitter,this.registering=!1,!isWsUrl(i))throw Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,r)=>{if(typeof this.socket>"u"){r(Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),i()},this.socket.close()})}async send(i){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(safeJsonStringify(i))}catch(r){this.onError(i.id,r)}}register(i=this.url){if(!isWsUrl(i))throw Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){let i=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=i||this.events.listenerCount("open")>=i)&&this.events.setMaxListeners(i+1),new Promise((i,r)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),r(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return r(Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=i,this.registering=!0,new Promise((r,c)=>{let l=new URLSearchParams(i).get("origin"),E=(0,em.isReactNative)()?{headers:{origin:l}}:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(i)},P=new e_(i,[],E);index_es_b()?P.onerror=i=>{c(this.emitError(i.error))}:P.on("error",i=>{c(this.emitError(i))}),P.onopen=()=>{this.onOpen(P),r(P)}})}onOpen(i){i.onmessage=i=>this.onPayload(i),i.onclose=i=>this.onClose(i),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;let r="string"==typeof i.data?esm_safeJsonParse(i.data):i.data;this.events.emit("payload",r)}onError(i,r){let c=this.parseError(r),l=c.message||c.toString(),E=formatJsonRpcError(i,l);this.events.emit("payload",E)}parseError(i,r=this.url){return parseConnectionError(i,index_es_a(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(i){let r=this.parseError(Error(i?.message||`WebSocket connection failed for host: ${index_es_a(this.url)}`));return this.events.emit("register_error",r),r}};var ew=c(5899),eb=c.n(ew),eE=c(25930),eI=c.n(eE),ex=c(14224),Xi=function(i,r){if(i.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),l=0;l<c.length;l++)c[l]=255;for(var E=0;E<i.length;E++){var P=i.charAt(E),S=P.charCodeAt(0);if(255!==c[S])throw TypeError(P+" is ambiguous");c[S]=E}var C=i.length,R=i.charAt(0),A=Math.log(C)/Math.log(256),T=Math.log(256)/Math.log(C);function y(i){if("string"!=typeof i)throw TypeError("Expected String");if(0===i.length)return new Uint8Array;var r=0;if(" "!==i[0]){for(var l=0,E=0;i[r]===R;)l++,r++;for(var P=(i.length-r)*A+1>>>0,S=new Uint8Array(P);i[r];){var T=c[i.charCodeAt(r)];if(255===T)return;for(var q=0,M=P-1;(0!==T||q<E)&&-1!==M;M--,q++)T+=C*S[M]>>>0,S[M]=T%256>>>0,T=T/256>>>0;if(0!==T)throw Error("Non-zero carry");E=q,r++}if(" "!==i[r]){for(var $=P-E;$!==P&&0===S[$];)$++;for(var U=new Uint8Array(l+(P-$)),J=l;$!==P;)U[J++]=S[$++];return U}}}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===r.length)return"";for(var c=0,l=0,E=0,P=r.length;E!==P&&0===r[E];)E++,c++;for(var S=(P-E)*T+1>>>0,A=new Uint8Array(S);E!==P;){for(var q=r[E],M=0,$=S-1;(0!==q||M<l)&&-1!==$;$--,M++)q+=256*A[$]>>>0,A[$]=q%C>>>0,q=q/C>>>0;if(0!==q)throw Error("Non-zero carry");l=M,E++}for(var U=S-l;U!==S&&0===A[U];)U++;for(var J=R.repeat(c);U<S;++U)J+=i.charAt(A[U]);return J},decodeUnsafe:y,decode:function(i){var c=y(i);if(c)return c;throw Error(`Non-${r} character`)}}};let Ne=i=>{if(i instanceof Uint8Array&&"Uint8Array"===i.constructor.name)return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw Error("Unknown type, must be binary type")},Wi=i=>new TextEncoder().encode(i),Qi=i=>new TextDecoder().decode(i);let Zi=class Zi{constructor(i,r,c){this.name=i,this.prefix=r,this.baseEncode=c}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}};let es=class es{constructor(i,r,c){if(this.name=i,this.prefix=r,void 0===r.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=c}decode(i){if("string"==typeof i){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(i){return Ue(this,i)}};let ts=class ts{constructor(i){this.decoders=i}or(i){return Ue(this,i)}decode(i){let r=i[0],c=this.decoders[r];if(c)return c.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let Ue=(i,r)=>new ts({...i.decoders||{[i.prefix]:i},...r.decoders||{[r.prefix]:r}});let is=class is{constructor(i,r,c,l){this.name=i,this.prefix=r,this.baseEncode=c,this.baseDecode=l,this.encoder=new Zi(i,r,c),this.decoder=new es(i,r,l)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}};let W=({name:i,prefix:r,encode:c,decode:l})=>new is(i,r,c,l),B=({prefix:i,name:r,alphabet:c})=>{let{encode:l,decode:E}=Xi(c,r);return W({prefix:i,name:r,encode:l,decode:i=>Ne(E(i))})},ss=(i,r,c,l)=>{let E={};for(let i=0;i<r.length;++i)E[r[i]]=i;let P=i.length;for(;"="===i[P-1];)--P;let S=new Uint8Array(P*c/8|0),C=0,R=0,A=0;for(let r=0;r<P;++r){let P=E[i[r]];if(void 0===P)throw SyntaxError(`Non-${l} character`);R=R<<c|P,(C+=c)>=8&&(C-=8,S[A++]=255&R>>C)}if(C>=c||255&R<<8-C)throw SyntaxError("Unexpected end of data");return S},rs=(i,r,c)=>{let l="="===r[r.length-1],E=(1<<c)-1,P="",S=0,C=0;for(let l=0;l<i.length;++l)for(C=C<<8|i[l],S+=8;S>c;)S-=c,P+=r[E&C>>S];if(S&&(P+=r[E&C<<c-S]),l)for(;P.length*c&7;)P+="=";return P},index_es_g=({name:i,prefix:r,bitsPerChar:c,alphabet:l})=>W({prefix:r,name:i,encode:i=>rs(i,l,c),decode:r=>ss(r,l,c,i)}),eP=W({prefix:"\x00",name:"identity",encode:i=>Qi(i),decode:i=>Wi(i)});var eS=Object.freeze({__proto__:null,identity:eP});let eC=index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var eR=Object.freeze({__proto__:null,base2:eC});let eO=index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eA=Object.freeze({__proto__:null,base8:eO});let eL=B({prefix:"9",name:"base10",alphabet:"0123456789"});var eN=Object.freeze({__proto__:null,base10:eL});let ej=index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eT=index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ez=Object.freeze({__proto__:null,base16:ej,base16upper:eT});let eD=index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eM=index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ek=index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e$=index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eH=index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eU=index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eK=index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eV=index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eB=index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eJ=Object.freeze({__proto__:null,base32:eD,base32upper:eM,base32pad:ek,base32padupper:e$,base32hex:eH,base32hexupper:eU,base32hexpad:eK,base32hexpadupper:eV,base32z:eB});let eW=B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eG=B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var eF=Object.freeze({__proto__:null,base36:eW,base36upper:eG});let eZ=B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eY=B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var eQ=Object.freeze({__proto__:null,base58btc:eZ,base58flickr:eY});let eX=index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),e0=index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),e1=index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),e5=index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var e6=Object.freeze({__proto__:null,base64:eX,base64pad:e0,base64url:e1,base64urlpad:e5});let e2=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),e3=e2.reduce((i,r,c)=>(i[c]=r,i),[]),e9=e2.reduce((i,r,c)=>(i[r.codePointAt(0)]=c,i),[]),e4=W({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(i){return i.reduce((i,r)=>i+=e3[r],"")},decode:function(i){let r=[];for(let c of i){let i=e9[c.codePointAt(0)];if(void 0===i)throw Error(`Non-base256emoji character: ${c}`);r.push(i)}return new Uint8Array(r)}});var e7=Object.freeze({__proto__:null,base256emoji:e4});function $e(i,r,c){r=r||[],c=c||0;for(var l=c;i>=2147483648;)r[c++]=255&i|128,i/=128;for(;-128&i;)r[c++]=255&i|128,i>>>=7;return r[c]=0|i,$e.bytes=c-l+1,r}function he(i,r){var c,l=0,r=r||0,E=0,P=r,S=i.length;do{if(P>=S)throw he.bytes=0,RangeError("Could not decode varint");c=i[P++],l+=E<28?(127&c)<<E:(127&c)*Math.pow(2,E),E+=7}while(c>=128);return he.bytes=P-r,l}var e8={encode:$e,decode:he,encodingLength:function(i){return i<128?1:i<16384?2:i<2097152?3:i<268435456?4:i<34359738368?5:i<4398046511104?6:i<562949953421312?7:i<72057594037927940?8:i<0x7fffffffffffffff?9:10}};let Ke=(i,r,c=0)=>(e8.encode(i,r,c),r),Be=i=>e8.encodingLength(i),ce=(i,r)=>{let c=r.byteLength,l=Be(i),E=l+Be(c),P=new Uint8Array(E+c);return Ke(i,P,0),Ke(c,P,l),P.set(r,E),new or(i,c,r,P)};let or=class or{constructor(i,r,c,l){this.code=i,this.size=r,this.digest=c,this.bytes=l}};let Ve=({name:i,code:r,encode:c})=>new ar(i,r,c);let ar=class ar{constructor(i,r,c){this.name=i,this.code=r,this.encode=c}digest(i){if(i instanceof Uint8Array){let r=this.encode(i);return r instanceof Uint8Array?ce(this.code,r):r.then(i=>ce(this.code,i))}throw Error("Unknown type, must be binary type")}};let je=i=>async r=>new Uint8Array(await crypto.subtle.digest(i,r)),tn=Ve({name:"sha2-256",code:18,encode:je("SHA-256")}),ta=Ve({name:"sha2-512",code:19,encode:je("SHA-512")});var to=Object.freeze({__proto__:null,sha256:tn,sha512:ta}),tc=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Ne,digest:i=>ce(0,Ne(i))}});new TextEncoder,new TextDecoder;let tl={...eS,...eR,...eA,...eN,...ez,...eJ,...eF,...eQ,...e6,...e7};function He(i){return null!=globalThis.Buffer?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Je(i,r,c,l){return{name:i,prefix:r,encoder:{name:i,prefix:r,encode:c},decoder:{decode:l}}}({...to,...tc});let th=Je("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),tp=Je("ascii","a",i=>{let r="a";for(let c=0;c<i.length;c++)r+=String.fromCharCode(i[c]);return r},i=>{i=i.substring(1);let r=function(i=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?He(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}(i.length);for(let c=0;c<i.length;c++)r[c]=i.charCodeAt(c);return r}),tf={utf8:th,"utf-8":th,hex:tl.base16,latin1:tp,ascii:tp,binary:tp,...tl},td="core",tg=`wc@2:${td}:`,ty={logger:"error"},tm={database:":memory:"},t_="client_ed25519_seed",tw=ee.ONE_DAY,tb=ee.SIX_HOURS,tE="wss://relay.walletconnect.com",tI="wss://relay.walletconnect.org",tx={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},tP={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tS=ee.ONE_SECOND,tC={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tR=1e3*ee.FIVE_SECONDS,tO={wc_pairingDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:ee.ONE_DAY,prompt:!1,tag:0}}},tA={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},tL={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},tN={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tj="verify-api",tT="https://verify.walletconnect.com",tq="https://verify.walletconnect.org",tz=[tT,tq];let Pt=class Pt{constructor(i,r){this.core=i,this.logger=r,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=tg,this.init=async()=>{if(!this.initialized){let i=await this.getKeyChain();"u">typeof i&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,r)=>{this.isInitialized(),this.keychain.set(i,r),await this.persist()},this.get=i=>{this.isInitialized();let r=this.keychain.get(i);if(typeof r>"u"){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=i,this.logger=(0,J.generateChildLogger)(r,this.name)}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,(0,S.KC)(i))}async getKeyChain(){let i=await this.core.storage.getItem(this.storageKey);return"u">typeof i?(0,S.IP)(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let xt=class xt{constructor(i,r,c){this.core=i,this.logger=r,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();let i=await this.getClientSeed(),r=generateKeyPair(i);return encodeIss(r.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let i=(0,S.Au)();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();let r=await this.getClientSeed(),c=generateKeyPair(r),l=(0,S.jd)();return await signJWT(l,i,tw,c)},this.generateSharedKey=(i,r,c)=>{this.isInitialized();let l=this.getPrivateKey(i),E=(0,S.m$)(l,r);return this.setSymKey(E,c)},this.setSymKey=async(i,r)=>{this.isInitialized();let c=r||(0,S.Ym)(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,r,c)=>{this.isInitialized();let l=(0,S.EN)(c),E=safeJsonStringify(r);if((0,S.Q8)(l)){let r=l.senderPublicKey,c=l.receiverPublicKey;i=await this.generateSharedKey(r,c)}let P=this.getSymKey(i),{type:C,senderPublicKey:R}=l;return(0,S.HI)({type:C,symKey:P,message:E,senderPublicKey:R})},this.decode=async(i,r,c)=>{this.isInitialized();let l=(0,S.Ll)(r,c);if((0,S.Q8)(l)){let r=l.receiverPublicKey,c=l.senderPublicKey;i=await this.generateSharedKey(r,c)}try{let c=this.getSymKey(i),l=(0,S.pe)({symKey:c,encoded:r});return esm_safeJsonParse(l)}catch(r){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=i=>{let r=(0,S.vB)(i);return(0,S.WG)(r.type)},this.getPayloadSenderPublicKey=i=>{let r=(0,S.vB)(i);return r.senderPublicKey?(0,ep.BB)(r.senderPublicKey,S.AW):void 0},this.core=i,this.logger=(0,J.generateChildLogger)(r,this.name),this.keychain=c||new Pt(this.core,this.logger)}get context(){return(0,J.getLoggerContext)(this.logger)}async setPrivateKey(i,r){return await this.keychain.set(i,r),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(t_)}catch{i=(0,S.jd)(),await this.keychain.set(t_,i)}return function(i,r="utf8"){let c=tf[r];if(!c)throw Error(`Unsupported encoding "${r}"`);return("utf8"===r||"utf-8"===r)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?He(globalThis.Buffer.from(i,"utf-8")):c.decoder.decode(`${c.prefix}${i}`)}(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let Ot=class Ot extends a{constructor(i,r){super(i,r),this.logger=i,this.core=r,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=tg,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let i=await this.getRelayerMessages();"u">typeof i&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,r)=>{this.isInitialized();let c=(0,S.rj)(r),l=this.messages.get(i);return typeof l>"u"&&(l={}),"u">typeof l[c]||(l[c]=r,this.messages.set(i,l),await this.persist()),c},this.get=i=>{this.isInitialized();let r=this.messages.get(i);return typeof r>"u"&&(r={}),r},this.has=(i,r)=>{this.isInitialized();let c=this.get(i),l=(0,S.rj)(r);return"u">typeof c[l]},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,J.generateChildLogger)(i,this.name),this.core=r}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,(0,S.KC)(i))}async getRelayerMessages(){let i=await this.core.storage.getItem(this.storageKey);return"u">typeof i?(0,S.IP)(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let vr=class vr extends u{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.events=new E.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,ee.toMiliseconds)(ee.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,r,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:r,opts:c}});try{let E=c?.ttl||tb,P=(0,S._H)(c),C=c?.prompt||!1,R=c?.tag||0,A=c?.id||getBigIntRpcId().toString(),T={topic:i,message:r,opts:{ttl:E,relay:P,prompt:C,tag:R,id:A}},q=setTimeout(()=>this.queue.set(A,T),this.publishTimeout);try{await await (0,S.hF)(this.rpcPublish(i,r,E,P,C,R,A),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(A),this.relayer.events.emit(tx.publish,T)}catch(i){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(l=c?.internal)&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(A),i;return}finally{clearTimeout(q)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:r,opts:c}})}catch(i){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(i),i}},this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.relayer=i,this.logger=(0,J.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,J.getLoggerContext)(this.logger)}rpcPublish(i,r,c,l,E,P,C){var R,A,T,q;let M={method:(0,S.cO)(l.protocol).publish,params:{topic:i,message:r,ttl:c,prompt:E,tag:P},id:C};return(0,S.o8)(null==(R=M.params)?void 0:R.prompt)&&(null==(A=M.params)||delete A.prompt),(0,S.o8)(null==(T=M.params)?void 0:T.tag)&&(null==(q=M.params)||delete q.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:M}),this.relayer.request(M)}removeRequestFromQueue(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{let{topic:r,message:c,opts:l}=i;await this.publish(r,c,l)})}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tx.connection_stalled);return}this.checkQueue()}),this.relayer.on(tx.message_ack,i=>{this.removeRequestFromQueue(i.id.toString())})}};let Ir=class Ir{constructor(){this.map=new Map,this.set=(i,r)=>{let c=this.get(i);this.exists(i,r)||this.map.set(i,[...c,r])},this.get=i=>this.map.get(i)||[],this.exists=(i,r)=>this.get(i).includes(r),this.delete=(i,r)=>{if(typeof r>"u"){this.map.delete(i);return}if(!this.map.has(i))return;let c=this.get(i);if(!this.exists(i,r))return;let l=c.filter(i=>i!==r);if(!l.length){this.map.delete(i);return}this.map.set(i,l)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var tD=Object.defineProperty,tM=Object.defineProperties,tk=Object.getOwnPropertyDescriptors,t$=Object.getOwnPropertySymbols,tH=Object.prototype.hasOwnProperty,tU=Object.prototype.propertyIsEnumerable,zt=(i,r,c)=>r in i?tD(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_j=(i,r)=>{for(var c in r||(r={}))tH.call(r,c)&&zt(i,c,r[c]);if(t$)for(var c of t$(r))tU.call(r,c)&&zt(i,c,r[c]);return i},De=(i,r)=>tM(i,tk(r));let Nt=class Nt extends d{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.subscriptions=new Map,this.topicMap=new Ir,this.events=new E.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=tg,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:r}});try{let c=(0,S._H)(r),l={topic:i,relay:c};this.pending.set(i,l);let E=await this.rpcSubscribe(i,c);return this.onSubscribe(E,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:r}}),E}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}},this.unsubscribe=async(i,r)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof r?.id?await this.unsubscribeById(i,r.id,r):await this.unsubscribeByTopic(i,r)},this.isSubscribed=async i=>!!this.topics.includes(i)||await new Promise((r,c)=>{let l=new ee.Watch;l.start(this.pendingSubscriptionWatchLabel);let E=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(E),l.stop(this.pendingSubscriptionWatchLabel),r(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=tR&&(clearInterval(E),l.stop(this.pendingSubscriptionWatchLabel),c(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=(0,J.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,r){let c=!1;try{c=this.getSubscription(i).topic===r}catch{}return c}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,r){let c=this.topicMap.get(i);await Promise.all(c.map(async c=>await this.unsubscribeById(i,c,r)))}async unsubscribeById(i,r,c){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:c}});try{let l=(0,S._H)(c);await this.rpcUnsubscribe(i,r,l);let E=(0,S.D6)("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,r,E),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:c}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(i,r){let c={method:(0,S.cO)(r.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{await await (0,S.hF)(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tx.connection_stalled)}return(0,S.rj)(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;let r=i[0].relay,c={method:(0,S.cO)(r.protocol).batchSubscribe,params:{topics:i.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{return await await (0,S.hF)(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tx.connection_stalled)}}rpcUnsubscribe(i,r,c){let l={method:(0,S.cO)(c.protocol).unsubscribe,params:{topic:i,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:l}),this.relayer.request(l)}onSubscribe(i,r){this.setSubscription(i,De(index_es_j({},r),{id:i})),this.pending.delete(r.topic)}onBatchSubscribe(i){i.length&&i.forEach(i=>{this.setSubscription(i.id,index_es_j({},i)),this.pending.delete(i.topic)})}async onUnsubscribe(i,r,c){this.events.removeAllListeners(r),this.hasSubscription(r,i)&&this.deleteSubscription(r,c),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,r){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:r}),this.addSubscription(i,r))}addSubscription(i,r){this.subscriptions.set(i,index_es_j({},r)),this.topicMap.set(r.topic,i),this.events.emit(tC.created,r)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});let r=this.subscriptions.get(i);if(!r){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r}deleteSubscription(i,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:r});let c=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(c.topic,i),this.events.emit(tC.deleted,De(index_es_j({},c),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tC.sync)}async reset(){if(this.cached.length){let i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){let i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(tC.resubscribed)}async restore(){try{let i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){let{message:i}=(0,S.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;let r=await this.rpcBatchSubscribe(i);(0,S.qt)(r)&&this.onBatchSubscribe(r.map((r,c)=>De(index_es_j({},i[c]),{id:r})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let i=[];this.pending.forEach(r=>{i.push(r)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tx.connect,async()=>{await this.onConnect()}),this.relayer.on(tx.disconnect,()=>{this.onDisconnect()}),this.events.on(tC.created,async i=>{let r=tC.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()}),this.events.on(tC.deleted,async i=>{let r=tC.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),i())},this.pollingInterval)})}};var tK=Object.defineProperty,tV=Object.getOwnPropertySymbols,tB=Object.prototype.hasOwnProperty,tJ=Object.prototype.propertyIsEnumerable,Lt=(i,r,c)=>r in i?tK(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,Ar=(i,r)=>{for(var c in r||(r={}))tB.call(r,c)&&Lt(i,c,r[c]);if(tV)for(var c of tV(r))tJ.call(r,c)&&Lt(i,c,r[c]);return i};let Ft=class Ft extends g{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new E.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async i=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(i)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=i=>{this.onProviderPayload(i)},this.onConnectHandler=()=>{this.events.emit(tx.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=i=>{this.logger.error(i),this.events.emit(tx.error,i),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tP.payload,this.onPayloadHandler),this.provider.on(tP.connect,this.onConnectHandler),this.provider.on(tP.disconnect,this.onDisconnectHandler),this.provider.on(tP.error,this.onProviderErrorHandler)},this.core=i.core,this.logger="u">typeof i.logger&&"string"!=typeof i.logger?(0,J.generateChildLogger)(i.logger,this.name):(0,J.pino)((0,J.getDefaultLoggerOptions)({level:i.logger||"error"})),this.messages=new Ot(this.logger,i.core),this.subscriber=new Nt(this,this.logger),this.publisher=new vr(this,this.logger),this.relayUrl=i?.relayUrl||tE,this.projectId=i.projectId,this.bundleId=(0,S.X_)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${tI}...`),await this.restartTransport(tI)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,J.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,r,c){this.isInitialized(),await this.publisher.publish(i,r,c),await this.recordMessageEvent({topic:i,message:r,publishedAt:Date.now()})}async subscribe(i,r){var c;let l;this.isInitialized();let E=(null==(c=this.subscriber.topicMap.get(i))?void 0:c[0])||"";if(E)return E;let o=r=>{r.topic===i&&(this.subscriber.off(tC.created,o),l())};return await Promise.all([new Promise(i=>{l=i,this.subscriber.on(tC.created,o)}),new Promise(async c=>{E=await this.subscriber.subscribe(i,r),c()})]),E}async unsubscribe(i,r){this.isInitialized(),await this.subscriber.unsubscribe(i,r)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await (0,S.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(i){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){i&&i!==this.relayUrl&&(this.relayUrl=i,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(i=>{if(!this.initialized)return i();this.subscriber.once(tC.resubscribed,()=>{i()})}),new Promise(async(i,r)=>{try{await (0,S.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){r(i);return}i()})])}catch(i){if(this.logger.error(i),!this.isConnectionStalled(i.message))throw i;this.provider.events.emit(tP.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(i){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=i||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await (0,S.Gg)())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(i){return this.staleConnectionErrors.some(r=>i.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new f((0,S.$0)({sdkVersion:"2.11.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(i){let{topic:r,message:c}=i;await this.messages.set(r,c)}async shouldIgnoreMessageEvent(i){let{topic:r,message:c}=i;if(!c||0===c.length)return this.logger.debug(`Ignoring invalid/empty message: ${c}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let l=this.messages.has(r,c);return l&&this.logger.debug(`Ignoring duplicate message: ${c}`),l}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),isJsonRpcRequest(i)){if(!i.method.endsWith("_subscription"))return;let r=i.params,{topic:c,message:l,publishedAt:E}=r.data,P={topic:c,message:l,publishedAt:E};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ar({type:"event",event:r.id},P)),this.events.emit(r.id,P),await this.acknowledgePayload(i),await this.onMessageEvent(P)}else isJsonRpcResponse(i)&&this.events.emit(tx.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(tx.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){let r=formatJsonRpcResult(i.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(tP.payload,this.onPayloadHandler),this.provider.off(tP.connect,this.onConnectHandler),this.provider.off(tP.disconnect,this.onDisconnectHandler),this.provider.off(tP.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tx.connection_stalled,()=>{this.restartTransport().catch(i=>this.logger.error(i))});let i=await (0,S.Gg)();(0,S.uw)(async r=>{this.initialized&&i!==r&&(i=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(tx.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(i=>this.logger.error(i))},(0,ee.toMiliseconds)(tS)))}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(i=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var tW=Object.defineProperty,tG=Object.getOwnPropertySymbols,tF=Object.prototype.hasOwnProperty,tZ=Object.prototype.propertyIsEnumerable,Mt=(i,r,c)=>r in i?tW(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,kt=(i,r)=>{for(var c in r||(r={}))tF.call(r,c)&&Mt(i,c,r[c]);if(tG)for(var c of tG(r))tZ.call(r,c)&&Mt(i,c,r[c]);return i};let Kt=class Kt extends p{constructor(i,r,c,l=tg,E){super(i,r,c,l),this.core=i,this.logger=r,this.name=c,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tg,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>{this.getKey&&null!==i&&!(0,S.o8)(i)?this.map.set(this.getKey(i),i):(0,S.xW)(i)?this.map.set(i.id,i):(0,S.h1)(i)&&this.map.set(i.topic,i)}),this.cached=[],this.initialized=!0)},this.set=async(i,r)=>{this.isInitialized(),this.map.has(i)?await this.update(i,r):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:i,value:r}),this.map.set(i,r),await this.persist())},this.get=i=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:i}),this.getData(i)),this.getAll=i=>(this.isInitialized(),i?this.values.filter(r=>Object.keys(i).every(c=>eb()(r[c],i[c]))):this.values),this.update=async(i,r)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:i,update:r});let c=kt(kt({},this.getData(i)),r);this.map.set(i,c),await this.persist()},this.delete=async(i,r)=>{this.isInitialized(),this.map.has(i)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:i,reason:r}),this.map.delete(i),await this.persist())},this.logger=(0,J.generateChildLogger)(r,this.name),this.storagePrefix=l,this.getKey=E}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){let r=this.map.get(i);if(!r){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(r),Error(r)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){let{message:i}=(0,S.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let Bt=class Bt{constructor(i,r){this.core=i,this.logger=r,this.name="pairing",this.version="0.3",this.events=new(P()),this.initialized=!1,this.storagePrefix=tg,this.ignoredPayloadTypes=[S.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();let i=(0,S.jd)(),r=await this.core.crypto.setSymKey(i),c=(0,S.gn)(ee.FIVE_MINUTES),l={protocol:"irn"},E=(0,S.Bv)({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:i,relay:l});return await this.pairings.set(r,{topic:r,expiry:c,relay:l,active:!1}),await this.core.relayer.subscribe(r),this.core.expirer.set(r,c),{topic:r,uri:E}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);let{topic:r,symKey:c,relay:l}=(0,S.he)(i.uri);if(this.pairings.keys.includes(r)&&this.pairings.get(r).active)throw Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);let E=(0,S.gn)(ee.FIVE_MINUTES),P={topic:r,relay:l,expiry:E,active:!1};return await this.pairings.set(r,P),this.core.expirer.set(r,E),i.activatePairing&&await this.activate({topic:r}),this.events.emit(tA.create,P),this.core.crypto.keychain.has(r)||(await this.core.crypto.setSymKey(c,r),await this.core.relayer.subscribe(r,{relay:l})),P},this.activate=async({topic:i})=>{this.isInitialized();let r=(0,S.gn)(ee.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:r}),this.core.expirer.set(i,r)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);let{topic:r}=i;if(this.pairings.keys.includes(r)){let i=await this.sendRequest(r,"wc_pairingPing",{}),{done:c,resolve:l,reject:E}=(0,S.H1)();this.events.once((0,S.E0)("pairing_ping",i),({error:i})=>{i?E(i):l()}),await c()}},this.updateExpiry=async({topic:i,expiry:r})=>{this.isInitialized(),await this.pairings.update(i,{expiry:r})},this.updateMetadata=async({topic:i,metadata:r})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);let{topic:r}=i;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",(0,S.D6)("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(i,r,c)=>{let l=formatJsonRpcRequest(r,c),E=await this.core.crypto.encode(i,l),P=tO[r].req;return this.core.history.set(i,l),this.core.relayer.publish(i,E,P),l.id},this.sendResult=async(i,r,c)=>{let l=formatJsonRpcResult(i,c),E=await this.core.crypto.encode(r,l),P=await this.core.history.get(r,i),S=tO[P.request.method].res;await this.core.relayer.publish(r,E,S),await this.core.history.resolve(l)},this.sendError=async(i,r,c)=>{let l=formatJsonRpcError(i,c),E=await this.core.crypto.encode(r,l),P=await this.core.history.get(r,i),S=tO[P.request.method]?tO[P.request.method].res:tO.unregistered_method.res;await this.core.relayer.publish(r,E,S),await this.core.history.resolve(l)},this.deletePairing=async(i,r)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,(0,S.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),r?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{let i=this.pairings.getAll().filter(i=>(0,S.Bw)(i.expiry));await Promise.all(i.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=i=>{let{topic:r,payload:c}=i;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(r,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,c);default:return this.onUnknownRpcMethodRequest(r,c)}},this.onRelayEventResponse=async i=>{let{topic:r,payload:c}=i,l=(await this.core.history.get(r,c.id)).request.method;return"wc_pairingPing"===l?this.onPairingPingResponse(r,c):this.onUnknownRpcMethodResponse(l)},this.onPairingPingRequest=async(i,r)=>{let{id:c}=r;try{this.isValidPing({topic:i}),await this.sendResult(c,i,!0),this.events.emit(tA.ping,{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onPairingPingResponse=(i,r)=>{let{id:c}=r;setTimeout(()=>{isJsonRpcResult(r)?this.events.emit((0,S.E0)("pairing_ping",c),{}):isJsonRpcError(r)&&this.events.emit((0,S.E0)("pairing_ping",c),{error:r.error})},500)},this.onPairingDeleteRequest=async(i,r)=>{let{id:c}=r;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(tA.delete,{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onUnknownRpcMethodRequest=async(i,r)=>{let{id:c,method:l}=r;try{if(this.registeredMethods.includes(l))return;let r=(0,S.D6)("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,i,r),this.logger.error(r)}catch(r){await this.sendError(c,i,r),this.logger.error(r)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error((0,S.D6)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var r;if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`pair() params: ${i}`);throw Error(r)}if(!(0,S.jv)(i.uri)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw Error(r)}let c=(0,S.he)(i.uri);if(!(null!=(r=c?.relay)&&r.protocol)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(i)}if(!(null!=c&&c.symKey)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID","pair() uri#symKey");throw Error(i)}},this.isValidPing=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidPairingTopic(r)},this.isValidDisconnect=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async i=>{if(!(0,S.M_)(i,!1)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw Error(r)}if(!this.pairings.keys.includes(i)){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw Error(r)}if((0,S.Bw)(this.pairings.get(i).expiry)){await this.deletePairing(i);let{message:r}=(0,S.Z7)("EXPIRED",`pairing topic: ${i}`);throw Error(r)}},this.core=i,this.logger=(0,J.generateChildLogger)(r,this.name),this.pairings=new Kt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,J.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}registerRelayerEvents(){this.core.relayer.on(tx.message,async i=>{let{topic:r,message:c}=i;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(c)))return;let l=await this.core.crypto.decode(r,c);try{isJsonRpcRequest(l)?(this.core.history.set(r,l),this.onRelayEventRequest({topic:r,payload:l})):isJsonRpcResponse(l)&&(await this.core.history.resolve(l),await this.onRelayEventResponse({topic:r,payload:l}),this.core.history.delete(r,l.id))}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(tN.expired,async i=>{let{topic:r}=(0,S.iP)(i.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(tA.expire,{topic:r}))})}};let Vt=class Vt extends index_es_h{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.records=new Map,this.events=new E.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tg,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,r,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:r,chainId:c}),this.records.has(r.id))return;let l={id:r.id,topic:i,request:{method:r.method,params:r.params||null},chainId:c,expiry:(0,S.gn)(ee.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(tL.created,l)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;let r=await this.getRecord(i.id);typeof r.response>"u"&&(r.response=isJsonRpcError(i)?{error:i.error}:{result:i.result},this.records.set(r.id,r),this.events.emit(tL.updated,r))},this.get=async(i,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:r}),await this.getRecord(r)),this.delete=(i,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach(c=>{c.topic!==i||"u">typeof r&&c.id!==r||(this.records.delete(c.id),this.events.emit(tL.deleted,c))})},this.exists=async(i,r)=>(this.isInitialized(),!!this.records.has(r)&&(await this.getRecord(r)).topic===i),this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.logger=(0,J.generateChildLogger)(r,this.name)}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let i=[];return this.values.forEach(r=>{if("u">typeof r.response)return;let c={topic:r.topic,request:formatJsonRpcRequest(r.request.method,r.request.params,r.id),chainId:r.chainId};return i.push(c)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();let r=this.records.get(i);if(!r){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw Error(r)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tL.sync)}async restore(){try{let i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){let{message:i}=(0,S.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(tL.created,i=>{let r=tL.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(tL.updated,i=>{let r=tL.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(tL.deleted,i=>{let r=tL.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{(0,ee.toMiliseconds)(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let jt=class jt extends index_es_E{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.expirations=new Map,this.events=new E.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=tg,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{let r=this.formatTarget(i);return"u">typeof this.getExpiration(r)}catch{return!1}},this.set=(i,r)=>{this.isInitialized();let c=this.formatTarget(i),l={target:c,expiry:r};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(tN.created,{target:c,expiration:l})},this.get=i=>{this.isInitialized();let r=this.formatTarget(i);return this.getExpiration(r)},this.del=i=>{if(this.isInitialized(),this.has(i)){let r=this.formatTarget(i),c=this.getExpiration(r);this.expirations.delete(r),this.events.emit(tN.deleted,{target:r,expiration:c})}},this.on=(i,r)=>{this.events.on(i,r)},this.once=(i,r)=>{this.events.once(i,r)},this.off=(i,r)=>{this.events.off(i,r)},this.removeListener=(i,r)=>{this.events.removeListener(i,r)},this.logger=(0,J.generateChildLogger)(r,this.name)}get context(){return(0,J.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if("string"==typeof i)return(0,S.Z4)(i);if("number"==typeof i)return(0,S.Gq)(i);let{message:r}=(0,S.Z7)("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw Error(r)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(tN.sync)}async restore(){try{let i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){let{message:i}=(0,S.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),Error(i)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){let r=this.expirations.get(i);if(!r){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(r),Error(r)}return r}checkExpiry(i,r){let{expiry:c}=r;(0,ee.toMiliseconds)(c)-Date.now()<=0&&this.expire(i,r)}expire(i,r){this.expirations.delete(i),this.events.emit(tN.expired,{target:i,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,r)=>this.checkExpiry(r,i))}registerEventListeners(){this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(tN.created,i=>{let r=tN.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(tN.expired,i=>{let r=tN.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(tN.deleted,i=>{let r=tN.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()})}isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}}};let qt=class qt extends index_es_y{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.name=tj,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||(0,S.b$)()||!(0,S.jU)())return;let r=this.getVerifyUrl(i?.verifyUrl);this.verifyUrl!==r&&this.removeIframe(),this.verifyUrl=r;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i)}if(!this.initialized){this.removeIframe(),this.verifyUrl=tq;try{await this.createIframe()}catch(i){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(i),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{let r;if(this.isDevEnv)return"";let c=this.getVerifyUrl(i?.verifyUrl);try{r=await this.fetchAttestation(i.attestationId,c)}catch(l){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${c}`),this.logger.info(l),r=await this.fetchAttestation(i.attestationId,tq)}return r},this.fetchAttestation=async(i,r)=>{this.logger.info(`resolving attestation: ${i} from url: ${r}`);let c=this.startAbortTimer(2*ee.ONE_SECOND),l=await fetch(`${r}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(c),200===l.status?await l.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var r;try{if(!this.iframe)return;null==(r=this.iframe.contentWindow)||r.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;let s=r=>{"verify_ready"===r.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),i())};await Promise.race([new Promise(r=>{if(document.getElementById(tj))return r();window.addEventListener("message",s);let c=document.createElement("iframe");c.id=tj,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,i=r}),new Promise((i,r)=>setTimeout(()=>{window.removeEventListener("message",s),r("verify iframe load timeout")},(0,ee.toMiliseconds)(ee.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let r=i||tT;return tz.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${tT}`),r=tT),r},this.logger=(0,J.generateChildLogger)(r,this.name),this.verifyUrl=tT,this.abortController=new AbortController,this.isDevEnv=(0,S.UG)()&&ex.env.IS_VITEST}get context(){return(0,J.getLoggerContext)(this.logger)}startAbortTimer(i){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,ee.toMiliseconds)(i))}};let Gt=class Gt extends v{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.context="echo",this.registerDeviceToken=async i=>{let{clientId:r,token:c,notificationType:l,enableEncrypted:E=!1}=i,P=`https://echo.walletconnect.com/${this.projectId}/clients`;await eI()(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,type:l,token:c,always_raw:E})})},this.logger=(0,J.generateChildLogger)(r,this.context)}};var tY=Object.defineProperty,tQ=Object.getOwnPropertySymbols,tX=Object.prototype.hasOwnProperty,t0=Object.prototype.propertyIsEnumerable,Ht=(i,r,c)=>r in i?tY(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,Jt=(i,r)=>{for(var c in r||(r={}))tX.call(r,c)&&Ht(i,c,r[c]);if(tQ)for(var c of tQ(r))t0.call(r,c)&&Ht(i,c,r[c]);return i};let te=class te extends n{constructor(i){super(i),this.protocol="wc",this.version=2,this.name=td,this.events=new E.EventEmitter,this.initialized=!1,this.on=(i,r)=>this.events.on(i,r),this.once=(i,r)=>this.events.once(i,r),this.off=(i,r)=>this.events.off(i,r),this.removeListener=(i,r)=>this.events.removeListener(i,r),this.projectId=i?.projectId,this.relayUrl=i?.relayUrl||tE,this.customStoragePrefix=null!=i&&i.customStoragePrefix?`:${i.customStoragePrefix}`:"";let r="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,J.pino)((0,J.getDefaultLoggerOptions)({level:i?.logger||ty.logger}));this.logger=(0,J.generateChildLogger)(r,this.name),this.heartbeat=new U.HeartBeat,this.crypto=new xt(this,this.logger,i?.keychain),this.history=new Vt(this,this.logger),this.expirer=new jt(this,this.logger),this.storage=null!=i&&i.storage?i.storage:new h(Jt(Jt({},tm),i?.storageOptions)),this.relayer=new Ft({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Bt(this,this.logger),this.verify=new qt(this.projectId||"",this.logger),this.echoClient=new Gt(this.projectId||"",this.logger)}static async init(i){let r=new te(i);await r.initialize();let c=await r.crypto.getClientId();return await r.storage.setItem("WALLETCONNECT_CLIENT_ID",c),r}get context(){return(0,J.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}};let t1="client",t5=`wc@2:${t1}:`,t6={name:t1,logger:"error"},t2="WALLETCONNECT_DEEPLINK_CHOICE",t3="Proposal expired",t9=ee.SEVEN_DAYS,t4={wc_sessionPropose:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1115}}},t7={min:ee.FIVE_MINUTES,max:ee.SEVEN_DAYS},t8={idle:"IDLE",active:"ACTIVE"},ie=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var ir=Object.defineProperty,io=Object.defineProperties,ic=Object.getOwnPropertyDescriptors,il=Object.getOwnPropertySymbols,ih=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable,index_es_de=(i,r,c)=>r in i?ir(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,dist_index_es_g=(i,r)=>{for(var c in r||(r={}))ih.call(r,c)&&index_es_de(i,c,r[c]);if(il)for(var c of il(r))iu.call(r,c)&&index_es_de(i,c,r[c]);return i},dist_index_es_b=(i,r)=>io(i,ic(r));let index_es_ds=class index_es_ds extends w{constructor(i){super(i),this.name="engine",this.events=new(P()),this.initialized=!1,this.ignoredPayloadTypes=[S.rV],this.requestQueue={state:t8.idle,queue:[]},this.sessionRequestQueue={state:t8.idle,queue:[]},this.requestQueueDelay=ee.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(t4)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,ee.toMiliseconds)(this.requestQueueDelay)))},this.connect=async i=>{await this.isInitialized();let r=dist_index_es_b(dist_index_es_g({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});await this.isValidConnect(r);let{pairingTopic:c,requiredNamespaces:l,optionalNamespaces:E,sessionProperties:P,relays:C}=r,R=c,A,T=!1;if(R&&(T=this.client.core.pairing.pairings.get(R).active),!R||!T){let{topic:i,uri:r}=await this.client.core.pairing.create();R=i,A=r}let q=await this.client.core.crypto.generateKeyPair(),M=dist_index_es_g({requiredNamespaces:l,optionalNamespaces:E,relays:C??[{protocol:"irn"}],proposer:{publicKey:q,metadata:this.client.metadata}},P&&{sessionProperties:P}),{reject:$,resolve:U,done:J}=(0,S.H1)(ee.FIVE_MINUTES,t3);if(this.events.once((0,S.E0)("session_connect"),async({error:i,session:r})=>{if(i)$(i);else if(r){r.self.publicKey=q;let i=dist_index_es_b(dist_index_es_g({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces});await this.client.session.set(r.topic,i),await this.setExpiry(r.topic,r.expiry),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:r.peer.metadata}),U(i)}}),!R){let{message:i}=(0,S.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${R}`);throw Error(i)}let F=await this.sendRequest({topic:R,method:"wc_sessionPropose",params:M}),Q=(0,S.gn)(ee.FIVE_MINUTES);return await this.setProposal(F,dist_index_es_g({id:F,expiry:Q},M)),{uri:A,approval:J}},this.pair=async i=>(await this.isInitialized(),await this.client.core.pairing.pair(i)),this.approve=async i=>{await this.isInitialized(),await this.isValidApprove(i);let{id:r,relayProtocol:c,namespaces:l,sessionProperties:E}=i,P=this.client.proposal.get(r),{pairingTopic:C,proposer:R,requiredNamespaces:A,optionalNamespaces:T}=P;C=C||"",(0,S.L5)(A)||(A=(0,S.fc)(l,"approve()"));let q=await this.client.core.crypto.generateKeyPair(),M=R.publicKey,$=await this.client.core.crypto.generateSharedKey(q,M);C&&r&&(await this.client.core.pairing.updateMetadata({topic:C,metadata:R.metadata}),await this.sendResult({id:r,topic:C,result:{relay:{protocol:c??"irn"},responderPublicKey:q}}),await this.client.proposal.delete(r,(0,S.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:C}));let U=dist_index_es_g({relay:{protocol:c??"irn"},namespaces:l,requiredNamespaces:A,optionalNamespaces:T,pairingTopic:C,controller:{publicKey:q,metadata:this.client.metadata},expiry:(0,S.gn)(t9)},E&&{sessionProperties:E});await this.client.core.relayer.subscribe($),await this.sendRequest({topic:$,method:"wc_sessionSettle",params:U,throwOnFailedPublish:!0});let J=dist_index_es_b(dist_index_es_g({},U),{topic:$,pairingTopic:C,acknowledged:!1,self:U.controller,peer:{publicKey:R.publicKey,metadata:R.metadata},controller:q});return await this.client.session.set($,J),await this.setExpiry($,(0,S.gn)(t9)),{topic:$,acknowledged:()=>new Promise(i=>setTimeout(()=>i(this.client.session.get($)),500))}},this.reject=async i=>{await this.isInitialized(),await this.isValidReject(i);let{id:r,reason:c}=i,{pairingTopic:l}=this.client.proposal.get(r);l&&(await this.sendError(r,l,c),await this.client.proposal.delete(r,(0,S.D6)("USER_DISCONNECTED")))},this.update=async i=>{await this.isInitialized(),await this.isValidUpdate(i);let{topic:r,namespaces:c}=i,l=await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:c}}),{done:E,resolve:P,reject:C}=(0,S.H1)();return this.events.once((0,S.E0)("session_update",l),({error:i})=>{i?C(i):P()}),await this.client.session.update(r,{namespaces:c}),{acknowledged:E}},this.extend=async i=>{await this.isInitialized(),await this.isValidExtend(i);let{topic:r}=i,c=await this.sendRequest({topic:r,method:"wc_sessionExtend",params:{}}),{done:l,resolve:E,reject:P}=(0,S.H1)();return this.events.once((0,S.E0)("session_extend",c),({error:i})=>{i?P(i):E()}),await this.setExpiry(r,(0,S.gn)(t9)),{acknowledged:l}},this.request=async i=>{await this.isInitialized(),await this.isValidRequest(i);let{chainId:r,request:c,topic:l,expiry:E}=i,P=payloadId(),{done:C,resolve:R,reject:A}=(0,S.H1)(E,"Request expired. Please try again.");return this.events.once((0,S.E0)("session_request",P),({error:i,result:r})=>{i?A(i):R(r)}),await Promise.all([new Promise(async i=>{await this.sendRequest({clientRpcId:P,topic:l,method:"wc_sessionRequest",params:{request:c,chainId:r},expiry:E,throwOnFailedPublish:!0}).catch(i=>A(i)),this.client.events.emit("session_request_sent",{topic:l,request:c,chainId:r,id:P}),i()}),new Promise(async i=>{let r=await (0,S.bW)(this.client.core.storage,t2);(0,S.Hh)({id:P,topic:l,wcDeepLink:r}),i()}),C()]).then(i=>i[2])},this.respond=async i=>{await this.isInitialized(),await this.isValidRespond(i);let{topic:r,response:c}=i,{id:l}=c;isJsonRpcResult(c)?await this.sendResult({id:l,topic:r,result:c.result,throwOnFailedPublish:!0}):isJsonRpcError(c)&&await this.sendError(l,r,c.error),this.cleanupAfterResponse(i)},this.ping=async i=>{await this.isInitialized(),await this.isValidPing(i);let{topic:r}=i;if(this.client.session.keys.includes(r)){let i=await this.sendRequest({topic:r,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:E}=(0,S.H1)();this.events.once((0,S.E0)("session_ping",i),({error:i})=>{i?E(i):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async i=>{await this.isInitialized(),await this.isValidEmit(i);let{topic:r,event:c,chainId:l}=i;await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:c,chainId:l}})},this.disconnect=async i=>{await this.isInitialized(),await this.isValidDisconnect(i);let{topic:r}=i;this.client.session.keys.includes(r)?(await this.sendRequest({topic:r,method:"wc_sessionDelete",params:(0,S.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(r)):await this.client.core.pairing.disconnect({topic:r})},this.find=i=>(this.isInitialized(),this.client.session.getAll().filter(r=>(0,S.Ih)(r,i))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async i=>{if(i.pairingTopic)try{let r=this.client.core.pairing.pairings.get(i.pairingTopic),c=this.client.core.pairing.pairings.getAll().filter(c=>{var l,E;return(null==(l=c.peerMetadata)?void 0:l.url)&&(null==(E=c.peerMetadata)?void 0:E.url)===i.peer.metadata.url&&c.topic&&c.topic!==r.topic});if(0===c.length)return;this.client.logger.info(`Cleaning up ${c.length} duplicate pairing(s)`),await Promise.all(c.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(i,r)=>{let{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),this.client.session.delete(i,(0,S.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(t2).catch(i=>this.client.logger.warn(i)),this.getPendingSessionRequests().forEach(r=>{r.topic===i&&this.deletePendingSessionRequest(r.id,(0,S.D6)("USER_DISCONNECTED"))})},this.deleteProposal=async(i,r)=>{await Promise.all([this.client.proposal.delete(i,(0,S.D6)("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(i)])},this.deletePendingSessionRequest=async(i,r,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(i,r),c?Promise.resolve():this.client.core.expirer.del(i)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(r=>r.id!==i),c&&(this.sessionRequestQueue.state=t8.idle)},this.setExpiry=async(i,r)=>{this.client.session.keys.includes(i)&&await this.client.session.update(i,{expiry:r}),this.client.core.expirer.set(i,r)},this.setProposal=async(i,r)=>{await this.client.proposal.set(i,r),this.client.core.expirer.set(i,r.expiry)},this.setPendingSessionRequest=async i=>{let r=t4.wc_sessionRequest.req.ttl,{id:c,topic:l,params:E,verifyContext:P}=i;await this.client.pendingRequest.set(c,{id:c,topic:l,params:E,verifyContext:P}),r&&this.client.core.expirer.set(c,(0,S.gn)(r))},this.sendRequest=async i=>{let{topic:r,method:c,params:l,expiry:E,relayRpcId:P,clientRpcId:C,throwOnFailedPublish:R}=i,A=formatJsonRpcRequest(c,l,C);if((0,S.jU)()&&ie.includes(c)){let i=(0,S.rj)(JSON.stringify(A));this.client.core.verify.register({attestationId:i})}let T=await this.client.core.crypto.encode(r,A),q=t4[c].req;return E&&(q.ttl=E),P&&(q.id=P),this.client.core.history.set(r,A),R?(q.internal=dist_index_es_b(dist_index_es_g({},q.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,T,q)):this.client.core.relayer.publish(r,T,q).catch(i=>this.client.logger.error(i)),A.id},this.sendResult=async i=>{let{id:r,topic:c,result:l,throwOnFailedPublish:E}=i,P=formatJsonRpcResult(r,l),S=await this.client.core.crypto.encode(c,P),C=await this.client.core.history.get(c,r),R=t4[C.request.method].res;E?(R.internal=dist_index_es_b(dist_index_es_g({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(c,S,R)):this.client.core.relayer.publish(c,S,R).catch(i=>this.client.logger.error(i)),await this.client.core.history.resolve(P)},this.sendError=async(i,r,c)=>{let l=formatJsonRpcError(i,c),E=await this.client.core.crypto.encode(r,l),P=await this.client.core.history.get(r,i),S=t4[P.request.method].res;this.client.core.relayer.publish(r,E,S),await this.client.core.history.resolve(l)},this.cleanup=async()=>{let i=[],r=[];this.client.session.getAll().forEach(r=>{(0,S.Bw)(r.expiry)&&i.push(r.topic)}),this.client.proposal.getAll().forEach(i=>{(0,S.Bw)(i.expiry)&&r.push(i.id)}),await Promise.all([...i.map(i=>this.deleteSession(i)),...r.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async i=>{this.requestQueue.queue.push(i),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===t8.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=t8.active;let i=this.requestQueue.queue.shift();if(i)try{this.processRequest(i),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=t8.idle},this.processRequest=i=>{let{topic:r,payload:c}=i,l=c.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(r,c);case"wc_sessionSettle":return this.onSessionSettleRequest(r,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,c);case"wc_sessionExtend":return this.onSessionExtendRequest(r,c);case"wc_sessionPing":return this.onSessionPingRequest(r,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,c);case"wc_sessionRequest":return this.onSessionRequest(r,c);case"wc_sessionEvent":return this.onSessionEventRequest(r,c);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async i=>{let{topic:r,payload:c}=i,l=(await this.client.core.history.get(r,c.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(r,c);case"wc_sessionSettle":return this.onSessionSettleResponse(r,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,c);case"wc_sessionExtend":return this.onSessionExtendResponse(r,c);case"wc_sessionPing":return this.onSessionPingResponse(r,c);case"wc_sessionRequest":return this.onSessionRequestResponse(r,c);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=i=>{let{topic:r}=i,{message:c}=(0,S.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw Error(c)},this.onSessionProposeRequest=async(i,r)=>{let{params:c,id:l}=r;try{this.isValidConnect(dist_index_es_g({},r.params));let E=(0,S.gn)(ee.FIVE_MINUTES),P=dist_index_es_g({id:l,pairingTopic:i,expiry:E},c);await this.setProposal(l,P);let C=(0,S.rj)(JSON.stringify(r)),R=await this.getVerifyContext(C,P.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:P,verifyContext:R})}catch(r){await this.sendError(l,i,r),this.client.logger.error(r)}},this.onSessionProposeResponse=async(i,r)=>{let{id:c}=r;if(isJsonRpcResult(r)){let{result:l}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});let E=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:E});let P=E.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:P});let S=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:S});let C=await this.client.core.crypto.generateSharedKey(P,S);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:C});let R=await this.client.core.relayer.subscribe(C);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:R}),await this.client.core.pairing.activate({topic:i})}else isJsonRpcError(r)&&(await this.client.proposal.delete(c,(0,S.D6)("USER_DISCONNECTED")),this.events.emit((0,S.E0)("session_connect"),{error:r.error}))},this.onSessionSettleRequest=async(i,r)=>{let{id:c,params:l}=r;try{this.isValidSessionSettleRequest(l);let{relay:c,controller:E,expiry:P,namespaces:C,requiredNamespaces:R,optionalNamespaces:A,sessionProperties:T,pairingTopic:q}=r.params,M=dist_index_es_g({topic:i,relay:c,expiry:P,namespaces:C,acknowledged:!0,pairingTopic:q,requiredNamespaces:R,optionalNamespaces:A,controller:E.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:E.publicKey,metadata:E.metadata}},T&&{sessionProperties:T});await this.sendResult({id:r.id,topic:i,result:!0}),this.events.emit((0,S.E0)("session_connect"),{session:M}),this.cleanupDuplicatePairings(M)}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionSettleResponse=async(i,r)=>{let{id:c}=r;isJsonRpcResult(r)?(await this.client.session.update(i,{acknowledged:!0}),this.events.emit((0,S.E0)("session_approve",c),{})):isJsonRpcError(r)&&(await this.client.session.delete(i,(0,S.D6)("USER_DISCONNECTED")),this.events.emit((0,S.E0)("session_approve",c),{error:r.error}))},this.onSessionUpdateRequest=async(i,r)=>{let{params:c,id:l}=r;try{let r=`${i}_session_update`,E=S.O6.get(r);if(E&&this.isRequestOutOfSync(E,l)){this.client.logger.info(`Discarding out of sync request - ${l}`);return}this.isValidUpdate(dist_index_es_g({topic:i},c)),await this.client.session.update(i,{namespaces:c.namespaces}),await this.sendResult({id:l,topic:i,result:!0}),this.client.events.emit("session_update",{id:l,topic:i,params:c}),S.O6.set(r,l)}catch(r){await this.sendError(l,i,r),this.client.logger.error(r)}},this.isRequestOutOfSync=(i,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(i.toString().slice(0,-3)),this.onSessionUpdateResponse=(i,r)=>{let{id:c}=r;isJsonRpcResult(r)?this.events.emit((0,S.E0)("session_update",c),{}):isJsonRpcError(r)&&this.events.emit((0,S.E0)("session_update",c),{error:r.error})},this.onSessionExtendRequest=async(i,r)=>{let{id:c}=r;try{this.isValidExtend({topic:i}),await this.setExpiry(i,(0,S.gn)(t9)),await this.sendResult({id:c,topic:i,result:!0}),this.client.events.emit("session_extend",{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionExtendResponse=(i,r)=>{let{id:c}=r;isJsonRpcResult(r)?this.events.emit((0,S.E0)("session_extend",c),{}):isJsonRpcError(r)&&this.events.emit((0,S.E0)("session_extend",c),{error:r.error})},this.onSessionPingRequest=async(i,r)=>{let{id:c}=r;try{this.isValidPing({topic:i}),await this.sendResult({id:c,topic:i,result:!0}),this.client.events.emit("session_ping",{id:c,topic:i})}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionPingResponse=(i,r)=>{let{id:c}=r;setTimeout(()=>{isJsonRpcResult(r)?this.events.emit((0,S.E0)("session_ping",c),{}):isJsonRpcError(r)&&this.events.emit((0,S.E0)("session_ping",c),{error:r.error})},500)},this.onSessionDeleteRequest=async(i,r)=>{let{id:c}=r;try{this.isValidDisconnect({topic:i,reason:r.params}),await Promise.all([new Promise(r=>{this.client.core.relayer.once(tx.publish,async()=>{r(await this.deleteSession(i))})}),this.sendResult({id:c,topic:i,result:!0})]),this.client.events.emit("session_delete",{id:c,topic:i})}catch(i){this.client.logger.error(i)}},this.onSessionRequest=async(i,r)=>{let{id:c,params:l}=r;try{this.isValidRequest(dist_index_es_g({topic:i},l));let r=(0,S.rj)(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",l,c))),E=this.client.session.get(i),P=await this.getVerifyContext(r,E.peer.metadata),C={id:c,topic:i,params:l,verifyContext:P};await this.setPendingSessionRequest(C),this.addSessionRequestToSessionRequestQueue(C),this.processSessionRequestQueue()}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.onSessionRequestResponse=(i,r)=>{let{id:c}=r;isJsonRpcResult(r)?this.events.emit((0,S.E0)("session_request",c),{result:r.result}):isJsonRpcError(r)&&this.events.emit((0,S.E0)("session_request",c),{error:r.error})},this.onSessionEventRequest=async(i,r)=>{let{id:c,params:l}=r;try{let r=`${i}_session_event_${l.event.name}`,E=S.O6.get(r);if(E&&this.isRequestOutOfSync(E,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidEmit(dist_index_es_g({topic:i},l)),this.client.events.emit("session_event",{id:c,topic:i,params:l}),S.O6.set(r,c)}catch(r){await this.sendError(c,i,r),this.client.logger.error(r)}},this.addSessionRequestToSessionRequestQueue=i=>{this.sessionRequestQueue.queue.push(i)},this.cleanupAfterResponse=i=>{this.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=t8.idle,this.processSessionRequestQueue()},(0,ee.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===t8.active){this.client.logger.info("session request queue is already active.");return}let i=this.sessionRequestQueue.queue[0];if(!i){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=t8.active,this.client.events.emit("session_request",i)}catch(i){this.client.logger.error(i)}},this.onPairingCreated=i=>{if(i.active)return;let r=this.client.proposal.getAll().find(r=>r.pairingTopic===i.topic);r&&this.onSessionProposeRequest(i.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id))},this.isValidConnect=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw Error(r)}let{pairingTopic:r,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:E,relays:P}=i;if((0,S.o8)(r)||await this.isValidPairingTopic(r),!(0,S.PM)(P,!0)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`connect() relays: ${P}`);throw Error(i)}(0,S.o8)(c)||0===(0,S.L5)(c)||this.validateNamespaces(c,"requiredNamespaces"),(0,S.o8)(l)||0===(0,S.L5)(l)||this.validateNamespaces(l,"optionalNamespaces"),(0,S.o8)(E)||this.validateSessionProps(E,"sessionProperties")},this.validateNamespaces=(i,r)=>{let c=(0,S.n)(i,"connect()",r);if(c)throw Error(c.message)},this.isValidApprove=async i=>{if(!(0,S.EJ)(i))throw Error((0,S.Z7)("MISSING_OR_INVALID",`approve() params: ${i}`).message);let{id:r,namespaces:c,relayProtocol:l,sessionProperties:E}=i;await this.isValidProposalId(r);let P=this.client.proposal.get(r),C=(0,S.in)(c,"approve()");if(C)throw Error(C.message);let R=(0,S.rF)(P.requiredNamespaces,c,"approve()");if(R)throw Error(R.message);if(!(0,S.M_)(l,!0)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw Error(i)}(0,S.o8)(E)||this.validateSessionProps(E,"sessionProperties")},this.isValidReject=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`reject() params: ${i}`);throw Error(r)}let{id:r,reason:c}=i;if(await this.isValidProposalId(r),!(0,S.$t)(c)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw Error(i)}},this.isValidSessionSettleRequest=i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${i}`);throw Error(r)}let{relay:r,controller:c,namespaces:l,expiry:E}=i;if(!(0,S.Z2)(r)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(i)}let P=(0,S.Dd)(c,"onSessionSettleRequest()");if(P)throw Error(P.message);let C=(0,S.in)(l,"onSessionSettleRequest()");if(C)throw Error(C.message);if((0,S.Bw)(E)){let{message:i}=(0,S.Z7)("EXPIRED","onSessionSettleRequest()");throw Error(i)}},this.isValidUpdate=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`update() params: ${i}`);throw Error(r)}let{topic:r,namespaces:c}=i;await this.isValidSessionTopic(r);let l=this.client.session.get(r),E=(0,S.in)(c,"update()");if(E)throw Error(E.message);let P=(0,S.rF)(l.requiredNamespaces,c,"update()");if(P)throw Error(P.message)},this.isValidExtend=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`extend() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionTopic(r)},this.isValidRequest=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`request() params: ${i}`);throw Error(r)}let{topic:r,request:c,chainId:l,expiry:E}=i;await this.isValidSessionTopic(r);let{namespaces:P}=this.client.session.get(r);if(!(0,S.p8)(P,l)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`request() chainId: ${l}`);throw Error(i)}if(!(0,S.hH)(c)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(c)}`);throw Error(i)}if(!(0,S.al)(P,l,c.method)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`request() method: ${c.method}`);throw Error(i)}if(E&&!(0,S.ON)(E,t7)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`request() expiry: ${E}. Expiry must be a number (in seconds) between ${t7.min} and ${t7.max}`);throw Error(i)}},this.isValidRespond=async i=>{var r;if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`respond() params: ${i}`);throw Error(r)}let{topic:c,response:l}=i;try{await this.isValidSessionTopic(c)}catch(c){throw null!=(r=i?.response)&&r.id&&this.cleanupAfterResponse(i),c}if(!(0,S.JT)(l)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(l)}`);throw Error(i)}},this.isValidPing=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`ping() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`emit() params: ${i}`);throw Error(r)}let{topic:r,event:c,chainId:l}=i;await this.isValidSessionTopic(r);let{namespaces:E}=this.client.session.get(r);if(!(0,S.p8)(E,l)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw Error(i)}if(!(0,S.nf)(c)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(i)}if(!(0,S.sI)(E,l,c.name)){let{message:i}=(0,S.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(i)}},this.isValidDisconnect=async i=>{if(!(0,S.EJ)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw Error(r)}let{topic:r}=i;await this.isValidSessionOrPairingTopic(r)},this.getVerifyContext=async(i,r)=>{let c={verified:{verifyUrl:r.verifyUrl||tT,validation:"UNKNOWN",origin:r.url||""}};try{let l=await this.client.core.verify.resolve({attestationId:i,verifyUrl:r.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(i){this.client.logger.info(i)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(i,r)=>{Object.values(i).forEach(i=>{if(!(0,S.M_)(i,!1)){let{message:c}=(0,S.Z7)("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw Error(c)}})}}async isInitialized(){if(!this.initialized){let{message:i}=(0,S.Z7)("NOT_INITIALIZED",this.name);throw Error(i)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tx.message,async i=>{let{topic:r,message:c}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(c)))return;let l=await this.client.core.crypto.decode(r,c);try{isJsonRpcRequest(l)?(this.client.core.history.set(r,l),this.onRelayEventRequest({topic:r,payload:l})):isJsonRpcResponse(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:r,payload:l}),this.client.core.history.delete(r,l.id)):this.onRelayEventUnknownPayload({topic:r,payload:l})}catch(i){this.client.logger.error(i)}})}registerExpirerEvents(){this.client.core.expirer.on(tN.expired,async i=>{let{topic:r,id:c}=(0,S.iP)(i.target);if(c&&this.client.pendingRequest.keys.includes(c))return await this.deletePendingSessionRequest(c,(0,S.Z7)("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):c&&(await this.deleteProposal(c,!0),this.client.events.emit("proposal_expire",{id:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(tA.create,i=>this.onPairingCreated(i))}isValidPairingTopic(i){if(!(0,S.M_)(i,!1)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw Error(r)}if(!this.client.core.pairing.pairings.keys.includes(i)){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw Error(r)}if((0,S.Bw)(this.client.core.pairing.pairings.get(i).expiry)){let{message:r}=(0,S.Z7)("EXPIRED",`pairing topic: ${i}`);throw Error(r)}}async isValidSessionTopic(i){if(!(0,S.M_)(i,!1)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw Error(r)}if(!this.client.session.keys.includes(i)){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw Error(r)}if((0,S.Bw)(this.client.session.get(i).expiry)){await this.deleteSession(i);let{message:r}=(0,S.Z7)("EXPIRED",`session topic: ${i}`);throw Error(r)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if((0,S.M_)(i,!1)){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw Error(r)}else{let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw Error(r)}}async isValidProposalId(i){if(!(0,S.Q0)(i)){let{message:r}=(0,S.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw Error(r)}if(!this.client.proposal.keys.includes(i)){let{message:r}=(0,S.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw Error(r)}if((0,S.Bw)(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);let{message:r}=(0,S.Z7)("EXPIRED",`proposal id: ${i}`);throw Error(r)}}};let index_es_us=class index_es_us extends Kt{constructor(i,r){super(i,r,"proposal",t5),this.core=i,this.logger=r}};let index_es_ue=class index_es_ue extends Kt{constructor(i,r){super(i,r,"session",t5),this.core=i,this.logger=r}};let index_es_gs=class index_es_gs extends Kt{constructor(i,r){super(i,r,"request",t5,i=>i.id),this.core=i,this.logger=r}};let index_es_Q=class index_es_Q extends b{constructor(i){super(i),this.protocol="wc",this.version=2,this.name=t6.name,this.events=new E.EventEmitter,this.on=(i,r)=>this.events.on(i,r),this.once=(i,r)=>this.events.once(i,r),this.off=(i,r)=>this.events.off(i,r),this.removeListener=(i,r)=>this.events.removeListener(i,r),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(i){throw this.logger.error(i.message),i}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(i){throw this.logger.error(i.message),i}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(i){throw this.logger.error(i.message),i}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(i){throw this.logger.error(i.message),i}},this.update=async i=>{try{return await this.engine.update(i)}catch(i){throw this.logger.error(i.message),i}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(i){throw this.logger.error(i.message),i}},this.request=async i=>{try{return await this.engine.request(i)}catch(i){throw this.logger.error(i.message),i}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(i){throw this.logger.error(i.message),i}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(i){throw this.logger.error(i.message),i}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(i){throw this.logger.error(i.message),i}},this.find=i=>{try{return this.engine.find(i)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=i?.name||t6.name,this.metadata=i?.metadata||(0,S.D)();let r="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,J.pino)((0,J.getDefaultLoggerOptions)({level:i?.logger||t6.logger}));this.core=i?.core||new te(i),this.logger=(0,J.generateChildLogger)(r,this.name),this.session=new index_es_ue(this.core,this.logger),this.proposal=new index_es_us(this.core,this.logger),this.pendingRequest=new index_es_gs(this.core,this.logger),this.engine=new index_es_ds(this)}static async init(i){let r=new index_es_Q(i);return await r.initialize(),r}get context(){return(0,J.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}};var ip=c(52830),id=c.n(ip);let ig={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};let HttpConnection=class HttpConnection{constructor(i,r=!1){if(this.url=i,this.disableProviderPing=r,this.events=new E.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(i))throw Error(`Provided URL is not compatible with HTTP connection: ${i}`);this.url=i,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(i,r){this.isAvailable||await this.register();try{let r=safeJsonStringify(i),c=await id()(this.url,Object.assign(Object.assign({},ig),{body:r})),l=await c.json();this.onPayload({data:l})}catch(r){this.onError(i.id,r)}}async register(i=this.url){if(!isHttpUrl(i))throw Error(`Provided URL is not compatible with HTTP connection: ${i}`);if(this.registering){let i=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=i||this.events.listenerCount("open")>=i)&&this.events.setMaxListeners(i+1),new Promise((i,r)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),r(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return r(Error("HTTP connection is missing or invalid"));i()})})}this.url=i,this.registering=!0;try{if(!this.disableProviderPing){let r=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await id()(i,Object.assign(Object.assign({},ig),{body:r}))}this.onOpen()}catch(r){let i=this.parseError(r);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(i){if(void 0===i.data)return;let r="string"==typeof i.data?esm_safeJsonParse(i.data):i.data;this.events.emit("payload",r)}onError(i,r){let c=this.parseError(r),l=c.message||c.toString(),E=formatJsonRpcError(i,l);this.events.emit("payload",E)}parseError(i,r=this.url){return parseConnectionError(i,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}};let iy="error",im="wc@2:universal_provider:",i_={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var iw="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},ib={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(i,r){(function(){var c,l="Expected a function",E="__lodash_hash_undefined__",P="__lodash_placeholder__",S=1/0,C=0/0,R=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],A="[object Arguments]",T="[object Array]",q="[object Boolean]",M="[object Date]",$="[object Error]",U="[object Function]",J="[object GeneratorFunction]",F="[object Map]",Q="[object Number]",X="[object Object]",ee="[object Promise]",et="[object RegExp]",eo="[object Set]",ec="[object String]",el="[object Symbol]",eh="[object WeakMap]",ep="[object ArrayBuffer]",ef="[object DataView]",ed="[object Float32Array]",eg="[object Float64Array]",ey="[object Int8Array]",em="[object Int16Array]",e_="[object Int32Array]",ew="[object Uint8Array]",eb="[object Uint8ClampedArray]",eE="[object Uint16Array]",eI="[object Uint32Array]",ex=/\b__p \+= '';/g,eP=/\b(__p \+=) '' \+/g,eS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,eC=/&(?:amp|lt|gt|quot|#39);/g,eR=/[&<>"']/g,eO=RegExp(eC.source),eA=RegExp(eR.source),eL=/<%-([\s\S]+?)%>/g,eN=/<%([\s\S]+?)%>/g,ej=/<%=([\s\S]+?)%>/g,eT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ez=/^\w*$/,eD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eM=/[\\^$.*+?()[\]{}|]/g,ek=RegExp(eM.source),e$=/^\s+/,eH=/\s/,eU=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eK=/\{\n\/\* \[wrapped with (.+)\] \*/,eV=/,? & /,eB=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eJ=/[()=,{}\[\]\/\s]/,eW=/\\(\\)?/g,eG=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eF=/\w*$/,eZ=/^[-+]0x[0-9a-f]+$/i,eY=/^0b[01]+$/i,eQ=/^\[object .+?Constructor\]$/,eX=/^0o[0-7]+$/i,e0=/^(?:0|[1-9]\d*)$/,e1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e5=/($^)/,e6=/['\n\r\u2028\u2029\\]/g,e2="\ud800-\udfff",e3="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e9="\\u2700-\\u27bf",e4="a-z\\xdf-\\xf6\\xf8-\\xff",e7="A-Z\\xc0-\\xd6\\xd8-\\xde",e8="\\ufe0e\\ufe0f",tn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="['’]",to="["+tn+"]",tc="["+e3+"]",tl="["+e4+"]",th="[^"+e2+tn+"\\d+"+e9+e4+e7+"]",tp="\ud83c[\udffb-\udfff]",tf="[^"+e2+"]",td="(?:\ud83c[\udde6-\uddff]){2}",tg="[\ud800-\udbff][\udc00-\udfff]",ty="["+e7+"]",tm="\\u200d",t_="(?:"+tl+"|"+th+")",tw="(?:"+ta+"(?:d|ll|m|re|s|t|ve))?",tb="(?:"+ta+"(?:D|LL|M|RE|S|T|VE))?",tE="(?:"+tc+"|"+tp+")?",tI="["+e8+"]?",tx="(?:"+tm+"(?:"+[tf,td,tg].join("|")+")"+tI+tE+")*",tP=tI+tE+tx,tS="(?:"+["["+e9+"]",td,tg].join("|")+")"+tP,tC="(?:"+[tf+tc+"?",tc,td,tg,"["+e2+"]"].join("|")+")",tR=RegExp(ta,"g"),tO=RegExp(tc,"g"),tA=RegExp(tp+"(?="+tp+")|"+tC+tP,"g"),tL=RegExp([ty+"?"+tl+"+"+tw+"(?="+[to,ty,"$"].join("|")+")","(?:"+ty+"|"+th+")+"+tb+"(?="+[to,ty+t_,"$"].join("|")+")",ty+"?"+t_+"+"+tw,ty+"+"+tb,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tS].join("|"),"g"),tN=RegExp("["+tm+e2+e3+e8+"]"),tj=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tT=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tq=-1,tz={};tz[ed]=tz[eg]=tz[ey]=tz[em]=tz[e_]=tz[ew]=tz[eb]=tz[eE]=tz[eI]=!0,tz[A]=tz[T]=tz[ep]=tz[q]=tz[ef]=tz[M]=tz[$]=tz[U]=tz[F]=tz[Q]=tz[X]=tz[et]=tz[eo]=tz[ec]=tz[eh]=!1;var tD={};tD[A]=tD[T]=tD[ep]=tD[ef]=tD[q]=tD[M]=tD[ed]=tD[eg]=tD[ey]=tD[em]=tD[e_]=tD[F]=tD[Q]=tD[X]=tD[et]=tD[eo]=tD[ec]=tD[el]=tD[ew]=tD[eb]=tD[eE]=tD[eI]=!0,tD[$]=tD[U]=tD[eh]=!1;var tM={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tk=parseFloat,t$=parseInt,tH="object"==typeof iw&&iw&&iw.Object===Object&&iw,tU="object"==typeof self&&self&&self.Object===Object&&self,tK=tH||tU||Function("return this")(),tV=r&&!r.nodeType&&r,tB=tV&&i&&!i.nodeType&&i,tJ=tB&&tB.exports===tV,tW=tJ&&tH.process,tG=function(){try{return tB&&tB.require&&tB.require("util").types||tW&&tW.binding&&tW.binding("util")}catch{}}(),tF=tG&&tG.isArrayBuffer,tZ=tG&&tG.isDate,tY=tG&&tG.isMap,tQ=tG&&tG.isRegExp,tX=tG&&tG.isSet,t0=tG&&tG.isTypedArray;function cn(i,r,c){switch(c.length){case 0:return i.call(r);case 1:return i.call(r,c[0]);case 2:return i.call(r,c[0],c[1]);case 3:return i.call(r,c[0],c[1],c[2])}return i.apply(r,c)}function Vo(i,r,c,l){for(var E=-1,P=null==i?0:i.length;++E<P;){var S=i[E];r(l,S,c(S),i)}return l}function mn(i,r){for(var c=-1,l=null==i?0:i.length;++c<l&&!1!==r(i[c],c,i););return i}function As(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(!r(i[c],c,i))return!1;return!0}function jn(i,r){for(var c=-1,l=null==i?0:i.length,E=0,P=[];++c<l;){var S=i[c];r(S,c,i)&&(P[E++]=S)}return P}function Ee(i,r){return!!(null==i?0:i.length)&&Tt(i,r,0)>-1}function Dr(i,r,c){for(var l=-1,E=null==i?0:i.length;++l<E;)if(c(r,i[l]))return!0;return!1}function G(i,r){for(var c=-1,l=null==i?0:i.length,E=Array(l);++c<l;)E[c]=r(i[c],c,i);return E}function nt(i,r){for(var c=-1,l=r.length,E=i.length;++c<l;)i[E+c]=r[c];return i}function Hr(i,r,c,l){var E=-1,P=null==i?0:i.length;for(l&&P&&(c=i[++E]);++E<P;)c=r(c,i[E],E,i);return c}function jo(i,r,c,l){var E=null==i?0:i.length;for(l&&E&&(c=i[--E]);E--;)c=r(c,i[E],E,i);return c}function Nr(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(r(i[c],c,i))return!0;return!1}var t1=$r("length");function Cs(i,r,c){var l;return c(i,function(i,c,E){if(r(i,c,E))return l=c,!1}),l}function ye(i,r,c,l){for(var E=i.length,P=c+(l?1:-1);l?P--:++P<E;)if(r(i[P],P,i))return P;return -1}function Tt(i,r,c){return r==r?function(i,r,c){for(var l=c-1,E=i.length;++l<E;)if(i[l]===r)return l;return -1}(i,r,c):ye(i,Is,c)}function rf(i,r,c,l){for(var E=c-1,P=i.length;++E<P;)if(l(i[E],r))return E;return -1}function Is(i){return i!=i}function xs(i,r){var c=null==i?0:i.length;return c?Wr(i,r)/c:C}function $r(i){return function(r){return null==r?c:r[i]}}function Ur(i){return function(r){return null==i?c:i[r]}}function Es(i,r,c,l,E){return E(i,function(i,E,P){c=l?(l=!1,i):r(c,i,E,P)}),c}function Wr(i,r){for(var l,E=-1,P=i.length;++E<P;){var S=r(i[E]);S!==c&&(l=l===c?S:l+S)}return l}function Fr(i,r){for(var c=-1,l=Array(i);++c<i;)l[c]=r(c);return l}function ys(i){return i&&i.slice(0,bs(i)+1).replace(e$,"")}function hn(i){return function(r){return i(r)}}function Mr(i,r){return G(r,function(r){return i[r]})}function jt(i,r){return i.has(r)}function Ss(i,r){for(var c=-1,l=i.length;++c<l&&Tt(r,i[c],0)>-1;);return c}function Os(i,r){for(var c=i.length;c--&&Tt(r,i[c],0)>-1;);return c}var t5=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),t6=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(i){return"\\"+tM[i]}function Lt(i){return tN.test(i)}function qr(i){var r=-1,c=Array(i.size);return i.forEach(function(i,l){c[++r]=[l,i]}),c}function Rs(i,r){return function(c){return i(r(c))}}function tt(i,r){for(var c=-1,l=i.length,E=0,S=[];++c<l;){var C=i[c];(C===r||C===P)&&(i[c]=P,S[E++]=c)}return S}function Se(i){var r=-1,c=Array(i.size);return i.forEach(function(i){c[++r]=i}),c}function Dt(i){return Lt(i)?function(i){for(var r=tA.lastIndex=0;tA.test(i);)++r;return r}(i):t1(i)}function On(i){return Lt(i)?i.match(tA)||[]:i.split("")}function bs(i){for(var r=i.length;r--&&eH.test(i.charAt(r)););return r}var t2=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),t3=function h(i){var r,eH,e2,e3,e9=(i=null==i?tK:t3.defaults(tK.Object(),i,t3.pick(tK,tT))).Array,e4=i.Date,e7=i.Error,e8=i.Function,tn=i.Math,ta=i.Object,to=i.RegExp,tc=i.String,tl=i.TypeError,th=e9.prototype,tp=e8.prototype,tf=ta.prototype,td=i["__core-js_shared__"],tg=tp.toString,ty=tf.hasOwnProperty,tm=0,t_=(r=/[^.]+$/.exec(td&&td.keys&&td.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",tw=tf.toString,tb=tg.call(ta),tE=tK._,tI=to("^"+tg.call(ty).replace(eM,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tx=tJ?i.Buffer:c,tP=i.Symbol,tS=i.Uint8Array,tC=tx?tx.allocUnsafe:c,tA=Rs(ta.getPrototypeOf,ta),tN=ta.create,tM=tf.propertyIsEnumerable,tH=th.splice,tU=tP?tP.isConcatSpreadable:c,tV=tP?tP.iterator:c,tB=tP?tP.toStringTag:c,tW=function(){try{var i=mt(ta,"defineProperty");return i({},"",{}),i}catch{}}(),tG=i.clearTimeout!==tK.clearTimeout&&i.clearTimeout,t1=e4&&e4.now!==tK.Date.now&&e4.now,t9=i.setTimeout!==tK.setTimeout&&i.setTimeout,t4=tn.ceil,t7=tn.floor,t8=ta.getOwnPropertySymbols,ie=tx?tx.isBuffer:c,ir=i.isFinite,io=th.join,ic=Rs(ta.keys,ta),il=tn.max,ih=tn.min,iu=e4.now,ip=i.parseInt,id=tn.random,ig=th.reverse,iy=mt(i,"DataView"),im=mt(i,"Map"),i_=mt(i,"Promise"),iw=mt(i,"Set"),ib=mt(i,"WeakMap"),iE=mt(ta,"create"),iI=ib&&new ib,ix={},iP=wt(iy),iS=wt(im),iC=wt(i_),iR=wt(iw),iO=wt(ib),iA=tP?tP.prototype:c,iL=iA?iA.valueOf:c,iN=iA?iA.toString:c;function a(i){if(Y(i)&&!rN(i)&&!(i instanceof H)){if(i instanceof Pn)return i;if(ty.call(i,"__wrapped__"))return Fu(i)}return new Pn(i)}var ij=function(){function n(){}return function(i){if(!K(i))return{};if(tN)return tN(i);n.prototype=i;var r=new n;return n.prototype=c,r}}();function qe(){}function Pn(i,r){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=c}function H(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function dt(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function Bn(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function Gn(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function gt(i){var r=-1,c=null==i?0:i.length;for(this.__data__=new Gn;++r<c;)this.add(i[r])}function Rn(i){var r=this.__data__=new Bn(i);this.size=r.size}function Fs(i,r){var c=rN(i),l=!c&&rL(i),E=!c&&!l&&rT(i),P=!c&&!l&&!E&&rk(i),S=c||l||E||P,C=S?Fr(i.length,tc):[],R=C.length;for(var A in i)(r||ty.call(i,A))&&!(S&&("length"==A||E&&("offset"==A||"parent"==A)||P&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||Zn(A,R)))&&C.push(A);return C}function Ms(i){var r=i.length;return r?i[ei(0,r-1)]:c}function Yr(i,r,l){(l===c||bn(i[r],l))&&(l!==c||r in i)||zn(i,r,l)}function se(i,r,l){var E=i[r];ty.call(i,r)&&bn(E,l)&&(l!==c||r in i)||zn(i,r,l)}function Be(i,r){for(var c=i.length;c--;)if(bn(i[c][0],r))return c;return -1}function gc(i,r,c,l){return iT(i,function(i,E,P){r(l,i,c(i),P)}),l}function qs(i,r){return i&&Un(r,V(r),i)}function zn(i,r,c){"__proto__"==r&&tW?tW(i,r,{configurable:!0,enumerable:!0,value:c,writable:!0}):i[r]=c}function Zr(i,r){for(var l=-1,E=r.length,P=e9(E),S=null==i;++l<E;)P[l]=S?c:Si(i,r[l]);return P}function vt(i,r,l){return i==i&&(l!==c&&(i=i<=l?i:l),r!==c&&(i=i>=r?i:r)),i}function An(i,r,l,E,P,S){var C,R=1&r,T=2&r,$=4&r;if(l&&(C=P?l(i,E,P,S):l(i)),C!==c)return C;if(!K(i))return i;var ee=rN(i);if(ee){if(eh=i.length,ex=new i.constructor(eh),eh&&"string"==typeof i[0]&&ty.call(i,"index")&&(ex.index=i.index,ex.input=i.input),C=ex,!R)return un(i,C)}else{var eh,ex,eP,eS,eC,eR=iB(i),eO=eR==U||eR==J;if(rT(i))return hu(i,R);if(eR==X||eR==A||eO&&!P){if(C=T||eO?{}:bu(i),!R)return T?(eP=(eC=C)&&Un(i,on(i),eC),Un(i,iV(i),eP)):(eS=qs(C,i),Un(i,iK(i),eS))}else{if(!tD[eR])return P?i:{};C=function(i,r,c){var l,E,P=i.constructor;switch(r){case ep:return fi(i);case q:case M:return new P(+i);case ef:return l=c?fi(i.buffer):i.buffer,new i.constructor(l,i.byteOffset,i.byteLength);case ed:case eg:case ey:case em:case e_:case ew:case eb:case eE:case eI:return lu(i,c);case F:return new P;case Q:case ec:return new P(i);case et:return(E=new i.constructor(i.source,eF.exec(i))).lastIndex=i.lastIndex,E;case eo:return new P;case el:return iL?ta(iL.call(i)):{}}}(i,eR,R)}}S||(S=new Rn);var eA=S.get(i);if(eA)return eA;S.set(i,C),rM(i)?i.forEach(function(c){C.add(An(c,r,l,c,i,S))}):rz(i)&&i.forEach(function(c,E){C.set(E,An(c,r,l,E,i,S))});var eL=$?T?pi:li:T?on:V,eN=ee?c:eL(i);return mn(eN||i,function(c,E){eN&&(c=i[E=c]),se(C,E,An(c,r,l,E,i,S))}),C}function Bs(i,r,l){var E=l.length;if(null==i)return!E;for(i=ta(i);E--;){var P=l[E],S=r[P],C=i[P];if(C===c&&!(P in i)||!S(C))return!1}return!0}function Gs(i,r,E){if("function"!=typeof i)throw new tl(l);return iG(function(){i.apply(c,E)},r)}function ue(i,r,c,l){var E=-1,P=Ee,S=!0,C=i.length,R=[],A=r.length;if(!C)return R;c&&(r=G(r,hn(c))),l?(P=Dr,S=!1):r.length>=200&&(P=jt,S=!1,r=new gt(r));e:for(;++E<C;){var T=i[E],q=null==c?T:c(T);if(T=l||0!==T?T:0,S&&q==q){for(var M=A;M--;)if(r[M]===q)continue e;R.push(T)}else P(r,q,l)||R.push(T)}return R}a.templateSettings={escape:eL,evaluate:eN,interpolate:ej,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=ij(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=ij(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=function(){this.__data__=iE?iE(null):{},this.size=0},dt.prototype.delete=function(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r},dt.prototype.get=function(i){var r=this.__data__;if(iE){var l=r[i];return l===E?c:l}return ty.call(r,i)?r[i]:c},dt.prototype.has=function(i){var r=this.__data__;return iE?r[i]!==c:ty.call(r,i)},dt.prototype.set=function(i,r){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=iE&&r===c?E:r,this},Bn.prototype.clear=function(){this.__data__=[],this.size=0},Bn.prototype.delete=function(i){var r=this.__data__,c=Be(r,i);return!(c<0)&&(c==r.length-1?r.pop():tH.call(r,c,1),--this.size,!0)},Bn.prototype.get=function(i){var r=this.__data__,l=Be(r,i);return l<0?c:r[l][1]},Bn.prototype.has=function(i){return Be(this.__data__,i)>-1},Bn.prototype.set=function(i,r){var c=this.__data__,l=Be(c,i);return l<0?(++this.size,c.push([i,r])):c[l][1]=r,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new dt,map:new(im||Bn),string:new dt}},Gn.prototype.delete=function(i){var r=nr(this,i).delete(i);return this.size-=r?1:0,r},Gn.prototype.get=function(i){return nr(this,i).get(i)},Gn.prototype.has=function(i){return nr(this,i).has(i)},Gn.prototype.set=function(i,r){var c=nr(this,i),l=c.size;return c.set(i,r),this.size+=c.size==l?0:1,this},gt.prototype.add=gt.prototype.push=function(i){return this.__data__.set(i,E),this},gt.prototype.has=function(i){return this.__data__.has(i)},Rn.prototype.clear=function(){this.__data__=new Bn,this.size=0},Rn.prototype.delete=function(i){var r=this.__data__,c=r.delete(i);return this.size=r.size,c},Rn.prototype.get=function(i){return this.__data__.get(i)},Rn.prototype.has=function(i){return this.__data__.has(i)},Rn.prototype.set=function(i,r){var c=this.__data__;if(c instanceof Bn){var l=c.__data__;if(!im||l.length<199)return l.push([i,r]),this.size=++c.size,this;c=this.__data__=new Gn(l)}return c.set(i,r),this.size=c.size,this};var iT=vu($n),iq=vu(Xr,!0);function mc(i,r){var c=!0;return iT(i,function(i,l,E){return c=!!r(i,l,E)}),c}function Ge(i,r,l){for(var E=-1,P=i.length;++E<P;){var S=i[E],C=r(S);if(null!=C&&(R===c?C==C&&!pn(C):l(C,R)))var R=C,A=S}return A}function Ks(i,r){var c=[];return iT(i,function(i,l,E){r(i,l,E)&&c.push(i)}),c}function j(i,r,c,l,E){var P=-1,S=i.length;for(c||(c=ah),E||(E=[]);++P<S;){var C=i[P];r>0&&c(C)?r>1?j(C,r-1,c,l,E):nt(E,C):l||(E[E.length]=C)}return E}var iz=_u(),iD=_u(!0);function $n(i,r){return i&&iz(i,r,V)}function Xr(i,r){return i&&iD(i,r,V)}function ze(i,r){return jn(r,function(r){return Jn(i[r])})}function _t(i,r){r=st(r,i);for(var l=0,E=r.length;null!=i&&l<E;)i=i[Wn(r[l++])];return l&&l==E?i:c}function Zs(i,r,c){var l=r(i);return rN(i)?l:nt(l,c(i))}function en(i){return null==i?i===c?"[object Undefined]":"[object Null]":tB&&tB in ta(i)?function(i){var r=ty.call(i,tB),l=i[tB];try{i[tB]=c;var E=!0}catch{}var P=tw.call(i);return E&&(r?i[tB]=l:delete i[tB]),P}(i):tw.call(i)}function Qr(i,r){return i>r}function Pc(i,r){return null!=i&&ty.call(i,r)}function Ac(i,r){return null!=i&&r in ta(i)}function Vr(i,r,l){for(var E=l?Dr:Ee,P=i[0].length,S=i.length,C=S,R=e9(S),A=1/0,T=[];C--;){var q=i[C];C&&r&&(q=G(q,hn(r))),A=ih(q.length,A),R[C]=!l&&(r||P>=120&&q.length>=120)?new gt(C&&q):c}q=i[0];var M=-1,$=R[0];e:for(;++M<P&&T.length<A;){var U=q[M],J=r?r(U):U;if(U=l||0!==U?U:0,!($?jt($,J):E(T,J,l))){for(C=S;--C;){var F=R[C];if(!(F?jt(F,J):E(i[C],J,l)))continue e}$&&$.push(J),T.push(U)}}return T}function ae(i,r,l){r=st(r,i);var E=null==(i=Hu(i,r))?i:i[Wn(In(r))];return null==E?c:cn(E,i,l)}function Js(i){return Y(i)&&en(i)==A}function oe(i,r,l,E,P){return i===r||(null!=i&&null!=r&&(Y(i)||Y(r))?function(i,r,l,E,P,S){var C=rN(i),R=rN(r),U=C?T:iB(i),J=R?T:iB(r);U=U==A?X:U,J=J==A?X:J;var ee=U==X,eh=J==X,ed=U==J;if(ed&&rT(i)){if(!rT(r))return!1;C=!0,ee=!1}if(ed&&!ee)return S||(S=new Rn),C||rk(i)?Su(i,r,l,E,P,S):function(i,r,c,l,E,P,S){switch(c){case ef:if(i.byteLength!=r.byteLength||i.byteOffset!=r.byteOffset)break;i=i.buffer,r=r.buffer;case ep:return!(i.byteLength!=r.byteLength||!P(new tS(i),new tS(r)));case q:case M:case Q:return bn(+i,+r);case $:return i.name==r.name&&i.message==r.message;case et:case ec:return i==r+"";case F:var C=qr;case eo:var R=1&l;if(C||(C=Se),i.size!=r.size&&!R)break;var A=S.get(i);if(A)return A==r;l|=2,S.set(i,r);var T=Su(C(i),C(r),l,E,P,S);return S.delete(i),T;case el:if(iL)return iL.call(i)==iL.call(r)}return!1}(i,r,U,l,E,P,S);if(!(1&l)){var eg=ee&&ty.call(i,"__wrapped__"),ey=eh&&ty.call(r,"__wrapped__");if(eg||ey){var em=eg?i.value():i,e_=ey?r.value():r;return S||(S=new Rn),P(em,e_,l,E,S)}}return!!ed&&(S||(S=new Rn),function(i,r,l,E,P,S){var C=1&l,R=li(i),A=R.length;if(A!=li(r).length&&!C)return!1;for(var T=A;T--;){var q=R[T];if(!(C?q in r:ty.call(r,q)))return!1}var M=S.get(i),$=S.get(r);if(M&&$)return M==r&&$==i;var U=!0;S.set(i,r),S.set(r,i);for(var J=C;++T<A;){var F=i[q=R[T]],Q=r[q];if(E)var X=C?E(Q,F,q,r,i,S):E(F,Q,q,i,r,S);if(!(X===c?F===Q||P(F,Q,l,E,S):X)){U=!1;break}J||(J="constructor"==q)}if(U&&!J){var ee=i.constructor,et=r.constructor;ee!=et&&"constructor"in i&&"constructor"in r&&!("function"==typeof ee&&ee instanceof ee&&"function"==typeof et&&et instanceof et)&&(U=!1)}return S.delete(i),S.delete(r),U}(i,r,l,E,P,S))}(i,r,l,E,oe,P):i!=i&&r!=r)}function kr(i,r,l,E){var P=l.length,S=P,C=!E;if(null==i)return!S;for(i=ta(i);P--;){var R=l[P];if(C&&R[2]?R[1]!==i[R[0]]:!(R[0]in i))return!1}for(;++P<S;){var A=(R=l[P])[0],T=i[A],q=R[1];if(C&&R[2]){if(T===c&&!(A in i))return!1}else{var M=new Rn;if(E)var $=E(T,q,A,i,r,M);if(!($===c?oe(q,T,3,E,M):$))return!1}}return!0}function Xs(i){return!(!K(i)||t_&&t_ in i)&&(Jn(i)?tI:eQ).test(wt(i))}function Qs(i){return"function"==typeof i?i:null==i?fn:"object"==typeof i?rN(i)?js(i[0],i[1]):ks(i):ma(i)}function jr(i){if(!he(i))return ic(i);var r=[];for(var c in ta(i))ty.call(i,c)&&"constructor"!=c&&r.push(c);return r}function ni(i,r){return i<r}function Vs(i,r){var c=-1,l=an(i)?e9(i.length):[];return iT(i,function(i,E,P){l[++c]=r(i,E,P)}),l}function ks(i){var r=gi(i);return 1==r.length&&r[0][2]?Lu(r[0][0],r[0][1]):function(c){return c===i||kr(c,i,r)}}function js(i,r){var l;return _i(i)&&(l=r)==l&&!K(l)?Lu(Wn(i),r):function(l){var E=Si(l,i);return E===c&&E===r?Oi(l,i):oe(r,E,3)}}function Ke(i,r,l,E,P){i!==r&&iz(r,function(S,C){if(P||(P=new Rn),K(S))!function(i,r,l,E,P,S,C){var R=wi(i,l),A=wi(r,l),T=C.get(A);if(T){Yr(i,l,T);return}var q=S?S(R,A,l+"",i,r,C):c,M=q===c;if(M){var $=rN(A),U=!$&&rT(A),J=!$&&!U&&rk(A);q=A,$||U||J?rN(R)?q=R:Z(R)?q=un(R):U?(M=!1,q=hu(A,!0)):J?(M=!1,q=lu(A,!0)):q=[]:pe(A)||rL(A)?(q=R,rL(R)?q=oa(R):(!K(R)||Jn(R))&&(q=bu(A))):M=!1}M&&(C.set(A,q),P(q,A,E,S,C),C.delete(A)),Yr(i,l,q)}(i,r,C,l,Ke,E,P);else{var R=E?E(wi(i,C),S,C+"",i,r,P):c;R===c&&(R=S),Yr(i,C,R)}},on)}function nu(i,r){var l=i.length;if(l)return Zn(r+=r<0?l:0,l)?i[r]:c}function tu(i,r,c){r=r.length?G(r,function(i){return rN(i)?function(r){return _t(r,1===i.length?i[0]:i)}:i}):[fn];var l=-1;return r=G(r,hn(x())),function(i,r){var c=i.length;for(i.sort(r);c--;)i[c]=i[c].value;return i}(Vs(i,function(i,c,E){return{criteria:G(r,function(r){return r(i)}),index:++l,value:i}}),function(i,r){return function(i,r,c){for(var l=-1,E=i.criteria,P=r.criteria,S=E.length,C=c.length;++l<S;){var R=pu(E[l],P[l]);if(R){if(l>=C)return R;return R*("desc"==c[l]?-1:1)}}return i.index-r.index}(i,r,c)})}function eu(i,r,c){for(var l=-1,E=r.length,P={};++l<E;){var S=r[l],C=_t(i,S);c(C,S)&&fe(P,st(S,i),C)}return P}function ti(i,r,c,l){var E=l?rf:Tt,P=-1,S=r.length,C=i;for(i===r&&(r=un(r)),c&&(C=G(i,hn(c)));++P<S;)for(var R=0,A=r[P],T=c?c(A):A;(R=E(C,T,R,l))>-1;)C!==i&&tH.call(C,R,1),tH.call(i,R,1);return i}function ru(i,r){for(var c=i?r.length:0,l=c-1;c--;){var E=r[c];if(c==l||E!==P){var P=E;Zn(E)?tH.call(i,E,1):si(i,E)}}return i}function ei(i,r){return i+t7(id()*(r-i+1))}function ri(i,r){var c="";if(!i||r<1||r>9007199254740991)return c;do r%2&&(c+=i),(r=t7(r/2))&&(i+=i);while(r);return c}function L(i,r){return iF(Du(i,r,fn),i+"")}function fe(i,r,l,E){if(!K(i))return i;r=st(r,i);for(var P=-1,S=r.length,C=S-1,R=i;null!=R&&++P<S;){var A=Wn(r[P]),T=l;if("__proto__"===A||"constructor"===A||"prototype"===A)break;if(P!=C){var q=R[A];(T=E?E(q,A,R):c)===c&&(T=K(q)?q:Zn(r[P+1])?[]:{})}se(R,A,T),R=R[A]}return i}var iM=iI?function(i,r){return iI.set(i,r),i}:fn,ik=tW?function(i,r){return tW(i,"toString",{configurable:!0,enumerable:!1,value:bi(r),writable:!0})}:fn;function Cn(i,r,c){var l=-1,E=i.length;r<0&&(r=-r>E?0:E+r),(c=c>E?E:c)<0&&(c+=E),E=r>c?0:c-r>>>0,r>>>=0;for(var P=e9(E);++l<E;)P[l]=i[l+r];return P}function Mc(i,r){var c;return iT(i,function(i,l,E){return!(c=r(i,l,E))}),!!c}function Ye(i,r,c){var l=0,E=null==i?l:i.length;if("number"==typeof r&&r==r&&E<=2147483647){for(;l<E;){var P=l+E>>>1,S=i[P];null!==S&&!pn(S)&&(c?S<=r:S<r)?l=P+1:E=P}return E}return ii(i,r,fn,c)}function ii(i,r,l,E){var P=0,S=null==i?0:i.length;if(0===S)return 0;r=l(r);for(var C=r!=r,R=null===r,A=pn(r),T=r===c;P<S;){var q=t7((P+S)/2),M=l(i[q]),$=M!==c,U=null===M,J=M==M,F=pn(M);if(C)var Q=E||J;else Q=T?J&&(E||$):R?J&&$&&(E||!U):A?J&&$&&!U&&(E||!F):!U&&!F&&(E?M<=r:M<r);Q?P=q+1:S=q}return ih(S,4294967294)}function su(i,r){for(var c=-1,l=i.length,E=0,P=[];++c<l;){var S=i[c],C=r?r(S):S;if(!c||!bn(C,R)){var R=C;P[E++]=0===S?0:S}}return P}function uu(i){return"number"==typeof i?i:pn(i)?C:+i}function ln(i){if("string"==typeof i)return i;if(rN(i))return G(i,ln)+"";if(pn(i))return iN?iN.call(i):"";var r=i+"";return"0"==r&&1/i==-S?"-0":r}function it(i,r,c){var l=-1,E=Ee,P=i.length,S=!0,C=[],R=C;if(c)S=!1,E=Dr;else if(P>=200){var A=r?null:iH(i);if(A)return Se(A);S=!1,E=jt,R=new gt}else R=r?[]:C;e:for(;++l<P;){var T=i[l],q=r?r(T):T;if(T=c||0!==T?T:0,S&&q==q){for(var M=R.length;M--;)if(R[M]===q)continue e;r&&R.push(q),C.push(T)}else E(R,q,c)||(R!==C&&R.push(q),C.push(T))}return C}function si(i,r){return r=st(r,i),null==(i=Hu(i,r))||delete i[Wn(In(r))]}function au(i,r,c,l){return fe(i,r,c(_t(i,r)),l)}function Ze(i,r,c,l){for(var E=i.length,P=l?E:-1;(l?P--:++P<E)&&r(i[P],P,i););return c?Cn(i,l?0:P,l?P+1:E):Cn(i,l?P+1:0,l?E:P)}function ou(i,r){var c=i;return c instanceof H&&(c=c.value()),Hr(r,function(i,r){return r.func.apply(r.thisArg,nt([i],r.args))},c)}function ui(i,r,c){var l=i.length;if(l<2)return l?it(i[0]):[];for(var E=-1,P=e9(l);++E<l;)for(var S=i[E],C=-1;++C<l;)C!=E&&(P[E]=ue(P[E]||S,i[C],r,c));return it(j(P,1),r,c)}function fu(i,r,l){for(var E=-1,P=i.length,S=r.length,C={};++E<P;){var R=E<S?r[E]:c;l(C,i[E],R)}return C}function ai(i){return Z(i)?i:[]}function oi(i){return"function"==typeof i?i:fn}function st(i,r){return rN(i)?i:_i(i,r)?[i]:iZ(W(i))}function ut(i,r,l){var E=i.length;return l=l===c?E:l,!r&&l>=E?i:Cn(i,r,l)}var i$=tG||function(i){return tK.clearTimeout(i)};function hu(i,r){if(r)return i.slice();var c=i.length,l=tC?tC(c):new i.constructor(c);return i.copy(l),l}function fi(i){var r=new i.constructor(i.byteLength);return new tS(r).set(new tS(i)),r}function lu(i,r){var c=r?fi(i.buffer):i.buffer;return new i.constructor(c,i.byteOffset,i.length)}function pu(i,r){if(i!==r){var l=i!==c,E=null===i,P=i==i,S=pn(i),C=r!==c,R=null===r,A=r==r,T=pn(r);if(!R&&!T&&!S&&i>r||S&&C&&A&&!R&&!T||E&&C&&A||!l&&A||!P)return 1;if(!E&&!S&&!T&&i<r||T&&l&&P&&!E&&!S||R&&l&&P||!C&&P||!A)return -1}return 0}function du(i,r,c,l){for(var E=-1,P=i.length,S=c.length,C=-1,R=r.length,A=il(P-S,0),T=e9(R+A),q=!l;++C<R;)T[C]=r[C];for(;++E<S;)(q||E<P)&&(T[c[E]]=i[E]);for(;A--;)T[C++]=i[E++];return T}function gu(i,r,c,l){for(var E=-1,P=i.length,S=-1,C=c.length,R=-1,A=r.length,T=il(P-C,0),q=e9(T+A),M=!l;++E<T;)q[E]=i[E];for(var $=E;++R<A;)q[$+R]=r[R];for(;++S<C;)(M||E<P)&&(q[$+c[S]]=i[E++]);return q}function un(i,r){var c=-1,l=i.length;for(r||(r=e9(l));++c<l;)r[c]=i[c];return r}function Un(i,r,l,E){var P=!l;l||(l={});for(var S=-1,C=r.length;++S<C;){var R=r[S],A=E?E(l[R],i[R],R,l,i):c;A===c&&(A=i[R]),P?zn(l,R,A):se(l,R,A)}return l}function Je(i,r){return function(c,l){var E=rN(c)?Vo:gc,P=r?r():{};return E(c,i,x(l,2),P)}}function Ft(i){return L(function(r,l){var E=-1,P=l.length,S=P>1?l[P-1]:c,C=P>2?l[2]:c;for(S=i.length>3&&"function"==typeof S?(P--,S):c,C&&rn(l[0],l[1],C)&&(S=P<3?c:S,P=1),r=ta(r);++E<P;){var R=l[E];R&&i(r,R,E,S)}return r})}function vu(i,r){return function(c,l){if(null==c)return c;if(!an(c))return i(c,l);for(var E=c.length,P=r?E:-1,S=ta(c);(r?P--:++P<E)&&!1!==l(S[P],P,S););return c}}function _u(i){return function(r,c,l){for(var E=-1,P=ta(r),S=l(r),C=S.length;C--;){var R=S[i?C:++E];if(!1===c(P[R],R,P))break}return r}}function mu(i){return function(r){var l=Lt(r=W(r))?On(r):c,E=l?l[0]:r.charAt(0),P=l?ut(l,1).join(""):r.slice(1);return E[i]()+P}}function Mt(i){return function(r){return Hr(va(ga(r).replace(tR,"")),i,"")}}function ce(i){return function(){var r=arguments;switch(r.length){case 0:return new i;case 1:return new i(r[0]);case 2:return new i(r[0],r[1]);case 3:return new i(r[0],r[1],r[2]);case 4:return new i(r[0],r[1],r[2],r[3]);case 5:return new i(r[0],r[1],r[2],r[3],r[4]);case 6:return new i(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new i(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var c=ij(i.prototype),l=i.apply(c,r);return K(l)?l:c}}function wu(i){return function(r,l,E){var P=ta(r);if(!an(r)){var S=x(l,3);r=V(r),l=function(i){return S(P[i],i,P)}}var C=i(r,l,E);return C>-1?P[S?r[C]:C]:c}}function Pu(i){return Yn(function(r){var E=r.length,P=E,S=Pn.prototype.thru;for(i&&r.reverse();P--;){var C=r[P];if("function"!=typeof C)throw new tl(l);if(S&&!R&&"wrapper"==je(C))var R=new Pn([],!0)}for(P=R?P:E;++P<E;){var A=je(C=r[P]),T="wrapper"==A?iU(C):c;R=T&&mi(T[0])&&424==T[1]&&!T[4].length&&1==T[9]?R[je(T[0])].apply(R,T[3]):1==C.length&&mi(C)?R[A]():R.thru(C)}return function(){var i=arguments,c=i[0];if(R&&1==i.length&&rN(c))return R.plant(c).value();for(var l=0,P=E?r[l].apply(this,i):c;++l<E;)P=r[l].call(this,P);return P}})}function Xe(i,r,l,E,P,S,C,R,A,T){var q=128&r,M=1&r,$=2&r,U=24&r,J=512&r,F=$?c:ce(i);return function y(){for(var Q=arguments.length,X=e9(Q),ee=Q;ee--;)X[ee]=arguments[ee];if(U)var et=qt(y),eo=function(i,r){for(var c=i.length,l=0;c--;)i[c]===r&&++l;return l}(X,et);if(E&&(X=du(X,E,P,U)),S&&(X=gu(X,S,C,U)),Q-=eo,U&&Q<T){var ec=tt(X,et);return Iu(i,r,Xe,y.placeholder,l,X,ec,R,A,T-Q)}var el=M?l:this,eh=$?el[i]:i;return Q=X.length,R?X=function(i,r){for(var l=i.length,E=ih(r.length,l),P=un(i);E--;){var S=r[E];i[E]=Zn(S,l)?P[S]:c}return i}(X,R):J&&Q>1&&X.reverse(),q&&A<Q&&(X.length=A),this&&this!==tK&&this instanceof y&&(eh=F||ce(eh)),eh.apply(el,X)}}function Au(i,r){return function(c,l){var E,P;return E=r(l),P={},$n(c,function(r,c,l){i(P,E(r),c,l)}),P}}function Qe(i,r){return function(l,E){var P;if(l===c&&E===c)return r;if(l!==c&&(P=l),E!==c){if(P===c)return E;"string"==typeof l||"string"==typeof E?(l=ln(l),E=ln(E)):(l=uu(l),E=uu(E)),P=i(l,E)}return P}}function ci(i){return Yn(function(r){return r=G(r,hn(x())),L(function(c){var l=this;return i(r,function(i){return cn(i,l,c)})})})}function Ve(i,r){var l=(r=r===c?" ":ln(r)).length;if(l<2)return l?ri(r,i):r;var E=ri(r,t4(i/Dt(r)));return Lt(r)?ut(On(E),0,i).join(""):E.slice(0,i)}function Cu(i){return function(r,l,E){return E&&"number"!=typeof E&&rn(r,l,E)&&(l=E=c),r=Xn(r),l===c?(l=r,r=0):l=Xn(l),E=E===c?r<l?1:-1:Xn(E),function(i,r,c,l){for(var E=-1,P=il(t4((r-i)/(c||1)),0),S=e9(P);P--;)S[l?P:++E]=i,i+=c;return S}(r,l,E,i)}}function ke(i){return function(r,c){return"string"==typeof r&&"string"==typeof c||(r=xn(r),c=xn(c)),i(r,c)}}function Iu(i,r,l,E,P,S,C,R,A,T){var q=8&r,M=q?C:c,$=q?c:C,U=q?S:c,J=q?c:S;r|=q?32:64,4&(r&=~(q?64:32))||(r&=-4);var F=[i,r,P,U,M,J,$,R,A,T],Q=l.apply(c,F);return mi(i)&&iW(Q,F),Q.placeholder=E,$u(Q,i,r)}function hi(i){var r=tn[i];return function(i,c){if(i=xn(i),(c=null==c?0:ih(b(c),292))&&ir(i)){var l=(W(i)+"e").split("e");return+((l=(W(r(l[0]+"e"+(+l[1]+c)))+"e").split("e"))[0]+"e"+(+l[1]-c))}return r(i)}}var iH=iw&&1/Se(new iw([,-0]))[1]==S?function(i){return new iw(i)}:Di;function xu(i){return function(r){var c,l,E=iB(r);return E==F?qr(r):E==eo?(c=-1,l=Array(r.size),r.forEach(function(i){l[++c]=[i,i]}),l):G(i(r),function(i){return[i,r[i]]})}}function Kn(i,r,E,S,C,R,A,T){var q=2&r;if(!q&&"function"!=typeof i)throw new tl(l);var M=S?S.length:0;if(M||(r&=-97,S=C=c),A=A===c?A:il(b(A),0),T=T===c?T:b(T),M-=C?C.length:0,64&r){var $=S,U=C;S=C=c}var J=q?c:iU(i),F=[i,r,E,S,C,$,U,R,A,T];if(J&&function(i,r){var c=i[1],l=r[1],E=c|l,S=E<131,C=128==l&&8==c||128==l&&256==c&&i[7].length<=r[8]||384==l&&r[7].length<=r[8]&&8==c;if(S||C){1&l&&(i[2]=r[2],E|=1&c?0:4);var R=r[3];if(R){var A=i[3];i[3]=A?du(A,R,r[4]):R,i[4]=A?tt(i[3],P):r[4]}(R=r[5])&&(A=i[5],i[5]=A?gu(A,R,r[6]):R,i[6]=A?tt(i[5],P):r[6]),(R=r[7])&&(i[7]=R),128&l&&(i[8]=null==i[8]?r[8]:ih(i[8],r[8])),null==i[9]&&(i[9]=r[9]),i[0]=r[0],i[1]=E}}(F,J),i=F[0],r=F[1],E=F[2],S=F[3],C=F[4],(T=F[9]=F[9]===c?q?0:i.length:il(F[9]-M,0))||!(24&r)||(r&=-25),r&&1!=r)8==r||16==r?(Q=i,X=r,ee=T,et=ce(Q),ew=function s(){for(var i=arguments.length,r=e9(i),l=i,E=qt(s);l--;)r[l]=arguments[l];var P=i<3&&r[0]!==E&&r[i-1]!==E?[]:tt(r,E);return(i-=P.length)<ee?Iu(Q,X,Xe,s.placeholder,c,r,P,c,c,ee-i):cn(this&&this!==tK&&this instanceof s?et:Q,this,r)}):32!=r&&33!=r||C.length?ew=Xe.apply(c,F):(eo=i,ec=r,el=E,eh=S,ep=1&ec,ef=ce(eo),ew=function f(){for(var i=-1,r=arguments.length,c=-1,l=eh.length,E=e9(l+r),P=this&&this!==tK&&this instanceof f?ef:eo;++c<l;)E[c]=eh[c];for(;r--;)E[c++]=arguments[++i];return cn(P,ep?el:this,E)});else var Q,X,ee,et,eo,ec,el,eh,ep,ef,ed,eg,ey,em,e_,ew=(ed=i,eg=r,ey=E,em=1&eg,e_=ce(ed),function o(){return(this&&this!==tK&&this instanceof o?e_:ed).apply(em?ey:this,arguments)});return $u((J?iM:iW)(ew,F),i,r)}function Eu(i,r,l,E){return i===c||bn(i,tf[l])&&!ty.call(E,l)?r:i}function yu(i,r,l,E,P,S){return K(i)&&K(r)&&(S.set(r,i),Ke(i,r,c,yu,S),S.delete(r)),i}function kc(i){return pe(i)?c:i}function Su(i,r,l,E,P,S){var C=1&l,R=i.length,A=r.length;if(R!=A&&!(C&&A>R))return!1;var T=S.get(i),q=S.get(r);if(T&&q)return T==r&&q==i;var M=-1,$=!0,U=2&l?new gt:c;for(S.set(i,r),S.set(r,i);++M<R;){var J=i[M],F=r[M];if(E)var Q=C?E(F,J,M,r,i,S):E(J,F,M,i,r,S);if(Q!==c){if(Q)continue;$=!1;break}if(U){if(!Nr(r,function(i,r){if(!jt(U,r)&&(J===i||P(J,i,l,E,S)))return U.push(r)})){$=!1;break}}else if(!(J===F||P(J,F,l,E,S))){$=!1;break}}return S.delete(i),S.delete(r),$}function Yn(i){return iF(Du(i,c,Bu),i+"")}function li(i){return Zs(i,V,iK)}function pi(i){return Zs(i,on,iV)}var iU=iI?function(i){return iI.get(i)}:Di;function je(i){for(var r=i.name+"",c=ix[r],l=ty.call(ix,r)?c.length:0;l--;){var E=c[l],P=E.func;if(null==P||P==i)return E.name}return r}function qt(i){return(ty.call(a,"placeholder")?a:i).placeholder}function x(){var i=a.iteratee||Ti;return i=i===Ti?Qs:i,arguments.length?i(arguments[0],arguments[1]):i}function nr(i,r){var c,l=i.__data__;return("string"==(c=typeof r)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==r:null===r)?l["string"==typeof r?"string":"hash"]:l.map}function gi(i){for(var r=V(i),c=r.length;c--;){var l=r[c],E=i[l];r[c]=[l,E,E==E&&!K(E)]}return r}function mt(i,r){var l=null==i?c:i[r];return Xs(l)?l:c}var iK=t8?function(i){return null==i?[]:jn(t8(i=ta(i)),function(r){return tM.call(i,r)})}:Hi,iV=t8?function(i){for(var r=[];i;)nt(r,iK(i)),i=tA(i);return r}:Hi,iB=en;function Ru(i,r,c){r=st(r,i);for(var l=-1,E=r.length,P=!1;++l<E;){var S=Wn(r[l]);if(!(P=null!=i&&c(i,S)))break;i=i[S]}return P||++l!=E?P:!!(E=null==i?0:i.length)&&ar(E)&&Zn(S,E)&&(rN(i)||rL(i))}function bu(i){return"function"!=typeof i.constructor||he(i)?{}:ij(tA(i))}function ah(i){return rN(i)||rL(i)||!!(tU&&i&&i[tU])}function Zn(i,r){var c=typeof i;return!!(r=r??9007199254740991)&&("number"==c||"symbol"!=c&&e0.test(i))&&i>-1&&i%1==0&&i<r}function rn(i,r,c){if(!K(c))return!1;var l=typeof r;return("number"==l?!!(an(c)&&Zn(r,c.length)):"string"==l&&r in c)&&bn(c[r],i)}function _i(i,r){if(rN(i))return!1;var c=typeof i;return!!("number"==c||"symbol"==c||"boolean"==c||null==i||pn(i))||ez.test(i)||!eT.test(i)||null!=r&&i in ta(r)}function mi(i){var r=je(i),c=a[r];if("function"!=typeof c||!(r in H.prototype))return!1;if(i===c)return!0;var l=iU(c);return!!l&&i===l[0]}(iy&&iB(new iy(new ArrayBuffer(1)))!=ef||im&&iB(new im)!=F||i_&&iB(i_.resolve())!=ee||iw&&iB(new iw)!=eo||ib&&iB(new ib)!=eh)&&(iB=function(i){var r=en(i),l=r==X?i.constructor:c,E=l?wt(l):"";if(E)switch(E){case iP:return ef;case iS:return F;case iC:return ee;case iR:return eo;case iO:return eh}return r});var iJ=td?Jn:Ni;function he(i){var r=i&&i.constructor;return i===("function"==typeof r&&r.prototype||tf)}function Lu(i,r){return function(l){return null!=l&&l[i]===r&&(r!==c||i in ta(l))}}function Du(i,r,l){return r=il(r===c?i.length-1:r,0),function(){for(var c=arguments,E=-1,P=il(c.length-r,0),S=e9(P);++E<P;)S[E]=c[r+E];E=-1;for(var C=e9(r+1);++E<r;)C[E]=c[E];return C[r]=l(S),cn(i,this,C)}}function Hu(i,r){return r.length<2?i:_t(i,Cn(r,0,-1))}function wi(i,r){if(!("constructor"===r&&"function"==typeof i[r])&&"__proto__"!=r)return i[r]}var iW=Uu(iM),iG=t9||function(i,r){return tK.setTimeout(i,r)},iF=Uu(ik);function $u(i,r,c){var l,E,P=r+"";return iF(i,function(i,r){var c=r.length;if(!c)return i;var l=c-1;return r[l]=(c>1?"& ":"")+r[l],r=r.join(c>2?", ":" "),i.replace(eU,`{
/* [wrapped with `+r+`] */
`)}(P,(l=(E=P.match(eK))?E[1].split(eV):[],mn(R,function(i){var r="_."+i[0];c&i[1]&&!Ee(l,r)&&l.push(r)}),l.sort())))}function Uu(i){var r=0,l=0;return function(){var E=iu(),P=16-(E-l);if(l=E,P>0){if(++r>=800)return arguments[0]}else r=0;return i.apply(c,arguments)}}function tr(i,r){var l=-1,E=i.length,P=E-1;for(r=r===c?E:r;++l<r;){var S=ei(l,P),C=i[S];i[S]=i[l],i[l]=C}return i.length=r,i}var iZ=(e2=(eH=sr(function(i){var r=[];return 46===i.charCodeAt(0)&&r.push(""),i.replace(eD,function(i,c,l,E){r.push(l?E.replace(eW,"$1"):c||i)}),r},function(i){return 500===e2.size&&e2.clear(),i})).cache,eH);function Wn(i){if("string"==typeof i||pn(i))return i;var r=i+"";return"0"==r&&1/i==-S?"-0":r}function wt(i){if(null!=i){try{return tg.call(i)}catch{}try{return i+""}catch{}}return""}function Fu(i){if(i instanceof H)return i.clone();var r=new Pn(i.__wrapped__,i.__chain__);return r.__actions__=un(i.__actions__),r.__index__=i.__index__,r.__values__=i.__values__,r}var iY=L(function(i,r){return Z(i)?ue(i,j(r,1,Z,!0)):[]}),iQ=L(function(i,r){var l=In(r);return Z(l)&&(l=c),Z(i)?ue(i,j(r,1,Z,!0),x(l,2)):[]}),iX=L(function(i,r){var l=In(r);return Z(l)&&(l=c),Z(i)?ue(i,j(r,1,Z,!0),c,l):[]});function Mu(i,r,c){var l=null==i?0:i.length;if(!l)return -1;var E=null==c?0:b(c);return E<0&&(E=il(l+E,0)),ye(i,x(r,3),E)}function qu(i,r,l){var E=null==i?0:i.length;if(!E)return -1;var P=E-1;return l!==c&&(P=b(l),P=l<0?il(E+P,0):ih(P,E-1)),ye(i,x(r,3),P,!0)}function Bu(i){return(null==i?0:i.length)?j(i,1):[]}function Gu(i){return i&&i.length?i[0]:c}var i0=L(function(i){var r=G(i,ai);return r.length&&r[0]===i[0]?Vr(r):[]}),i1=L(function(i){var r=In(i),l=G(i,ai);return r===In(l)?r=c:l.pop(),l.length&&l[0]===i[0]?Vr(l,x(r,2)):[]}),i5=L(function(i){var r=In(i),l=G(i,ai);return(r="function"==typeof r?r:c)&&l.pop(),l.length&&l[0]===i[0]?Vr(l,c,r):[]});function In(i){var r=null==i?0:i.length;return r?i[r-1]:c}var i6=L(zu);function zu(i,r){return i&&i.length&&r&&r.length?ti(i,r):i}var i2=Yn(function(i,r){var c=null==i?0:i.length,l=Zr(i,r);return ru(i,G(r,function(i){return Zn(i,c)?+i:i}).sort(pu)),l});function Ai(i){return null==i?i:ig.call(i)}var i3=L(function(i){return it(j(i,1,Z,!0))}),i9=L(function(i){var r=In(i);return Z(r)&&(r=c),it(j(i,1,Z,!0),x(r,2))}),i4=L(function(i){var r=In(i);return r="function"==typeof r?r:c,it(j(i,1,Z,!0),c,r)});function Ci(i){if(!(i&&i.length))return[];var r=0;return i=jn(i,function(i){if(Z(i))return r=il(i.length,r),!0}),Fr(r,function(r){return G(i,$r(r))})}function Ku(i,r){if(!(i&&i.length))return[];var l=Ci(i);return null==r?l:G(l,function(i){return cn(r,c,i)})}var i7=L(function(i,r){return Z(i)?ue(i,r):[]}),i8=L(function(i){return ui(jn(i,Z))}),re=L(function(i){var r=In(i);return Z(r)&&(r=c),ui(jn(i,Z),x(r,2))}),rt=L(function(i){var r=In(i);return r="function"==typeof r?r:c,ui(jn(i,Z),c,r)}),ra=L(Ci),ro=L(function(i){var r=i.length,l=r>1?i[r-1]:c;return l="function"==typeof l?(i.pop(),l):c,Ku(i,l)});function Yu(i){var r=a(i);return r.__chain__=!0,r}function er(i,r){return r(i)}var rc=Yn(function(i){var r=i.length,l=r?i[0]:0,E=this.__wrapped__,s=function(r){return Zr(r,i)};return!(r>1)&&!this.__actions__.length&&E instanceof H&&Zn(l)?((E=E.slice(l,+l+(r?1:0))).__actions__.push({func:er,args:[s],thisArg:c}),new Pn(E,this.__chain__).thru(function(i){return r&&!i.length&&i.push(c),i})):this.thru(s)}),rl=Je(function(i,r,c){ty.call(i,c)?++i[c]:zn(i,c,1)}),rh=wu(Mu),rp=wu(qu);function Zu(i,r){return(rN(i)?mn:iT)(i,x(r,3))}function Ju(i,r){return(rN(i)?function(i,r){for(var c=null==i?0:i.length;c--&&!1!==r(i[c],c,i););return i}:iq)(i,x(r,3))}var rd=Je(function(i,r,c){ty.call(i,c)?i[c].push(r):zn(i,c,[r])}),rg=L(function(i,r,c){var l=-1,E="function"==typeof r,P=an(i)?e9(i.length):[];return iT(i,function(i){P[++l]=E?cn(r,i,c):ae(i,r,c)}),P}),ry=Je(function(i,r,c){zn(i,c,r)});function rr(i,r){return(rN(i)?G:Vs)(i,x(r,3))}var rm=Je(function(i,r,c){i[c?0:1].push(r)},function(){return[[],[]]}),r_=L(function(i,r){if(null==i)return[];var c=r.length;return c>1&&rn(i,r[0],r[1])?r=[]:c>2&&rn(r[0],r[1],r[2])&&(r=[r[0]]),tu(i,j(r,1),[])}),rw=t1||function(){return tK.Date.now()};function Xu(i,r,l){return r=l?c:r,r=i&&null==r?i.length:r,Kn(i,128,c,c,c,c,r)}function Qu(i,r){var E;if("function"!=typeof r)throw new tl(l);return i=b(i),function(){return--i>0&&(E=r.apply(this,arguments)),i<=1&&(r=c),E}}var rb=L(function(i,r,c){var l=1;if(c.length){var E=tt(c,qt(rb));l|=32}return Kn(i,l,r,c,E)}),rE=L(function(i,r,c){var l=3;if(c.length){var E=tt(c,qt(rE));l|=32}return Kn(r,l,i,c,E)});function na(i,r,E){var P,S,C,R,A,T,q=0,M=!1,$=!1,U=!0;if("function"!=typeof i)throw new tl(l);function I(r){var l=P,E=S;return P=S=c,q=r,R=i.apply(E,l)}function y(i){var l=i-T,E=i-q;return T===c||l>=r||l<0||$&&E>=C}function D(){var i,c,l,E=rw();if(y(E))return N(E);A=iG(D,(i=E-T,c=E-q,l=r-i,$?ih(l,C-c):l))}function N(i){return A=c,U&&P?I(i):(P=S=c,R)}function gn(){var i,l=rw(),E=y(l);if(P=arguments,S=this,T=l,E){if(A===c)return q=i=T,A=iG(D,r),M?I(i):R;if($)return i$(A),A=iG(D,r),I(T)}return A===c&&(A=iG(D,r)),R}return r=xn(r)||0,K(E)&&(M=!!E.leading,C=($="maxWait"in E)?il(xn(E.maxWait)||0,r):C,U="trailing"in E?!!E.trailing:U),gn.cancel=function(){A!==c&&i$(A),q=0,P=T=S=A=c},gn.flush=function(){return A===c?R:N(rw())},gn}var rI=L(function(i,r){return Gs(i,1,r)}),rx=L(function(i,r,c){return Gs(i,xn(r)||0,c)});function sr(i,r){if("function"!=typeof i||null!=r&&"function"!=typeof r)throw new tl(l);var e=function(){var c=arguments,l=r?r.apply(this,c):c[0],E=e.cache;if(E.has(l))return E.get(l);var P=i.apply(this,c);return e.cache=E.set(l,P)||E,P};return e.cache=new(sr.Cache||Gn),e}function ur(i){if("function"!=typeof i)throw new tl(l);return function(){var r=arguments;switch(r.length){case 0:return!i.call(this);case 1:return!i.call(this,r[0]);case 2:return!i.call(this,r[0],r[1]);case 3:return!i.call(this,r[0],r[1],r[2])}return!i.apply(this,r)}}sr.Cache=Gn;var rP=L(function(i,r){var c=(r=1==r.length&&rN(r[0])?G(r[0],hn(x())):G(j(r,1),hn(x()))).length;return L(function(l){for(var E=-1,P=ih(l.length,c);++E<P;)l[E]=r[E].call(this,l[E]);return cn(i,this,l)})}),rS=L(function(i,r){var l=tt(r,qt(rS));return Kn(i,32,c,r,l)}),rC=L(function(i,r){var l=tt(r,qt(rC));return Kn(i,64,c,r,l)}),rR=Yn(function(i,r){return Kn(i,256,c,c,c,r)});function bn(i,r){return i===r||i!=i&&r!=r}var rO=ke(Qr),rA=ke(function(i,r){return i>=r}),rL=Js(function(){return arguments}())?Js:function(i){return Y(i)&&ty.call(i,"callee")&&!tM.call(i,"callee")},rN=e9.isArray,rj=tF?hn(tF):function(i){return Y(i)&&en(i)==ep};function an(i){return null!=i&&ar(i.length)&&!Jn(i)}function Z(i){return Y(i)&&an(i)}var rT=ie||Ni,rq=tZ?hn(tZ):function(i){return Y(i)&&en(i)==M};function Ei(i){if(!Y(i))return!1;var r=en(i);return r==$||"[object DOMException]"==r||"string"==typeof i.message&&"string"==typeof i.name&&!pe(i)}function Jn(i){if(!K(i))return!1;var r=en(i);return r==U||r==J||"[object AsyncFunction]"==r||"[object Proxy]"==r}function ea(i){return"number"==typeof i&&i==b(i)}function ar(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function K(i){var r=typeof i;return null!=i&&("object"==r||"function"==r)}function Y(i){return null!=i&&"object"==typeof i}var rz=tY?hn(tY):function(i){return Y(i)&&iB(i)==F};function ia(i){return"number"==typeof i||Y(i)&&en(i)==Q}function pe(i){if(!Y(i)||en(i)!=X)return!1;var r=tA(i);if(null===r)return!0;var c=ty.call(r,"constructor")&&r.constructor;return"function"==typeof c&&c instanceof c&&tg.call(c)==tb}var rD=tQ?hn(tQ):function(i){return Y(i)&&en(i)==et},rM=tX?hn(tX):function(i){return Y(i)&&iB(i)==eo};function or(i){return"string"==typeof i||!rN(i)&&Y(i)&&en(i)==ec}function pn(i){return"symbol"==typeof i||Y(i)&&en(i)==el}var rk=t0?hn(t0):function(i){return Y(i)&&ar(i.length)&&!!tz[en(i)]},r$=ke(ni),rH=ke(function(i,r){return i<=r});function ua(i){if(!i)return[];if(an(i))return or(i)?On(i):un(i);if(tV&&i[tV])return function(i){for(var r,c=[];!(r=i.next()).done;)c.push(r.value);return c}(i[tV]());var r=iB(i);return(r==F?qr:r==eo?Se:Gt)(i)}function Xn(i){return i?(i=xn(i))===S||i===-S?(i<0?-1:1)*17976931348623157e292:i==i?i:0:0===i?i:0}function b(i){var r=Xn(i),c=r%1;return r==r?c?r-c:r:0}function aa(i){return i?vt(b(i),0,4294967295):0}function xn(i){if("number"==typeof i)return i;if(pn(i))return C;if(K(i)){var r="function"==typeof i.valueOf?i.valueOf():i;i=K(r)?r+"":r}if("string"!=typeof i)return 0===i?i:+i;i=ys(i);var c=eY.test(i);return c||eX.test(i)?t$(i.slice(2),c?2:8):eZ.test(i)?C:+i}function oa(i){return Un(i,on(i))}function W(i){return null==i?"":ln(i)}var rU=Ft(function(i,r){if(he(r)||an(r)){Un(r,V(r),i);return}for(var c in r)ty.call(r,c)&&se(i,c,r[c])}),rK=Ft(function(i,r){Un(r,on(r),i)}),rV=Ft(function(i,r,c,l){Un(r,on(r),i,l)}),rB=Ft(function(i,r,c,l){Un(r,V(r),i,l)}),rJ=Yn(Zr),rW=L(function(i,r){i=ta(i);var l=-1,E=r.length,P=E>2?r[2]:c;for(P&&rn(r[0],r[1],P)&&(E=1);++l<E;)for(var S=r[l],C=on(S),R=-1,A=C.length;++R<A;){var T=C[R],q=i[T];(q===c||bn(q,tf[T])&&!ty.call(i,T))&&(i[T]=S[T])}return i}),rG=L(function(i){return i.push(c,yu),cn(rX,c,i)});function Si(i,r,l){var E=null==i?c:_t(i,r);return E===c?l:E}function Oi(i,r){return null!=i&&Ru(i,r,Ac)}var rF=Au(function(i,r,c){null!=r&&"function"!=typeof r.toString&&(r=tw.call(r)),i[r]=c},bi(fn)),rZ=Au(function(i,r,c){null!=r&&"function"!=typeof r.toString&&(r=tw.call(r)),ty.call(i,r)?i[r].push(c):i[r]=[c]},x),rY=L(ae);function V(i){return an(i)?Fs(i):jr(i)}function on(i){return an(i)?Fs(i,!0):function(i){if(!K(i))return function(i){var r=[];if(null!=i)for(var c in ta(i))r.push(c);return r}(i);var r=he(i),c=[];for(var l in i)"constructor"==l&&(r||!ty.call(i,l))||c.push(l);return c}(i)}var rQ=Ft(function(i,r,c){Ke(i,r,c)}),rX=Ft(function(i,r,c,l){Ke(i,r,c,l)}),r0=Yn(function(i,r){var c={};if(null==i)return c;var l=!1;r=G(r,function(r){return r=st(r,i),l||(l=r.length>1),r}),Un(i,pi(i),c),l&&(c=An(c,7,kc));for(var E=r.length;E--;)si(c,r[E]);return c}),r1=Yn(function(i,r){return null==i?{}:eu(i,r,function(r,c){return Oi(i,c)})});function ha(i,r){if(null==i)return{};var c=G(pi(i),function(i){return[i]});return r=x(r),eu(i,c,function(i,c){return r(i,c[0])})}var r5=xu(V),r6=xu(on);function Gt(i){return null==i?[]:Mr(i,V(i))}var r2=Mt(function(i,r,c){return r=r.toLowerCase(),i+(c?da(r):r)});function da(i){return nn(W(i).toLowerCase())}function ga(i){return(i=W(i))&&i.replace(e1,t5).replace(tO,"")}var r3=Mt(function(i,r,c){return i+(c?"-":"")+r.toLowerCase()}),r9=Mt(function(i,r,c){return i+(c?" ":"")+r.toLowerCase()}),r4=mu("toLowerCase"),r7=Mt(function(i,r,c){return i+(c?"_":"")+r.toLowerCase()}),r8=Mt(function(i,r,c){return i+(c?" ":"")+nn(r)}),ne=Mt(function(i,r,c){return i+(c?" ":"")+r.toUpperCase()}),nn=mu("toUpperCase");function va(i,r,l){var E;return i=W(i),(r=l?c:r)===c?(E=i,tj.test(E))?i.match(tL)||[]:i.match(eB)||[]:i.match(r)||[]}var ns=L(function(i,r){try{return cn(i,c,r)}catch(i){return Ei(i)?i:new e7(i)}}),no=Yn(function(i,r){return mn(r,function(r){zn(i,r=Wn(r),rb(i[r],i))}),i});function bi(i){return function(){return i}}var nc=Pu(),nl=Pu(!0);function fn(i){return i}function Ti(i){return Qs("function"==typeof i?i:An(i,1))}var nh=L(function(i,r){return function(c){return ae(c,i,r)}}),np=L(function(i,r){return function(c){return ae(i,c,r)}});function Li(i,r,c){var l=V(r),E=ze(r,l);null!=c||K(r)&&(E.length||!l.length)||(c=r,r=i,i=this,E=ze(r,V(r)));var P=!(K(c)&&"chain"in c)||!!c.chain,S=Jn(i);return mn(E,function(c){var l=r[c];i[c]=l,S&&(i.prototype[c]=function(){var r=this.__chain__;if(P||r){var c=i(this.__wrapped__);return(c.__actions__=un(this.__actions__)).push({func:l,args:arguments,thisArg:i}),c.__chain__=r,c}return l.apply(i,nt([this.value()],arguments))})}),i}function Di(){}var nf=ci(G),nd=ci(As),ng=ci(Nr);function ma(i){return _i(i)?$r(Wn(i)):function(r){return _t(r,i)}}var ny=Cu(),nm=Cu(!0);function Hi(){return[]}function Ni(){return!1}var n_=Qe(function(i,r){return i+r},0),nw=hi("ceil"),nb=Qe(function(i,r){return i/r},1),nE=hi("floor"),nI=Qe(function(i,r){return i*r},1),nx=hi("round"),nP=Qe(function(i,r){return i-r},0);return a.after=function(i,r){if("function"!=typeof r)throw new tl(l);return i=b(i),function(){if(--i<1)return r.apply(this,arguments)}},a.ary=Xu,a.assign=rU,a.assignIn=rK,a.assignInWith=rV,a.assignWith=rB,a.at=rJ,a.before=Qu,a.bind=rb,a.bindAll=no,a.bindKey=rE,a.castArray=function(){if(!arguments.length)return[];var i=arguments[0];return rN(i)?i:[i]},a.chain=Yu,a.chunk=function(i,r,l){r=(l?rn(i,r,l):r===c)?1:il(b(r),0);var E=null==i?0:i.length;if(!E||r<1)return[];for(var P=0,S=0,C=e9(t4(E/r));P<E;)C[S++]=Cn(i,P,P+=r);return C},a.compact=function(i){for(var r=-1,c=null==i?0:i.length,l=0,E=[];++r<c;){var P=i[r];P&&(E[l++]=P)}return E},a.concat=function(){var i=arguments.length;if(!i)return[];for(var r=e9(i-1),c=arguments[0],l=i;l--;)r[l-1]=arguments[l];return nt(rN(c)?un(c):[c],j(r,1))},a.cond=function(i){var r=null==i?0:i.length,c=x();return i=r?G(i,function(i){if("function"!=typeof i[1])throw new tl(l);return[c(i[0]),i[1]]}):[],L(function(c){for(var l=-1;++l<r;){var E=i[l];if(cn(E[0],this,c))return cn(E[1],this,c)}})},a.conforms=function(i){var r,c;return c=V(r=An(i,1)),function(i){return Bs(i,r,c)}},a.constant=bi,a.countBy=rl,a.create=function(i,r){var c=ij(i);return null==r?c:qs(c,r)},a.curry=function ku(i,r,l){r=l?c:r;var E=Kn(i,8,c,c,c,c,c,r);return E.placeholder=ku.placeholder,E},a.curryRight=function ju(i,r,l){r=l?c:r;var E=Kn(i,16,c,c,c,c,c,r);return E.placeholder=ju.placeholder,E},a.debounce=na,a.defaults=rW,a.defaultsDeep=rG,a.defer=rI,a.delay=rx,a.difference=iY,a.differenceBy=iQ,a.differenceWith=iX,a.drop=function(i,r,l){var E=null==i?0:i.length;return E?Cn(i,(r=l||r===c?1:b(r))<0?0:r,E):[]},a.dropRight=function(i,r,l){var E=null==i?0:i.length;return E?Cn(i,0,(r=E-(r=l||r===c?1:b(r)))<0?0:r):[]},a.dropRightWhile=function(i,r){return i&&i.length?Ze(i,x(r,3),!0,!0):[]},a.dropWhile=function(i,r){return i&&i.length?Ze(i,x(r,3),!0):[]},a.fill=function(i,r,l,E){var P=null==i?0:i.length;return P?(l&&"number"!=typeof l&&rn(i,r,l)&&(l=0,E=P),function(i,r,l,E){var P=i.length;for((l=b(l))<0&&(l=-l>P?0:P+l),(E=E===c||E>P?P:b(E))<0&&(E+=P),E=l>E?0:aa(E);l<E;)i[l++]=r;return i}(i,r,l,E)):[]},a.filter=function(i,r){return(rN(i)?jn:Ks)(i,x(r,3))},a.flatMap=function(i,r){return j(rr(i,r),1)},a.flatMapDeep=function(i,r){return j(rr(i,r),S)},a.flatMapDepth=function(i,r,l){return l=l===c?1:b(l),j(rr(i,r),l)},a.flatten=Bu,a.flattenDeep=function(i){return(null==i?0:i.length)?j(i,S):[]},a.flattenDepth=function(i,r){return(null==i?0:i.length)?j(i,r=r===c?1:b(r)):[]},a.flip=function(i){return Kn(i,512)},a.flow=nc,a.flowRight=nl,a.fromPairs=function(i){for(var r=-1,c=null==i?0:i.length,l={};++r<c;){var E=i[r];l[E[0]]=E[1]}return l},a.functions=function(i){return null==i?[]:ze(i,V(i))},a.functionsIn=function(i){return null==i?[]:ze(i,on(i))},a.groupBy=rd,a.initial=function(i){return(null==i?0:i.length)?Cn(i,0,-1):[]},a.intersection=i0,a.intersectionBy=i1,a.intersectionWith=i5,a.invert=rF,a.invertBy=rZ,a.invokeMap=rg,a.iteratee=Ti,a.keyBy=ry,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=function(i,r){var c={};return r=x(r,3),$n(i,function(i,l,E){zn(c,r(i,l,E),i)}),c},a.mapValues=function(i,r){var c={};return r=x(r,3),$n(i,function(i,l,E){zn(c,l,r(i,l,E))}),c},a.matches=function(i){return ks(An(i,1))},a.matchesProperty=function(i,r){return js(i,An(r,1))},a.memoize=sr,a.merge=rQ,a.mergeWith=rX,a.method=nh,a.methodOf=np,a.mixin=Li,a.negate=ur,a.nthArg=function(i){return i=b(i),L(function(r){return nu(r,i)})},a.omit=r0,a.omitBy=function(i,r){return ha(i,ur(x(r)))},a.once=function(i){return Qu(2,i)},a.orderBy=function(i,r,l,E){return null==i?[]:(rN(r)||(r=null==r?[]:[r]),rN(l=E?c:l)||(l=null==l?[]:[l]),tu(i,r,l))},a.over=nf,a.overArgs=rP,a.overEvery=nd,a.overSome=ng,a.partial=rS,a.partialRight=rC,a.partition=rm,a.pick=r1,a.pickBy=ha,a.property=ma,a.propertyOf=function(i){return function(r){return null==i?c:_t(i,r)}},a.pull=i6,a.pullAll=zu,a.pullAllBy=function(i,r,c){return i&&i.length&&r&&r.length?ti(i,r,x(c,2)):i},a.pullAllWith=function(i,r,l){return i&&i.length&&r&&r.length?ti(i,r,c,l):i},a.pullAt=i2,a.range=ny,a.rangeRight=nm,a.rearg=rR,a.reject=function(i,r){return(rN(i)?jn:Ks)(i,ur(x(r,3)))},a.remove=function(i,r){var c=[];if(!(i&&i.length))return c;var l=-1,E=[],P=i.length;for(r=x(r,3);++l<P;){var S=i[l];r(S,l,i)&&(c.push(S),E.push(l))}return ru(i,E),c},a.rest=function(i,r){if("function"!=typeof i)throw new tl(l);return L(i,r=r===c?r:b(r))},a.reverse=Ai,a.sampleSize=function(i,r,l){return r=(l?rn(i,r,l):r===c)?1:b(r),(rN(i)?function(i,r){return tr(un(i),vt(r,0,i.length))}:function(i,r){var c=Gt(i);return tr(c,vt(r,0,c.length))})(i,r)},a.set=function(i,r,c){return null==i?i:fe(i,r,c)},a.setWith=function(i,r,l,E){return E="function"==typeof E?E:c,null==i?i:fe(i,r,l,E)},a.shuffle=function(i){return(rN(i)?function(i){return tr(un(i))}:function(i){return tr(Gt(i))})(i)},a.slice=function(i,r,l){var E=null==i?0:i.length;return E?(l&&"number"!=typeof l&&rn(i,r,l)?(r=0,l=E):(r=null==r?0:b(r),l=l===c?E:b(l)),Cn(i,r,l)):[]},a.sortBy=r_,a.sortedUniq=function(i){return i&&i.length?su(i):[]},a.sortedUniqBy=function(i,r){return i&&i.length?su(i,x(r,2)):[]},a.split=function(i,r,l){return l&&"number"!=typeof l&&rn(i,r,l)&&(r=l=c),(l=l===c?4294967295:l>>>0)?(i=W(i))&&("string"==typeof r||null!=r&&!rD(r))&&!(r=ln(r))&&Lt(i)?ut(On(i),0,l):i.split(r,l):[]},a.spread=function(i,r){if("function"!=typeof i)throw new tl(l);return r=null==r?0:il(b(r),0),L(function(c){var l=c[r],E=ut(c,0,r);return l&&nt(E,l),cn(i,this,E)})},a.tail=function(i){var r=null==i?0:i.length;return r?Cn(i,1,r):[]},a.take=function(i,r,l){return i&&i.length?Cn(i,0,(r=l||r===c?1:b(r))<0?0:r):[]},a.takeRight=function(i,r,l){var E=null==i?0:i.length;return E?Cn(i,(r=E-(r=l||r===c?1:b(r)))<0?0:r,E):[]},a.takeRightWhile=function(i,r){return i&&i.length?Ze(i,x(r,3),!1,!0):[]},a.takeWhile=function(i,r){return i&&i.length?Ze(i,x(r,3)):[]},a.tap=function(i,r){return r(i),i},a.throttle=function(i,r,c){var E=!0,P=!0;if("function"!=typeof i)throw new tl(l);return K(c)&&(E="leading"in c?!!c.leading:E,P="trailing"in c?!!c.trailing:P),na(i,r,{leading:E,maxWait:r,trailing:P})},a.thru=er,a.toArray=ua,a.toPairs=r5,a.toPairsIn=r6,a.toPath=function(i){return rN(i)?G(i,Wn):pn(i)?[i]:un(iZ(W(i)))},a.toPlainObject=oa,a.transform=function(i,r,c){var l=rN(i),E=l||rT(i)||rk(i);if(r=x(r,4),null==c){var P=i&&i.constructor;c=E?l?new P:[]:K(i)&&Jn(P)?ij(tA(i)):{}}return(E?mn:$n)(i,function(i,l,E){return r(c,i,l,E)}),c},a.unary=function(i){return Xu(i,1)},a.union=i3,a.unionBy=i9,a.unionWith=i4,a.uniq=function(i){return i&&i.length?it(i):[]},a.uniqBy=function(i,r){return i&&i.length?it(i,x(r,2)):[]},a.uniqWith=function(i,r){return r="function"==typeof r?r:c,i&&i.length?it(i,c,r):[]},a.unset=function(i,r){return null==i||si(i,r)},a.unzip=Ci,a.unzipWith=Ku,a.update=function(i,r,c){return null==i?i:au(i,r,oi(c))},a.updateWith=function(i,r,l,E){return E="function"==typeof E?E:c,null==i?i:au(i,r,oi(l),E)},a.values=Gt,a.valuesIn=function(i){return null==i?[]:Mr(i,on(i))},a.without=i7,a.words=va,a.wrap=function(i,r){return rS(oi(r),i)},a.xor=i8,a.xorBy=re,a.xorWith=rt,a.zip=ra,a.zipObject=function(i,r){return fu(i||[],r||[],se)},a.zipObjectDeep=function(i,r){return fu(i||[],r||[],fe)},a.zipWith=ro,a.entries=r5,a.entriesIn=r6,a.extend=rK,a.extendWith=rV,Li(a,a),a.add=n_,a.attempt=ns,a.camelCase=r2,a.capitalize=da,a.ceil=nw,a.clamp=function(i,r,l){return l===c&&(l=r,r=c),l!==c&&(l=(l=xn(l))==l?l:0),r!==c&&(r=(r=xn(r))==r?r:0),vt(xn(i),r,l)},a.clone=function(i){return An(i,4)},a.cloneDeep=function(i){return An(i,5)},a.cloneDeepWith=function(i,r){return An(i,5,r="function"==typeof r?r:c)},a.cloneWith=function(i,r){return An(i,4,r="function"==typeof r?r:c)},a.conformsTo=function(i,r){return null==r||Bs(i,r,V(r))},a.deburr=ga,a.defaultTo=function(i,r){return null==i||i!=i?r:i},a.divide=nb,a.endsWith=function(i,r,l){i=W(i),r=ln(r);var E=i.length,P=l=l===c?E:vt(b(l),0,E);return(l-=r.length)>=0&&i.slice(l,P)==r},a.eq=bn,a.escape=function(i){return(i=W(i))&&eA.test(i)?i.replace(eR,t6):i},a.escapeRegExp=function(i){return(i=W(i))&&ek.test(i)?i.replace(eM,"\\$&"):i},a.every=function(i,r,l){var E=rN(i)?As:mc;return l&&rn(i,r,l)&&(r=c),E(i,x(r,3))},a.find=rh,a.findIndex=Mu,a.findKey=function(i,r){return Cs(i,x(r,3),$n)},a.findLast=rp,a.findLastIndex=qu,a.findLastKey=function(i,r){return Cs(i,x(r,3),Xr)},a.floor=nE,a.forEach=Zu,a.forEachRight=Ju,a.forIn=function(i,r){return null==i?i:iz(i,x(r,3),on)},a.forInRight=function(i,r){return null==i?i:iD(i,x(r,3),on)},a.forOwn=function(i,r){return i&&$n(i,x(r,3))},a.forOwnRight=function(i,r){return i&&Xr(i,x(r,3))},a.get=Si,a.gt=rO,a.gte=rA,a.has=function(i,r){return null!=i&&Ru(i,r,Pc)},a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=function(i,r,c,l){i=an(i)?i:Gt(i),c=c&&!l?b(c):0;var E=i.length;return c<0&&(c=il(E+c,0)),or(i)?c<=E&&i.indexOf(r,c)>-1:!!E&&Tt(i,r,c)>-1},a.indexOf=function(i,r,c){var l=null==i?0:i.length;if(!l)return -1;var E=null==c?0:b(c);return E<0&&(E=il(l+E,0)),Tt(i,r,E)},a.inRange=function(i,r,l){var E,P,S;return r=Xn(r),l===c?(l=r,r=0):l=Xn(l),(E=i=xn(i))>=ih(P=r,S=l)&&E<il(P,S)},a.invoke=rY,a.isArguments=rL,a.isArray=rN,a.isArrayBuffer=rj,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=function(i){return!0===i||!1===i||Y(i)&&en(i)==q},a.isBuffer=rT,a.isDate=rq,a.isElement=function(i){return Y(i)&&1===i.nodeType&&!pe(i)},a.isEmpty=function(i){if(null==i)return!0;if(an(i)&&(rN(i)||"string"==typeof i||"function"==typeof i.splice||rT(i)||rk(i)||rL(i)))return!i.length;var r=iB(i);if(r==F||r==eo)return!i.size;if(he(i))return!jr(i).length;for(var c in i)if(ty.call(i,c))return!1;return!0},a.isEqual=function(i,r){return oe(i,r)},a.isEqualWith=function(i,r,l){var E=(l="function"==typeof l?l:c)?l(i,r):c;return E===c?oe(i,r,c,l):!!E},a.isError=Ei,a.isFinite=function(i){return"number"==typeof i&&ir(i)},a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=rz,a.isMatch=function(i,r){return i===r||kr(i,r,gi(r))},a.isMatchWith=function(i,r,l){return l="function"==typeof l?l:c,kr(i,r,gi(r),l)},a.isNaN=function(i){return ia(i)&&i!=+i},a.isNative=function(i){if(iJ(i))throw new e7("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(i)},a.isNil=function(i){return null==i},a.isNull=function(i){return null===i},a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=rD,a.isSafeInteger=function(i){return ea(i)&&i>=-9007199254740991&&i<=9007199254740991},a.isSet=rM,a.isString=or,a.isSymbol=pn,a.isTypedArray=rk,a.isUndefined=function(i){return i===c},a.isWeakMap=function(i){return Y(i)&&iB(i)==eh},a.isWeakSet=function(i){return Y(i)&&"[object WeakSet]"==en(i)},a.join=function(i,r){return null==i?"":io.call(i,r)},a.kebabCase=r3,a.last=In,a.lastIndexOf=function(i,r,l){var E=null==i?0:i.length;if(!E)return -1;var P=E;return l!==c&&(P=(P=b(l))<0?il(E+P,0):ih(P,E-1)),r==r?function(i,r,c){for(var l=c+1;l--&&i[l]!==r;);return l}(i,r,P):ye(i,Is,P,!0)},a.lowerCase=r9,a.lowerFirst=r4,a.lt=r$,a.lte=rH,a.max=function(i){return i&&i.length?Ge(i,fn,Qr):c},a.maxBy=function(i,r){return i&&i.length?Ge(i,x(r,2),Qr):c},a.mean=function(i){return xs(i,fn)},a.meanBy=function(i,r){return xs(i,x(r,2))},a.min=function(i){return i&&i.length?Ge(i,fn,ni):c},a.minBy=function(i,r){return i&&i.length?Ge(i,x(r,2),ni):c},a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=function(){return{}},a.stubString=function(){return""},a.stubTrue=function(){return!0},a.multiply=nI,a.nth=function(i,r){return i&&i.length?nu(i,b(r)):c},a.noConflict=function(){return tK._===this&&(tK._=tE),this},a.noop=Di,a.now=rw,a.pad=function(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;if(!r||l>=r)return i;var E=(r-l)/2;return Ve(t7(E),c)+i+Ve(t4(E),c)},a.padEnd=function(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;return r&&l<r?i+Ve(r-l,c):i},a.padStart=function(i,r,c){i=W(i);var l=(r=b(r))?Dt(i):0;return r&&l<r?Ve(r-l,c)+i:i},a.parseInt=function(i,r,c){return c||null==r?r=0:r&&(r=+r),ip(W(i).replace(e$,""),r||0)},a.random=function(i,r,l){if(l&&"boolean"!=typeof l&&rn(i,r,l)&&(r=l=c),l===c&&("boolean"==typeof r?(l=r,r=c):"boolean"==typeof i&&(l=i,i=c)),i===c&&r===c?(i=0,r=1):(i=Xn(i),r===c?(r=i,i=0):r=Xn(r)),i>r){var E=i;i=r,r=E}if(l||i%1||r%1){var P=id();return ih(i+P*(r-i+tk("1e-"+((P+"").length-1))),r)}return ei(i,r)},a.reduce=function(i,r,c){var l=rN(i)?Hr:Es,E=arguments.length<3;return l(i,x(r,4),c,E,iT)},a.reduceRight=function(i,r,c){var l=rN(i)?jo:Es,E=arguments.length<3;return l(i,x(r,4),c,E,iq)},a.repeat=function(i,r,l){return r=(l?rn(i,r,l):r===c)?1:b(r),ri(W(i),r)},a.replace=function(){var i=arguments,r=W(i[0]);return i.length<3?r:r.replace(i[1],i[2])},a.result=function(i,r,l){r=st(r,i);var E=-1,P=r.length;for(P||(P=1,i=c);++E<P;){var S=null==i?c:i[Wn(r[E])];S===c&&(E=P,S=l),i=Jn(S)?S.call(i):S}return i},a.round=nx,a.runInContext=h,a.sample=function(i){return(rN(i)?Ms:function(i){return Ms(Gt(i))})(i)},a.size=function(i){if(null==i)return 0;if(an(i))return or(i)?Dt(i):i.length;var r=iB(i);return r==F||r==eo?i.size:jr(i).length},a.snakeCase=r7,a.some=function(i,r,l){var E=rN(i)?Nr:Mc;return l&&rn(i,r,l)&&(r=c),E(i,x(r,3))},a.sortedIndex=function(i,r){return Ye(i,r)},a.sortedIndexBy=function(i,r,c){return ii(i,r,x(c,2))},a.sortedIndexOf=function(i,r){var c=null==i?0:i.length;if(c){var l=Ye(i,r);if(l<c&&bn(i[l],r))return l}return -1},a.sortedLastIndex=function(i,r){return Ye(i,r,!0)},a.sortedLastIndexBy=function(i,r,c){return ii(i,r,x(c,2),!0)},a.sortedLastIndexOf=function(i,r){if(null==i?0:i.length){var c=Ye(i,r,!0)-1;if(bn(i[c],r))return c}return -1},a.startCase=r8,a.startsWith=function(i,r,c){return i=W(i),c=null==c?0:vt(b(c),0,i.length),r=ln(r),i.slice(c,c+r.length)==r},a.subtract=nP,a.sum=function(i){return i&&i.length?Wr(i,fn):0},a.sumBy=function(i,r){return i&&i.length?Wr(i,x(r,2)):0},a.template=function(i,r,l){var E=a.templateSettings;l&&rn(i,r,l)&&(r=c),i=W(i),r=rV({},r,E,Eu);var P,S,C=rV({},r.imports,E.imports,Eu),R=V(C),A=Mr(C,R),T=0,q=r.interpolate||e5,M="__p += '",$=to((r.escape||e5).source+"|"+q.source+"|"+(q===ej?eG:e5).source+"|"+(r.evaluate||e5).source+"|$","g"),U="//# sourceURL="+(ty.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tq+"]")+`
`;i.replace($,function(r,c,l,E,C,R){return l||(l=E),M+=i.slice(T,R).replace(e6,cf),c&&(P=!0,M+=`' +
__e(`+c+`) +
'`),C&&(S=!0,M+=`';
`+C+`;
__p += '`),l&&(M+=`' +
((__t = (`+l+`)) == null ? '' : __t) +
'`),T=R+r.length,r}),M+=`';
`;var J=ty.call(r,"variable")&&r.variable;if(J){if(eJ.test(J))throw new e7("Invalid `variable` option passed into `_.template`")}else M=`with (obj) {
`+M+`
}
`;M=(S?M.replace(ex,""):M).replace(eP,"$1").replace(eS,"$1;"),M="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+M+`return __p
}`;var F=ns(function(){return e8(R,U+"return "+M).apply(c,A)});if(F.source=M,Ei(F))throw F;return F},a.times=function(i,r){if((i=b(i))<1||i>9007199254740991)return[];var c=4294967295,l=ih(i,4294967295);r=x(r),i-=4294967295;for(var E=Fr(l,r);++c<i;)r(c);return E},a.toFinite=Xn,a.toInteger=b,a.toLength=aa,a.toLower=function(i){return W(i).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function(i){return i?vt(b(i),-9007199254740991,9007199254740991):0===i?i:0},a.toString=W,a.toUpper=function(i){return W(i).toUpperCase()},a.trim=function(i,r,l){if((i=W(i))&&(l||r===c))return ys(i);if(!i||!(r=ln(r)))return i;var E=On(i),P=On(r),S=Ss(E,P),C=Os(E,P)+1;return ut(E,S,C).join("")},a.trimEnd=function(i,r,l){if((i=W(i))&&(l||r===c))return i.slice(0,bs(i)+1);if(!i||!(r=ln(r)))return i;var E=On(i),P=Os(E,On(r))+1;return ut(E,0,P).join("")},a.trimStart=function(i,r,l){if((i=W(i))&&(l||r===c))return i.replace(e$,"");if(!i||!(r=ln(r)))return i;var E=On(i),P=Ss(E,On(r));return ut(E,P).join("")},a.truncate=function(i,r){var l=30,E="...";if(K(r)){var P="separator"in r?r.separator:P;l="length"in r?b(r.length):l,E="omission"in r?ln(r.omission):E}var S=(i=W(i)).length;if(Lt(i)){var C=On(i);S=C.length}if(l>=S)return i;var R=l-Dt(E);if(R<1)return E;var A=C?ut(C,0,R).join(""):i.slice(0,R);if(P===c)return A+E;if(C&&(R+=A.length-R),rD(P)){if(i.slice(R).search(P)){var T,q=A;for(P.global||(P=to(P.source,W(eF.exec(P))+"g")),P.lastIndex=0;T=P.exec(q);)var M=T.index;A=A.slice(0,M===c?R:M)}}else if(i.indexOf(ln(P),R)!=R){var $=A.lastIndexOf(P);$>-1&&(A=A.slice(0,$))}return A+E},a.unescape=function(i){return(i=W(i))&&eO.test(i)?i.replace(eC,t2):i},a.uniqueId=function(i){var r=++tm;return W(i)+r},a.upperCase=ne,a.upperFirst=nn,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(e3={},$n(a,function(i,r){ty.call(a.prototype,r)||(e3[r]=i)}),e3),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){a[i].placeholder=a}),mn(["drop","take"],function(i,r){H.prototype[i]=function(l){l=l===c?1:il(b(l),0);var E=this.__filtered__&&!r?new H(this):this.clone();return E.__filtered__?E.__takeCount__=ih(l,E.__takeCount__):E.__views__.push({size:ih(l,4294967295),type:i+(E.__dir__<0?"Right":"")}),E},H.prototype[i+"Right"]=function(r){return this.reverse()[i](r).reverse()}}),mn(["filter","map","takeWhile"],function(i,r){var c=r+1,l=1==c||3==c;H.prototype[i]=function(i){var r=this.clone();return r.__iteratees__.push({iteratee:x(i,3),type:c}),r.__filtered__=r.__filtered__||l,r}}),mn(["head","last"],function(i,r){var c="take"+(r?"Right":"");H.prototype[i]=function(){return this[c](1).value()[0]}}),mn(["initial","tail"],function(i,r){var c="drop"+(r?"":"Right");H.prototype[i]=function(){return this.__filtered__?new H(this):this[c](1)}}),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(i){return this.filter(i).head()},H.prototype.findLast=function(i){return this.reverse().find(i)},H.prototype.invokeMap=L(function(i,r){return"function"==typeof i?new H(this):this.map(function(c){return ae(c,i,r)})}),H.prototype.reject=function(i){return this.filter(ur(x(i)))},H.prototype.slice=function(i,r){i=b(i);var l=this;return l.__filtered__&&(i>0||r<0)?new H(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),r!==c&&(l=(r=b(r))<0?l.dropRight(-r):l.take(r-i)),l)},H.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},$n(H.prototype,function(i,r){var l=/^(?:filter|find|map|reject)|While$/.test(r),E=/^(?:head|last)$/.test(r),P=a[E?"take"+("last"==r?"Right":""):r],S=E||/^find/.test(r);P&&(a.prototype[r]=function(){var r=this.__wrapped__,C=E?[1]:arguments,R=r instanceof H,A=C[0],T=R||rN(r),m=function(i){var r=P.apply(a,nt([i],C));return E&&q?r[0]:r};T&&l&&"function"==typeof A&&1!=A.length&&(R=T=!1);var q=this.__chain__,M=!!this.__actions__.length,$=S&&!q,U=R&&!M;if(!S&&T){r=U?r:new H(this);var J=i.apply(r,C);return J.__actions__.push({func:er,args:[m],thisArg:c}),new Pn(J,q)}return $&&U?i.apply(this,C):(J=this.thru(m),$?E?J.value()[0]:J.value():J)})}),mn(["pop","push","shift","sort","splice","unshift"],function(i){var r=th[i],c=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",l=/^(?:pop|shift)$/.test(i);a.prototype[i]=function(){var i=arguments;if(l&&!this.__chain__){var E=this.value();return r.apply(rN(E)?E:[],i)}return this[c](function(c){return r.apply(rN(c)?c:[],i)})}}),$n(H.prototype,function(i,r){var c=a[r];if(c){var l=c.name+"";ty.call(ix,l)||(ix[l]=[]),ix[l].push({name:r,func:c})}}),ix[Xe(c,2).name]=[{name:"wrapper",func:c}],H.prototype.clone=function(){var i=new H(this.__wrapped__);return i.__actions__=un(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=un(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=un(this.__views__),i},H.prototype.reverse=function(){if(this.__filtered__){var i=new H(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i},H.prototype.value=function(){var i=this.__wrapped__.value(),r=this.__dir__,c=rN(i),l=r<0,E=c?i.length:0,P=function(i,r,c){for(var l=-1,E=c.length;++l<E;){var P=c[l],S=P.size;switch(P.type){case"drop":i+=S;break;case"dropRight":r-=S;break;case"take":r=ih(r,i+S);break;case"takeRight":i=il(i,r-S)}}return{start:i,end:r}}(0,E,this.__views__),S=P.start,C=P.end,R=C-S,A=l?C:S-1,T=this.__iteratees__,q=T.length,M=0,$=ih(R,this.__takeCount__);if(!c||!l&&E==R&&$==R)return ou(i,this.__actions__);var U=[];e:for(;R--&&M<$;){A+=r;for(var J=-1,F=i[A];++J<q;){var Q=T[J],X=Q.iteratee,ee=Q.type,et=X(F);if(2==ee)F=et;else if(!et){if(1==ee)continue e;break e}}U[M++]=F}return U},a.prototype.at=rc,a.prototype.chain=function(){return Yu(this)},a.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function(){this.__values__===c&&(this.__values__=ua(this.value()));var i=this.__index__>=this.__values__.length,r=i?c:this.__values__[this.__index__++];return{done:i,value:r}},a.prototype.plant=function(i){for(var r,l=this;l instanceof qe;){var E=Fu(l);E.__index__=0,E.__values__=c,r?P.__wrapped__=E:r=E;var P=E;l=l.__wrapped__}return P.__wrapped__=i,r},a.prototype.reverse=function(){var i=this.__wrapped__;if(i instanceof H){var r=i;return this.__actions__.length&&(r=new H(this)),(r=r.reverse()).__actions__.push({func:er,args:[Ai],thisArg:c}),new Pn(r,this.__chain__)}return this.thru(Ai)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function(){return ou(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,tV&&(a.prototype[tV]=function(){return this}),a}();tB?((tB.exports=t3)._=t3,tV._=t3):tK._=t3}).call(iw)}(ib,ib.exports);var iE=Object.defineProperty,iI=Object.defineProperties,ix=Object.getOwnPropertyDescriptors,iP=Object.getOwnPropertySymbols,iS=Object.prototype.hasOwnProperty,iC=Object.prototype.propertyIsEnumerable,ya=(i,r,c)=>r in i?iE(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_cr=(i,r)=>{for(var c in r||(r={}))iS.call(r,c)&&ya(i,c,r[c]);if(iP)for(var c of iP(r))iC.call(r,c)&&ya(i,c,r[c]);return i},Zg=(i,r)=>iI(i,ix(r));function index_es_ft(i,r,c){var l;let E=(0,S.DQ)(i);return(null==(l=r.rpcMap)?void 0:l[E.reference])||`https://rpc.walletconnect.com/v1/?chainId=${E.namespace}:${E.reference}&projectId=${c}`}function index_es_Ct(i){return i.includes(":")?i.split(":")[1]:i}function Sa(i){return i.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function Oa(i){var r,c,l,E;let P={};if(!(0,S.L5)(i))return P;for(let[C,R]of Object.entries(i)){let i=(0,S.gp)(C)?[C]:R.chains,A=R.methods||[],T=R.events||[],q=R.rpcMap||{},M=(0,S.M)(C);P[M]=Zg(index_es_cr(index_es_cr({},P[M]),R),{chains:(0,S.eG)(i,null==(r=P[M])?void 0:r.chains),methods:(0,S.eG)(A,null==(c=P[M])?void 0:c.methods),events:(0,S.eG)(T,null==(l=P[M])?void 0:l.events),rpcMap:index_es_cr(index_es_cr({},q),null==(E=P[M])?void 0:E.rpcMap)})}return P}function Qg(i){return i.includes(":")?i.split(":")[2]:i}function index_es_Wi(i){return"number"==typeof i?i:i.includes("0x")?parseInt(i,16):i.includes(":")?Number(i.split(":")[1]):Number(i)}let iR={},index_es_z=i=>iR[i],Fi=(i,r)=>{iR[i]=r};let kg=class kg{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getAccounts(){let i=this.namespace.accounts;return i&&i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let jg=class jg{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(parseInt(i),r),this.chainId=parseInt(i),this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,r){let c=r||index_es_ft(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=parseInt(index_es_Ct(r));i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}getHttpProvider(){let i=this.chainId,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}async handleSwitchChain(i){var r,c;let l=i.request.params?null==(r=i.request.params[0])?void 0:r.chainId:"0x0";l=l.startsWith("0x")?l:`0x${l}`;let E=parseInt(l,16);if(this.isChainApproved(E))this.setDefaultChain(`${E}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:l}]},chainId:null==(c=this.namespace.chains)?void 0:c[0]}),this.setDefaultChain(`${E}`);else throw Error(`Failed to switch to chain 'eip155:${E}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}};let nv=class nv{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let tv=class tv{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let ev=class ev{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{let c=this.getCardanoRPCUrl(r),l=index_es_Ct(r);i[l]=this.createHttpProvider(l,c)}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}getCardanoRPCUrl(i){let r=this.namespace.rpcMap;if(r)return r[i]}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||this.getCardanoRPCUrl(i);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let rv=class rv{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let iv=class iv{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){this.httpProviders[i]||this.setHttpProvider(i,r),this.chainId=i,this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${i}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}getAccounts(){let i=this.namespace.accounts;return i?[...new Set(i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2]))]:[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;let l=index_es_Ct(r);i[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);return new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};let sv=class sv{constructor(i){this.name="near",this.namespace=i.namespace,this.events=index_es_z("events"),this.client=index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let i=this.namespace.chains[0];if(!i)throw Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){let c=r||index_es_ft(`${this.name}:${i}`,this.namespace);if(!c)throw Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,c)}this.events.emit(i_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let i=this.namespace.accounts;return i&&i.filter(i=>i.split(":")[1]===this.chainId.toString()).map(i=>i.split(":")[2])||[]}createHttpProviders(){let i={};return this.namespace.chains.forEach(r=>{var c;i[r]=this.createHttpProvider(r,null==(c=this.namespace.rpcMap)?void 0:c[r])}),i}getHttpProvider(){let i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){let c=this.createHttpProvider(i,r);c&&(this.httpProviders[i]=c)}createHttpProvider(i,r){let c=r||index_es_ft(i,this.namespace);return typeof c>"u"?void 0:new JsonRpcProvider(new HttpConnection(c,index_es_z("disableProviderPing")))}};var iO=Object.defineProperty,iA=Object.defineProperties,iL=Object.getOwnPropertyDescriptors,iN=Object.getOwnPropertySymbols,ij=Object.prototype.hasOwnProperty,iT=Object.prototype.propertyIsEnumerable,Ta=(i,r,c)=>r in i?iO(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_hr=(i,r)=>{for(var c in r||(r={}))ij.call(r,c)&&Ta(i,c,r[c]);if(iN)for(var c of iN(r))iT.call(r,c)&&Ta(i,c,r[c]);return i},Mi=(i,r)=>iA(i,iL(r));let index_es_lr=class index_es_lr{constructor(i){this.events=new(P()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger="u">typeof i?.logger&&"string"!=typeof i?.logger?i.logger:(0,J.pino)((0,J.getDefaultLoggerOptions)({level:i?.logger||iy})),this.disableProviderPing=i?.disableProviderPing||!1}static async init(i){let r=new index_es_lr(i);return await r.initialize(),r}async request(i,r){let[c,l]=this.validateChain(r);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(c).request({request:index_es_hr({},i),chainId:`${c}:${l}`,topic:this.session.topic})}sendAsync(i,r,c){let l=new Date().getTime();this.request(i,c).then(i=>r(null,formatJsonRpcResult(l,i))).catch(i=>r(i,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(i=this.session)?void 0:i.topic,reason:(0,S.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}removeListener(i,r){this.events.removeListener(i,r)}off(i,r){this.events.off(i,r)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:c,approval:l}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});c&&(this.uri=c,this.events.emit("display_uri",c)),await l().then(i=>{this.session=i,this.namespaces||(this.namespaces=function(i){let r={};for(let[c,l]of Object.entries(i)){let i=l.methods||[],E=l.events||[],P=l.accounts||[],C=(0,S.gp)(c)?[c]:l.chains?l.chains:Sa(l.accounts);r[c]={chains:C,methods:i,events:E,accounts:P}}return r}(i.namespaces),this.persist("namespaces",this.namespaces))}).catch(i=>{if(i.message!==t3)throw i;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,r){try{if(!this.session)return;let[c,l]=this.validateChain(i);this.getProvider(c).setDefaultChain(l,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");let r=this.client.pairing.getAll();if((0,S.qt)(r)){for(let c of r)i.deletePairings?this.client.core.expirer.set(c.topic,0):await this.client.core.relayer.subscriber.unsubscribe(c.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await index_es_Q.init({logger:this.providerOpts.logger||iy,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let i=[...new Set(Object.keys(this.session.namespaces).map(i=>(0,S.M)(i)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),i.forEach(i=>{if(!this.session)return;let r=function(i,r){let c=Object.keys(r.namespaces).filter(r=>r.includes(i));if(!c.length)return[];let l=[];return c.forEach(i=>{let c=r.namespaces[i].accounts;l.push(...c)}),l}(i,this.session),c=Sa(r),l=function(i={},r={}){let c=Oa(i),l=Oa(r);return ib.exports.merge(c,l)}(this.namespaces,this.optionalNamespaces),E=Mi(index_es_hr({},l[i]),{accounts:r,chains:c});switch(i){case"eip155":this.rpcProviders[i]=new jg({namespace:E});break;case"solana":this.rpcProviders[i]=new nv({namespace:E});break;case"cosmos":this.rpcProviders[i]=new tv({namespace:E});break;case"polkadot":this.rpcProviders[i]=new kg({namespace:E});break;case"cip34":this.rpcProviders[i]=new ev({namespace:E});break;case"elrond":this.rpcProviders[i]=new rv({namespace:E});break;case"multiversx":this.rpcProviders[i]=new iv({namespace:E});break;case"near":this.rpcProviders[i]=new sv({namespace:E})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{let{params:r}=i,{event:c}=r;if("accountsChanged"===c.name){let i=c.data;i&&(0,S.qt)(i)&&this.events.emit("accountsChanged",i.map(Qg))}else if("chainChanged"===c.name){let i=r.chainId,c=r.event.data,l=(0,S.M)(i),E=index_es_Wi(i)!==index_es_Wi(c)?`${l}:${index_es_Wi(c)}`:i;this.onChainChanged(E)}else this.events.emit(c.name,c.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:r})=>{var c;let{namespaces:l}=r,E=null==(c=this.client)?void 0:c.session.get(i);this.session=Mi(index_es_hr({},E),{namespaces:l}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:r})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",Mi(index_es_hr({},(0,S.D6)("USER_DISCONNECTED")),{data:i.topic}))}),this.on(i_.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var r;this.getProvider(i).updateNamespace(null==(r=this.session)?void 0:r.namespaces[i])})}setNamespaces(i){let{namespaces:r,optionalNamespaces:c,sessionProperties:l}=i;r&&Object.keys(r).length&&(this.namespaces=r),c&&Object.keys(c).length&&(this.optionalNamespaces=c),this.sessionProperties=l,this.persist("namespaces",r),this.persist("optionalNamespaces",c)}validateChain(i){let[r,c]=i?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,c];if(r&&!Object.keys(this.namespaces||{}).map(i=>(0,S.M)(i)).includes(r))throw Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&c)return[r,c];let l=(0,S.M)(Object.keys(this.namespaces)[0]),E=this.rpcProviders[l].getDefaultChain();return[l,E]}async requestAccounts(){let[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,r=!1){var c;if(!this.namespaces)return;let[l,E]=this.validateChain(i);r||this.getProvider(l).setDefaultChain(E),(null!=(c=this.namespaces[l])?c:this.namespaces[`${l}:${E}`]).defaultChain=E,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",E)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,r){this.client.core.storage.setItem(`${im}/${i}`,r)}async getFromStore(i){return await this.client.core.storage.getItem(`${im}/${i}`)}};let iq=["eth_sendTransaction","personal_sign"],iz=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],iD=["chainChanged","accountsChanged"],iM=["chainChanged","accountsChanged","message","disconnect","connect"];var ik=Object.defineProperty,i$=Object.defineProperties,iH=Object.getOwnPropertyDescriptors,iU=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,iV=Object.prototype.propertyIsEnumerable,dist_index_es_O=(i,r,c)=>r in i?ik(i,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):i[r]=c,index_es_p=(i,r)=>{for(var c in r||(r={}))iK.call(r,c)&&dist_index_es_O(i,c,r[c]);if(iU)for(var c of iU(r))iV.call(r,c)&&dist_index_es_O(i,c,r[c]);return i},index_es_M=(i,r)=>i$(i,iH(r));function ethereum_provider_dist_index_es_g(i){return Number(i[0].split(":")[1])}function index_es_f(i){return`0x${i.toString(16)}`}let dist_index_es_v=class dist_index_es_v{constructor(){this.events=new E.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(i,r)=>(this.events.on(i,r),this),this.once=(i,r)=>(this.events.once(i,r),this),this.removeListener=(i,r)=>(this.events.removeListener(i,r),this),this.off=(i,r)=>(this.events.off(i,r),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){let r=new dist_index_es_v;return await r.initialize(i),r}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,r){this.signer.sendAsync(i,r,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);let{required:r,optional:c}=function(i){let{chains:r,optionalChains:c,methods:l,optionalMethods:E,events:P,optionalEvents:C,rpcMap:R}=i;if(!(0,S.qt)(r))throw Error("Invalid chains");let A={chains:r,methods:l||iq,events:P||iD,rpcMap:index_es_p({},r.length?{[ethereum_provider_dist_index_es_g(r)]:R[ethereum_provider_dist_index_es_g(r)]}:{})},T=P?.filter(i=>!iD.includes(i)),q=l?.filter(i=>!iq.includes(i));if(!c&&!C&&!E&&!(null!=T&&T.length)&&!(null!=q&&q.length))return{required:r.length?A:void 0};let M=T?.length&&q?.length||!c,$={chains:[...new Set(M?A.chains.concat(c||[]):c)],methods:[...new Set(A.methods.concat(null!=E&&E.length?E:iz))],events:[...new Set(A.events.concat(null!=C&&C.length?C:iM))],rpcMap:R};return{required:r.length?A:void 0,optional:c.length?$:void 0}}(this.rpc);try{let l=await new Promise(async(l,E)=>{var P;this.rpc.showQrModal&&(null==(P=this.modal)||P.subscribeModal(i=>{i.open||this.signer.session||(this.signer.abortPairingAttempt(),E(Error("Connection request reset. Please try again.")))})),await this.signer.connect(index_es_M(index_es_p({namespaces:index_es_p({},r&&{[this.namespace]:r})},c&&{optionalNamespaces:{[this.namespace]:c}}),{pairingTopic:i?.pairingTopic})).then(i=>{l(i)}).catch(i=>{E(Error(i.message))})});if(!l)return;let E=(0,S.gu)(l.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:E),this.setAccounts(E),this.events.emit("connect",{chainId:index_es_f(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{let{params:r}=i,{event:c}=r;"accountsChanged"===c.name?(this.accounts=this.parseAccounts(c.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===c.name?this.setChainId(this.formatChainId(c.data)):this.events.emit(c.name,c.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{let r=parseInt(i);this.chainId=r,this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",index_es_M(index_es_p({},(0,S.D6)("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var r,c;this.rpc.showQrModal&&(null==(r=this.modal)||r.closeModal(),null==(c=this.modal)||c.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return"string"==typeof i&&i.startsWith(`${this.namespace}:`)}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){let r=i.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){let r=this.parseChainId(i);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(i){let[r,c,l]=i.split(":");return{chainId:`${r}:${c}`,address:l}}setAccounts(i){this.accounts=i.filter(i=>this.parseChainId(this.parseAccountId(i).chainId)===this.chainId).map(i=>this.parseAccountId(i).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var r,c;let l=null!=(r=i?.chains)?r:[],E=null!=(c=i?.optionalChains)?c:[],P=l.concat(E);if(!P.length)throw Error("No chains specified in either `chains` or `optionalChains`");let S=l.length?i?.methods||iq:[],C=l.length?i?.events||iD:[],R=i?.optionalMethods||[],A=i?.optionalEvents||[],T=i?.rpcMap||this.buildRpcMap(P,i.projectId),q=i?.qrModalOptions||void 0;return{chains:l?.map(i=>this.formatChainId(i)),optionalChains:E.map(i=>this.formatChainId(i)),methods:S,events:C,optionalMethods:R,optionalEvents:A,rpcMap:T,showQrModal:!!(null!=i&&i.showQrModal),qrModalOptions:q,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,r){let c={};return i.forEach(i=>{c[i]=this.getRpcUrl(i,r)}),c}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await index_es_lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let i;try{let{WalletConnectModal:r}=await c.e(217).then(c.bind(c,98217));i=r}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(i)try{this.modal=new i(index_es_p({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;let{chains:r,optionalChains:c,rpcMap:l}=i;r&&(0,S.qt)(r)&&(this.rpc.chains=r.map(i=>this.formatChainId(i)),r.forEach(i=>{this.rpc.rpcMap[i]=l?.[i]||this.getRpcUrl(i)})),c&&(0,S.qt)(c)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=c?.map(i=>this.formatChainId(i)),c.forEach(i=>{this.rpc.rpcMap[i]=l?.[i]||this.getRpcUrl(i)}))}getRpcUrl(i,r){var c;return(null==(c=this.rpc.rpcMap)?void 0:c[i])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${i}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return"string"==typeof i||i instanceof String?[this.parseAccount(i)]:i.map(i=>this.parseAccount(i))}};let iB=dist_index_es_v},36900:function(i,r,c){"use strict";c.d(r,{q:function(){return IEvents}});let IEvents=class IEvents{}},15890:function(i,r,c){"use strict";c.r(r),c.d(r,{IEvents:function(){return l.q}});var l=c(36900)},15782:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HEARTBEAT_EVENTS=r.HEARTBEAT_INTERVAL=void 0;let l=c(46196);r.HEARTBEAT_INTERVAL=l.FIVE_SECONDS,r.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},95635:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(65949);l.__exportStar(c(15782),r)},20538:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HeartBeat=void 0;let l=c(65949),E=c(72100),P=c(46196),S=c(88490),C=c(95635);let HeartBeat=class HeartBeat extends S.IHeartBeat{constructor(i){super(i),this.events=new E.EventEmitter,this.interval=C.HEARTBEAT_INTERVAL,this.interval=(null==i?void 0:i.interval)||C.HEARTBEAT_INTERVAL}static init(i){return l.__awaiter(this,void 0,void 0,function*(){let r=new HeartBeat(i);return yield r.init(),r})}init(){return l.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}initialize(){return l.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),P.toMiliseconds(this.interval))})}pulse(){this.events.emit(C.HEARTBEAT_EVENTS.pulse)}};r.HeartBeat=HeartBeat},37875:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(65949);l.__exportStar(c(20538),r),l.__exportStar(c(88490),r),l.__exportStar(c(95635),r)},54554:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IHeartBeat=void 0;let l=c(15890);let IHeartBeat=class IHeartBeat extends l.IEvents{constructor(i){super()}};r.IHeartBeat=IHeartBeat},88490:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0});let l=c(65949);l.__exportStar(c(54554),r)},42392:function(i,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PINO_CUSTOM_CONTEXT_KEY=r.PINO_LOGGER_DEFAULTS=void 0,r.PINO_LOGGER_DEFAULTS={level:"info"},r.PINO_CUSTOM_CONTEXT_KEY="custom_context"},71315:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pino=void 0;let l=c(65949),E=l.__importDefault(c(86984));Object.defineProperty(r,"pino",{enumerable:!0,get:function(){return E.default}}),l.__exportStar(c(42392),r),l.__exportStar(c(48992),r)},48992:function(i,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateChildLogger=r.formatChildLoggerContext=r.getLoggerContext=r.setBrowserLoggerContext=r.getBrowserLoggerContext=r.getDefaultLoggerOptions=void 0;let l=c(42392);function getBrowserLoggerContext(i,r=l.PINO_CUSTOM_CONTEXT_KEY){return i[r]||""}function setBrowserLoggerContext(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){return i[c]=r,i}function getLoggerContext(i,r=l.PINO_CUSTOM_CONTEXT_KEY){return void 0===i.bindings?getBrowserLoggerContext(i,r):i.bindings().context||""}function formatChildLoggerContext(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){let E=getLoggerContext(i,c),P=E.trim()?`${E}/${r}`:r;return P}r.getDefaultLoggerOptions=function(i){return Object.assign(Object.assign({},i),{level:(null==i?void 0:i.level)||l.PINO_LOGGER_DEFAULTS.level})},r.getBrowserLoggerContext=getBrowserLoggerContext,r.setBrowserLoggerContext=setBrowserLoggerContext,r.getLoggerContext=getLoggerContext,r.formatChildLoggerContext=formatChildLoggerContext,r.generateChildLogger=function(i,r,c=l.PINO_CUSTOM_CONTEXT_KEY){let E=formatChildLoggerContext(i,r,c),P=i.child({context:E});return setBrowserLoggerContext(P,E,c)}},42995:function(){},72100:function(i){"use strict";var r,c="object"==typeof Reflect?Reflect:null,l=c&&"function"==typeof c.apply?c.apply:function(i,r,c){return Function.prototype.apply.call(i,r,c)};r=c&&"function"==typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)};var E=Number.isNaN||function(i){return i!=i};function EventEmitter(){EventEmitter.init.call(this)}i.exports=EventEmitter,i.exports.once=function(i,r){return new Promise(function(c,l){function errorListener(c){i.removeListener(r,resolver),l(c)}function resolver(){"function"==typeof i.removeListener&&i.removeListener("error",errorListener),c([].slice.call(arguments))}eventTargetAgnosticAddListener(i,r,resolver,{once:!0}),"error"!==r&&"function"==typeof i.on&&eventTargetAgnosticAddListener(i,"error",errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var P=10;function checkListener(i){if("function"!=typeof i)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}function _getMaxListeners(i){return void 0===i._maxListeners?EventEmitter.defaultMaxListeners:i._maxListeners}function _addListener(i,r,c,l){if(checkListener(c),void 0===(P=i._events)?(P=i._events=Object.create(null),i._eventsCount=0):(void 0!==P.newListener&&(i.emit("newListener",r,c.listener?c.listener:c),P=i._events),S=P[r]),void 0===S)S=P[r]=c,++i._eventsCount;else if("function"==typeof S?S=P[r]=l?[c,S]:[S,c]:l?S.unshift(c):S.push(c),(E=_getMaxListeners(i))>0&&S.length>E&&!S.warned){S.warned=!0;var E,P,S,C=Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=i,C.type=r,C.count=S.length,console&&console.warn&&console.warn(C)}return i}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(i,r,c){var l={fired:!1,wrapFn:void 0,target:i,type:r,listener:c},E=onceWrapper.bind(l);return E.listener=c,l.wrapFn=E,E}function _listeners(i,r,c){var l=i._events;if(void 0===l)return[];var E=l[r];return void 0===E?[]:"function"==typeof E?c?[E.listener||E]:[E]:c?function(i){for(var r=Array(i.length),c=0;c<r.length;++c)r[c]=i[c].listener||i[c];return r}(E):arrayClone(E,E.length)}function listenerCount(i){var r=this._events;if(void 0!==r){var c=r[i];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function arrayClone(i,r){for(var c=Array(r),l=0;l<r;++l)c[l]=i[l];return c}function eventTargetAgnosticAddListener(i,r,c,l){if("function"==typeof i.on)l.once?i.once(r,c):i.on(r,c);else if("function"==typeof i.addEventListener)i.addEventListener(r,function wrapListener(E){l.once&&i.removeEventListener(r,wrapListener),c(E)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return P},set:function(i){if("number"!=typeof i||i<0||E(i))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");P=i}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(i){if("number"!=typeof i||i<0||E(i))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(i){for(var r=[],c=1;c<arguments.length;c++)r.push(arguments[c]);var E="error"===i,P=this._events;if(void 0!==P)E=E&&void 0===P.error;else if(!E)return!1;if(E){if(r.length>0&&(S=r[0]),S instanceof Error)throw S;var S,C=Error("Unhandled error."+(S?" ("+S.message+")":""));throw C.context=S,C}var R=P[i];if(void 0===R)return!1;if("function"==typeof R)l(R,this,r);else for(var A=R.length,T=arrayClone(R,A),c=0;c<A;++c)l(T[c],this,r);return!0},EventEmitter.prototype.addListener=function(i,r){return _addListener(this,i,r,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(i,r){return _addListener(this,i,r,!0)},EventEmitter.prototype.once=function(i,r){return checkListener(r),this.on(i,_onceWrap(this,i,r)),this},EventEmitter.prototype.prependOnceListener=function(i,r){return checkListener(r),this.prependListener(i,_onceWrap(this,i,r)),this},EventEmitter.prototype.removeListener=function(i,r){var c,l,E,P,S;if(checkListener(r),void 0===(l=this._events)||void 0===(c=l[i]))return this;if(c===r||c.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete l[i],l.removeListener&&this.emit("removeListener",i,c.listener||r));else if("function"!=typeof c){for(E=-1,P=c.length-1;P>=0;P--)if(c[P]===r||c[P].listener===r){S=c[P].listener,E=P;break}if(E<0)return this;0===E?c.shift():function(i,r){for(;r+1<i.length;r++)i[r]=i[r+1];i.pop()}(c,E),1===c.length&&(l[i]=c[0]),void 0!==l.removeListener&&this.emit("removeListener",i,S||r)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(i){var r,c,l;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[i]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[i]),this;if(0==arguments.length){var E,P=Object.keys(c);for(l=0;l<P.length;++l)"removeListener"!==(E=P[l])&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=c[i]))this.removeListener(i,r);else if(void 0!==r)for(l=r.length-1;l>=0;l--)this.removeListener(i,r[l]);return this},EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)},EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)},EventEmitter.listenerCount=function(i,r){return"function"==typeof i.listenerCount?i.listenerCount(r):listenerCount.call(i,r)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},5899:function(i,r,c){i=c.nmd(i);var l,E,P,S="__lodash_hash_undefined__",C="[object Arguments]",R="[object Array]",A="[object Boolean]",T="[object Date]",q="[object Error]",M="[object Function]",$="[object Map]",U="[object Number]",J="[object Object]",F="[object Promise]",Q="[object RegExp]",X="[object Set]",ee="[object String]",et="[object WeakMap]",eo="[object ArrayBuffer]",ec="[object DataView]",el=/^\[object .+?Constructor\]$/,eh=/^(?:0|[1-9]\d*)$/,ep={};ep["[object Float32Array]"]=ep["[object Float64Array]"]=ep["[object Int8Array]"]=ep["[object Int16Array]"]=ep["[object Int32Array]"]=ep["[object Uint8Array]"]=ep["[object Uint8ClampedArray]"]=ep["[object Uint16Array]"]=ep["[object Uint32Array]"]=!0,ep[C]=ep[R]=ep[eo]=ep[A]=ep[ec]=ep[T]=ep[q]=ep[M]=ep[$]=ep[U]=ep[J]=ep[Q]=ep[X]=ep[ee]=ep[et]=!1;var ef="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,ed="object"==typeof self&&self&&self.Object===Object&&self,eg=ef||ed||Function("return this")(),ey=r&&!r.nodeType&&r,em=ey&&i&&!i.nodeType&&i,e_=em&&em.exports===ey,ew=e_&&ef.process,eb=function(){try{return ew&&ew.binding&&ew.binding("util")}catch(i){}}(),eE=eb&&eb.isTypedArray;function mapToArray(i){var r=-1,c=Array(i.size);return i.forEach(function(i,l){c[++r]=[l,i]}),c}function setToArray(i){var r=-1,c=Array(i.size);return i.forEach(function(i){c[++r]=i}),c}var eI=Array.prototype,ex=Function.prototype,eP=Object.prototype,eS=eg["__core-js_shared__"],eC=ex.toString,eR=eP.hasOwnProperty,eO=(l=/[^.]+$/.exec(eS&&eS.keys&&eS.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",eA=eP.toString,eL=RegExp("^"+eC.call(eR).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eN=e_?eg.Buffer:void 0,ej=eg.Symbol,eT=eg.Uint8Array,ez=eP.propertyIsEnumerable,eD=eI.splice,eM=ej?ej.toStringTag:void 0,ek=Object.getOwnPropertySymbols,e$=eN?eN.isBuffer:void 0,eH=(E=Object.keys,P=Object,function(i){return E(P(i))}),eU=getNative(eg,"DataView"),eK=getNative(eg,"Map"),eV=getNative(eg,"Promise"),eB=getNative(eg,"Set"),eJ=getNative(eg,"WeakMap"),eW=getNative(Object,"create"),eG=toSource(eU),eF=toSource(eK),eZ=toSource(eV),eY=toSource(eB),eQ=toSource(eJ),eX=ej?ej.prototype:void 0,e0=eX?eX.valueOf:void 0;function Hash(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function ListCache(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function MapCache(i){var r=-1,c=null==i?0:i.length;for(this.clear();++r<c;){var l=i[r];this.set(l[0],l[1])}}function SetCache(i){var r=-1,c=null==i?0:i.length;for(this.__data__=new MapCache;++r<c;)this.add(i[r])}function Stack(i){var r=this.__data__=new ListCache(i);this.size=r.size}function assocIndexOf(i,r){for(var c=i.length;c--;)if(eq(i[c][0],r))return c;return -1}function baseGetTag(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":eM&&eM in Object(i)?function(i){var r=eR.call(i,eM),c=i[eM];try{i[eM]=void 0;var l=!0}catch(i){}var E=eA.call(i);return l&&(r?i[eM]=c:delete i[eM]),E}(i):eA.call(i)}function baseIsArguments(i){return isObjectLike(i)&&baseGetTag(i)==C}function equalArrays(i,r,c,l,E,P){var S=1&c,C=i.length,R=r.length;if(C!=R&&!(S&&R>C))return!1;var A=P.get(i);if(A&&P.get(r))return A==r;var T=-1,q=!0,M=2&c?new SetCache:void 0;for(P.set(i,r),P.set(r,i);++T<C;){var $=i[T],U=r[T];if(l)var J=S?l(U,$,T,r,i,P):l($,U,T,i,r,P);if(void 0!==J){if(J)continue;q=!1;break}if(M){if(!function(i,r){for(var c=-1,l=null==i?0:i.length;++c<l;)if(r(i[c],c,i))return!0;return!1}(r,function(i,r){if(!M.has(r)&&($===i||E($,i,c,l,P)))return M.push(r)})){q=!1;break}}else if(!($===U||E($,U,c,l,P))){q=!1;break}}return P.delete(i),P.delete(r),q}function getAllKeys(i){var r;return r=function(i){return null!=i&&isLength(i.length)&&!isFunction(i)?function(i,r){var c,l=e2(i),E=!l&&e6(i),P=!l&&!E&&e3(i),S=!l&&!E&&!P&&e9(i),C=l||E||P||S,R=C?function(i,r){for(var c=-1,l=Array(i);++c<i;)l[c]=r(c);return l}(i.length,String):[],A=R.length;for(var T in i)eR.call(i,T)&&!(C&&("length"==T||P&&("offset"==T||"parent"==T)||S&&("buffer"==T||"byteLength"==T||"byteOffset"==T)||(c=null==(c=A)?9007199254740991:c)&&("number"==typeof T||eh.test(T))&&T>-1&&T%1==0&&T<c))&&R.push(T);return R}(i):function(i){if(r=i&&i.constructor,i!==("function"==typeof r&&r.prototype||eP))return eH(i);var r,c=[];for(var l in Object(i))eR.call(i,l)&&"constructor"!=l&&c.push(l);return c}(i)}(i),e2(i)?r:function(i,r){for(var c=-1,l=r.length,E=i.length;++c<l;)i[E+c]=r[c];return i}(r,e1(i))}function getMapData(i,r){var c,l=i.__data__;return("string"==(c=typeof r)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==r:null===r)?l["string"==typeof r?"string":"hash"]:l.map}function getNative(i,r){var c=null==i?void 0:i[r];return!(!isObject(c)||eO&&eO in c)&&(isFunction(c)?eL:el).test(toSource(c))?c:void 0}Hash.prototype.clear=function(){this.__data__=eW?eW(null):{},this.size=0},Hash.prototype.delete=function(i){var r=this.has(i)&&delete this.__data__[i];return this.size-=r?1:0,r},Hash.prototype.get=function(i){var r=this.__data__;if(eW){var c=r[i];return c===S?void 0:c}return eR.call(r,i)?r[i]:void 0},Hash.prototype.has=function(i){var r=this.__data__;return eW?void 0!==r[i]:eR.call(r,i)},Hash.prototype.set=function(i,r){var c=this.__data__;return this.size+=this.has(i)?0:1,c[i]=eW&&void 0===r?S:r,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(i){var r=this.__data__,c=assocIndexOf(r,i);return!(c<0)&&(c==r.length-1?r.pop():eD.call(r,c,1),--this.size,!0)},ListCache.prototype.get=function(i){var r=this.__data__,c=assocIndexOf(r,i);return c<0?void 0:r[c][1]},ListCache.prototype.has=function(i){return assocIndexOf(this.__data__,i)>-1},ListCache.prototype.set=function(i,r){var c=this.__data__,l=assocIndexOf(c,i);return l<0?(++this.size,c.push([i,r])):c[l][1]=r,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(eK||ListCache),string:new Hash}},MapCache.prototype.delete=function(i){var r=getMapData(this,i).delete(i);return this.size-=r?1:0,r},MapCache.prototype.get=function(i){return getMapData(this,i).get(i)},MapCache.prototype.has=function(i){return getMapData(this,i).has(i)},MapCache.prototype.set=function(i,r){var c=getMapData(this,i),l=c.size;return c.set(i,r),this.size+=c.size==l?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(i){return this.__data__.set(i,S),this},SetCache.prototype.has=function(i){return this.__data__.has(i)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(i){var r=this.__data__,c=r.delete(i);return this.size=r.size,c},Stack.prototype.get=function(i){return this.__data__.get(i)},Stack.prototype.has=function(i){return this.__data__.has(i)},Stack.prototype.set=function(i,r){var c=this.__data__;if(c instanceof ListCache){var l=c.__data__;if(!eK||l.length<199)return l.push([i,r]),this.size=++c.size,this;c=this.__data__=new MapCache(l)}return c.set(i,r),this.size=c.size,this};var e1=ek?function(i){return null==i?[]:function(i,r){for(var c=-1,l=null==i?0:i.length,E=0,P=[];++c<l;){var S=i[c];r(S,c,i)&&(P[E++]=S)}return P}(ek(i=Object(i)),function(r){return ez.call(i,r)})}:function(){return[]},e5=baseGetTag;function toSource(i){if(null!=i){try{return eC.call(i)}catch(i){}try{return i+""}catch(i){}}return""}function eq(i,r){return i===r||i!=i&&r!=r}(eU&&e5(new eU(new ArrayBuffer(1)))!=ec||eK&&e5(new eK)!=$||eV&&e5(eV.resolve())!=F||eB&&e5(new eB)!=X||eJ&&e5(new eJ)!=et)&&(e5=function(i){var r=baseGetTag(i),c=r==J?i.constructor:void 0,l=c?toSource(c):"";if(l)switch(l){case eG:return ec;case eF:return $;case eZ:return F;case eY:return X;case eQ:return et}return r});var e6=baseIsArguments(function(){return arguments}())?baseIsArguments:function(i){return isObjectLike(i)&&eR.call(i,"callee")&&!ez.call(i,"callee")},e2=Array.isArray,e3=e$||function(){return!1};function isFunction(i){if(!isObject(i))return!1;var r=baseGetTag(i);return r==M||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function isLength(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}function isObject(i){var r=typeof i;return null!=i&&("object"==r||"function"==r)}function isObjectLike(i){return null!=i&&"object"==typeof i}var e9=eE?function(i){return eE(i)}:function(i){return isObjectLike(i)&&isLength(i.length)&&!!ep[baseGetTag(i)]};i.exports=function(i,r){return function baseIsEqual(i,r,c,l,E){return i===r||(null!=i&&null!=r&&(isObjectLike(i)||isObjectLike(r))?function(i,r,c,l,E,P){var S=e2(i),M=e2(r),F=S?R:e5(i),et=M?R:e5(r);F=F==C?J:F,et=et==C?J:et;var el=F==J,eh=et==J,ep=F==et;if(ep&&e3(i)){if(!e3(r))return!1;S=!0,el=!1}if(ep&&!el)return P||(P=new Stack),S||e9(i)?equalArrays(i,r,c,l,E,P):function(i,r,c,l,E,P,S){switch(c){case ec:if(i.byteLength!=r.byteLength||i.byteOffset!=r.byteOffset)break;i=i.buffer,r=r.buffer;case eo:if(i.byteLength!=r.byteLength||!P(new eT(i),new eT(r)))break;return!0;case A:case T:case U:return eq(+i,+r);case q:return i.name==r.name&&i.message==r.message;case Q:case ee:return i==r+"";case $:var C=mapToArray;case X:var R=1&l;if(C||(C=setToArray),i.size!=r.size&&!R)break;var M=S.get(i);if(M)return M==r;l|=2,S.set(i,r);var J=equalArrays(C(i),C(r),l,E,P,S);return S.delete(i),J;case"[object Symbol]":if(e0)return e0.call(i)==e0.call(r)}return!1}(i,r,F,c,l,E,P);if(!(1&c)){var ef=el&&eR.call(i,"__wrapped__"),ed=eh&&eR.call(r,"__wrapped__");if(ef||ed){var eg=ef?i.value():i,ey=ed?r.value():r;return P||(P=new Stack),E(eg,ey,c,l,P)}}return!!ep&&(P||(P=new Stack),function(i,r,c,l,E,P){var S=1&c,C=getAllKeys(i),R=C.length;if(R!=getAllKeys(r).length&&!S)return!1;for(var A=R;A--;){var T=C[A];if(!(S?T in r:eR.call(r,T)))return!1}var q=P.get(i);if(q&&P.get(r))return q==r;var M=!0;P.set(i,r),P.set(r,i);for(var $=S;++A<R;){var U=i[T=C[A]],J=r[T];if(l)var F=S?l(J,U,T,r,i,P):l(U,J,T,i,r,P);if(!(void 0===F?U===J||E(U,J,c,l,P):F)){M=!1;break}$||($="constructor"==T)}if(M&&!$){var Q=i.constructor,X=r.constructor;Q!=X&&"constructor"in i&&"constructor"in r&&!("function"==typeof Q&&Q instanceof Q&&"function"==typeof X&&X instanceof X)&&(M=!1)}return P.delete(i),P.delete(r),M}(i,r,c,l,E,P))}(i,r,c,l,baseIsEqual,E):i!=i&&r!=r)}(i,r)}},25930:function(i){"use strict";let r=self.fetch.bind(self);i.exports=r,i.exports.default=i.exports},19669:function(i){"use strict";function tryStringify(i){try{return JSON.stringify(i)}catch(i){return'"[Circular]"'}}i.exports=function(i,r,c){var l=c&&c.stringify||tryStringify;if("object"==typeof i&&null!==i){var E=r.length+1;if(1===E)return i;var P=Array(E);P[0]=l(i);for(var S=1;S<E;S++)P[S]=l(r[S]);return P.join(" ")}if("string"!=typeof i)return i;var C=r.length;if(0===C)return i;for(var R="",A=0,T=-1,q=i&&i.length||0,M=0;M<q;){if(37===i.charCodeAt(M)&&M+1<q){switch(T=T>-1?T:0,i.charCodeAt(M+1)){case 100:case 102:if(A>=C||null==r[A])break;T<M&&(R+=i.slice(T,M)),R+=Number(r[A]),T=M+2,M++;break;case 105:if(A>=C||null==r[A])break;T<M&&(R+=i.slice(T,M)),R+=Math.floor(Number(r[A])),T=M+2,M++;break;case 79:case 111:case 106:if(A>=C||void 0===r[A])break;T<M&&(R+=i.slice(T,M));var $=typeof r[A];if("string"===$){R+="'"+r[A]+"'",T=M+2,M++;break}if("function"===$){R+=r[A].name||"<anonymous>",T=M+2,M++;break}R+=l(r[A]),T=M+2,M++;break;case 115:if(A>=C)break;T<M&&(R+=i.slice(T,M)),R+=String(r[A]),T=M+2,M++;break;case 37:T<M&&(R+=i.slice(T,M)),R+="%",T=M+2,M++,A--}++A}++M}return -1===T?i:(T<q&&(R+=i.slice(T)),R)}},85783:function(i){"use strict";i.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},86984:function(i,r,c){"use strict";let l=c(19669);i.exports=pino;let E=function(){function defd(i){return void 0!==i&&i}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(i){return defd(self)||defd(window)||defd(this)||{}}}().console||{};function pino(i){var r;(i=i||{}).browser=i.browser||{};let c=i.browser.transmit;if(c&&"function"!=typeof c.send)throw Error("pino: transmit option must have a send function");let l=i.browser.write||E;i.browser.write&&(i.browser.asObject=!0);let P=i.serializers||{},S=function(i,r){if(Array.isArray(i)){let r=i.filter(function(i){return"!stdSerializers.err"!==i});return r}return!0===i&&Object.keys(r)}(i.browser.serialize,P),C=i.browser.serialize;Array.isArray(i.browser.serialize)&&i.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1),"function"==typeof l&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),!1===i.enabled&&(i.level="silent");let R=i.level||"info",A=Object.create(l);A.log||(A.log=noop),Object.defineProperty(A,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(A,"level",{get:function(){return this._level},set:function(i){if("silent"!==i&&!this.levels.values[i])throw Error("unknown level "+i);this._level=i,set(T,A,"error","log"),set(T,A,"fatal","error"),set(T,A,"warn","error"),set(T,A,"info","log"),set(T,A,"debug","log"),set(T,A,"trace","log")}});let T={transmit:c,serialize:S,asObject:i.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=i).timestamp?r.timestamp:!1===r.timestamp?nullTime:epochTime};return A.levels=pino.levels,A.level=R,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=noop,A.serializers=P,A._serialize=S,A._stdErrSerialize=C,A.child=function(r,l){if(!r)throw Error("missing bindings for child Pino");l=l||{},S&&r.serializers&&(l.serializers=r.serializers);let E=l.serializers;if(S&&E){var C=Object.assign({},P,E),R=!0===i.browser.serialize?Object.keys(C):S;delete r.serializers,applySerializers([r],R,C,this._stdErrSerialize)}function Child(i){this._childLevel=(0|i._childLevel)+1,this.error=bind(i,r,"error"),this.fatal=bind(i,r,"fatal"),this.warn=bind(i,r,"warn"),this.info=bind(i,r,"info"),this.debug=bind(i,r,"debug"),this.trace=bind(i,r,"trace"),C&&(this.serializers=C,this._serialize=R),c&&(this._logEvent=createLogEventShape([].concat(i._logEvent.bindings,r)))}return Child.prototype=this,new Child(this)},c&&(A._logEvent=createLogEventShape()),A}function set(i,r,c,P){let S=Object.getPrototypeOf(r);r[c]=r.levelVal>r.levels.values[c]?noop:S[c]?S[c]:E[c]||E[P]||noop,function(i,r,c){if(i.transmit||r[c]!==noop){var P;r[c]=(P=r[c],function(){let S=i.timestamp(),C=Array(arguments.length),R=Object.getPrototypeOf&&Object.getPrototypeOf(this)===E?E:this;for(var A=0;A<C.length;A++)C[A]=arguments[A];if(i.serialize&&!i.asObject&&applySerializers(C,this._serialize,this.serializers,this._stdErrSerialize),i.asObject?P.call(R,function(i,r,c,E){i._serialize&&applySerializers(c,i._serialize,i.serializers,i._stdErrSerialize);let P=c.slice(),S=P[0],C={};E&&(C.time=E),C.level=pino.levels.values[r];let R=(0|i._childLevel)+1;if(R<1&&(R=1),null!==S&&"object"==typeof S){for(;R--&&"object"==typeof P[0];)Object.assign(C,P.shift());S=P.length?l(P.shift(),P):void 0}else"string"==typeof S&&(S=l(P.shift(),P));return void 0!==S&&(C.msg=S),C}(this,c,C,S)):P.apply(R,C),i.transmit){let l=i.transmit.level||r.level,E=pino.levels.values[l],P=pino.levels.values[c];if(P<E)return;(function(i,r,c){let l=r.send,E=r.ts,P=r.methodLevel,S=r.methodValue,C=r.val,R=i._logEvent.bindings;applySerializers(c,i._serialize||Object.keys(i.serializers),i.serializers,void 0===i._stdErrSerialize||i._stdErrSerialize),i._logEvent.ts=E,i._logEvent.messages=c.filter(function(i){return -1===R.indexOf(i)}),i._logEvent.level.label=P,i._logEvent.level.value=S,l(P,i._logEvent,C),i._logEvent=createLogEventShape(R)})(this,{ts:S,methodLevel:c,methodValue:P,transmitLevel:l,transmitValue:pino.levels.values[i.transmit.level||r.level],send:i.transmit.send,val:r.levelVal},C)}})}}(i,r,c)}function applySerializers(i,r,c,l){for(let E in i)if(l&&i[E]instanceof Error)i[E]=pino.stdSerializers.err(i[E]);else if("object"==typeof i[E]&&!Array.isArray(i[E]))for(let l in i[E])r&&r.indexOf(l)>-1&&l in c&&(i[E][l]=c[l](i[E][l]))}function bind(i,r,c){return function(){let l=Array(1+arguments.length);l[0]=r;for(var E=1;E<l.length;E++)l[E]=arguments[E-1];return i[c].apply(this,l)}}function createLogEventShape(i){return{ts:0,messages:[],bindings:i||[],level:{label:"",value:0}}}function mock(){return{}}function passthrough(i){return i}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function(i){let r={type:i.constructor.name,msg:i.message,stack:i.stack};for(let c in i)void 0===r[c]&&(r[c]=i[c]);return r}},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);