"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{84307:function(e,r,t){t.r(r);var n=t(11527),i=t(50959),o=t(5808),l=t(6786),a=t(95686),s=t(7859),u=t(41490),d=t(98478),c=t(53404),x=t(56366),f=t(67391),h=t(6559),m=t(23017),v=t(66250),w=t(73979),y=t(75546),p=t(72532),b=t(66343);r.default=e=>{let{bulkPairs:r,farmIndex:t}=e,{t:g}=(0,y.useTranslation)("common"),{breakpoints:k}=(0,o.Z)(),j=(0,l.Z)(k.down("md")),{chainId:A}=(0,b.ZP)(),[C,R]=(0,i.useState)(0),[I,_]=(0,i.useState)(!1),[P,Z]=(0,i.useState)(0),[O,N]=(0,i.useState)(!1),[D,S]=(0,i.useState)(!1),[E,L]=(0,i.useState)(""),[T,B]=(0,v.Z)(E,L),M=null!=A?A:p.ChainId.BNB,U=(0,x._$)(M,null,t===h.GlobalConst.farmIndex.DUALFARM_INDEX||I?0:void 0,t===h.GlobalConst.farmIndex.DUALFARM_INDEX||I?0:void 0,{search:E,isStaked:D}),V=(0,x.Fd)(M,null,t!==h.GlobalConst.farmIndex.DUALFARM_INDEX&&I?void 0:0,t!==h.GlobalConst.farmIndex.DUALFARM_INDEX&&I?void 0:0,{search:E,isStaked:D}),F=O?1:-1,z=(0,i.useCallback)((e,r)=>{let t=e.tokens[0].symbol+"/"+e.tokens[1].symbol,n=r.tokens[0].symbol+"/"+r.tokens[1].symbol;return(t>n?-1:1)*F},[F]),X=(0,i.useCallback)((e,r)=>{var t,n;return(Number(null!==(t=e.tvl)&&void 0!==t?t:0)>Number(null!==(n=r.tvl)&&void 0!==n?n:0)?-1:1)*F},[F]),G=(0,i.useCallback)((e,r)=>((0,m.i_)(e.totalRewardRate)>(0,m.i_)(r.totalRewardRate)?-1:1)*F,[F]);(0,i.useCallback)((e,r)=>{let t=e.rateA*e.rewardTokenAPrice+e.rateB*e.rewardTokenBPrice,n=r.rateA*r.rewardTokenAPrice+r.rateB*r.rewardTokenBPrice;return(t>n?-1:1)*F},[F]);let getReward=e=>"totalRewardRate"in e?(0,m.i_)(e.totalRewardRate):"rateA"in e?e.rateA*e.rewardTokenAPrice+e.rateB*e.rewardTokenBPrice:0;(0,i.useCallback)((e,r)=>{let t=getReward(e),n=getReward(r);return(t>n?-1:1)*F},[F]);let $=(0,i.useCallback)((e,t)=>{var n,i,o,l,a,s;let u=0,d=0;if(r){let a=null===(n=r[e.pair])||void 0===n?void 0:n.oneDayVolumeUSD,s=null===(i=r[e.pair])||void 0===i?void 0:i.reserveUSD,c=null===(o=r[t.pair])||void 0===o?void 0:o.oneDayVolumeUSD,x=null===(l=r[t.pair])||void 0===l?void 0:l.reserveUSD;a&&s&&(u=(0,m.yd)(a,s)),c&&x&&(d=(0,m.yd)(c,x))}let c=(0,m.Z$)(null!==(a=e.perMonthReturnInRewards)&&void 0!==a?a:0,u,e.valueOfTotalStakedAmountInUSDC),x=(0,m.Z$)(null!==(s=t.perMonthReturnInRewards)&&void 0!==s?s:0,d,t.valueOfTotalStakedAmountInUSDC);return(c>x?-1:1)*F},[F,r]),q=(0,i.useCallback)((e,r)=>((0,m.i_)(e.earnedAmount)>(0,m.i_)(r.earnedAmount)?-1:1)*F,[F]);(0,i.useCallback)((e,r)=>{let t=(0,m.i_)(e.earnedAmountA)*e.rewardTokenAPrice+(0,m.i_)(e.earnedAmountB)*e.rewardTokenBPrice,n=(0,m.i_)(r.earnedAmountA)*r.rewardTokenAPrice+(0,m.i_)(r.earnedAmountB)*r.rewardTokenBPrice;return(t>n?-1:1)*F},[F]);let getEarnedAmount=e=>"earnedAmount"in e?(0,m.i_)(e.earnedAmount):"earnedAmountA"in e?(0,m.i_)(e.earnedAmountA)*e.rewardTokenAPrice+(0,m.i_)(e.earnedAmountB)*e.rewardTokenBPrice:0;(0,i.useCallback)((e,r)=>{let t=getEarnedAmount(e),n=getEarnedAmount(r);return(t>n?-1:1)*F},[F]);let H=(0,i.useMemo)(()=>{let e=I?V:U;return e.sort((e,r)=>1===P?z(e,r):2===P?X(e,r):3===P?G(e,r):4===P?$(e,r):5===P?q(e,r):1)},[P,V,U,I,z,X,G,$,q]),J=H?H.map(e=>e.stakingRewardAddress.toLowerCase()).reduce((e,r)=>e+r,""):null;(0,i.useEffect)(()=>{R(0)},[J,t]);let W=(0,i.useMemo)(()=>H?H.slice(0,(0,m.o1)(C,10)):null,[H,C]),getPoolApy=e=>{var t,n;if(!e||!r)return 0;let i=null==r?void 0:null===(t=r[e.toLowerCase()])||void 0===t?void 0:t.oneDayVolumeUSD,o=null==r?void 0:null===(n=r[e.toLowerCase()])||void 0===n?void 0:n.reserveUSD,l=(0,m.yd)(Number(i),Number(o));return l},{loadMoreRef:Y}=(0,w.q)(()=>{R(C+1)}),K=[{text:g("pool"),index:1,width:.2,justify:"flex-start"},{text:g("network"),index:99,width:.15,justify:"center"},{text:g("tvl"),index:2,width:.21,justify:"center"},{text:g("rewards"),index:3,width:.26,justify:"center"},{text:g("apy"),index:4,width:.13,justify:"center"},{text:g("earned"),index:5,width:.15,justify:"flex-end"}],Q=K.map(e=>({...e,onClick:()=>{99!==e.index&&(P===e.index?N(!O):(Z(e.index),N(!0)))}})),ee=K.map(e=>({text:e.text,onClick:()=>Z(e.index)})),renderStakedOnly=()=>(0,n.jsxs)(a.Z,{className:"flex items-center flex-wrap",children:[(0,n.jsx)("small",{className:"text-disabled",style:{marginRight:8},children:g("myPools")}),(0,n.jsx)(f.Zh,{toggled:D,onToggle:()=>S(!D)})]}),er=[{text:g("active"),onClick:()=>_(!1),condition:!I},{text:g("ended"),onClick:()=>_(!0),condition:I}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{className:"farmListHeader",children:[(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("h5",{className:"h5",children:g("earnProgram")}),(0,n.jsx)("small",{className:"text-white",children:g("farmDesc")})]}),(0,n.jsxs)(a.Z,{className:"flex flex-wrap",children:[(0,n.jsxs)(a.Z,{className:"flex justify-between",width:(0,m.dx)(j),children:[(0,n.jsx)(a.Z,{width:j?"calc(100% - 150px)":1,mr:2,my:2,children:(0,n.jsx)(f.Mj,{placeholder:j?g("search"):g("searchPlaceHolder"),value:T,setValue:B})}),j&&renderStakedOnly()]}),(0,n.jsxs)(a.Z,{width:(0,m.dx)(j),className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(a.Z,{mr:2,children:(0,n.jsx)(f.w8,{width:160,height:40,items:er})}),j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{height:40,children:(0,n.jsx)(f.fR,{title:g("sortBy"),menuItems:ee})}),(0,n.jsxs)(a.Z,{className:"flex items-center",children:[(0,n.jsx)("small",{className:"text-disabled",style:{marginRight:8},children:O?g("sortdesc"):g("sortasc")}),(0,n.jsx)(f.Zh,{toggled:O,onToggle:()=>N(!O)})]})]}):renderStakedOnly()]})]})]}),(0,n.jsx)(s.Z,{}),!j&&(0,n.jsx)(a.Z,{mt:2.5,display:"flex",paddingX:2,children:Q.map(e=>(0,n.jsxs)(a.Z,{width:e.width,className:"flex items-center cursor-pointer ".concat(P===e.index?"text-secondary":""),justifyContent:e.justify,onClick:e.onClick,children:[(0,n.jsx)("small",{children:e.text}),99!==e.index&&(0,n.jsx)(a.Z,{display:"flex",ml:.5,children:P===e.index&&O?(0,n.jsx)(d.Z,{size:20}):(0,n.jsx)(c.Z,{size:20})})]},e.index))}),t===h.GlobalConst.farmIndex.LPFARM_INDEX&&!(null==W?void 0:W.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{width:"100%",height:80}),(0,n.jsx)(u.Z,{width:"100%",height:80})]}),t===h.GlobalConst.farmIndex.LPFARM_INDEX&&W&&W.map((e,r)=>(0,n.jsx)(f.Eh,{stakingInfo:e,stakingAPY:getPoolApy(null==e?void 0:e.pair),isLPFarm:!0},r)),(0,n.jsx)("div",{ref:Y})]})}},73979:function(e,r,t){t.d(r,{q:function(){return useInfiniteLoading}});var n=t(38701);let useInfiniteLoading=e=>{let{observe:r}=(0,n.ZP)({onChange:()=>{e()},rootMargin:"100px 0px"});return{loadMoreRef:r}}},38701:function(e,r,t){t.d(r,{ZP:function(){return useInView}});var n=t(50959);function _extends(){return(_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var useLatest=function(e){var r=(0,n.useRef)(e);return r.current=e,r},useInView=function(e){var r=void 0===e?{}:e,t=r.root,i=r.rootMargin,o=r.threshold,l=void 0===o?0:o,a=r.trackVisibility,s=r.delay,u=r.unobserveOnEnter,d=r.onChange,c=r.onEnter,x=r.onLeave,f=(0,n.useState)({inView:!1,scrollDirection:{}}),h=f[0],m=f[1],v=(0,n.useRef)(!1),w=(0,n.useRef)({}),y=(0,n.useRef)(),p=(0,n.useRef)(!1),b=useLatest(d),g=useLatest(c),k=useLatest(x),j=(0,n.useRef)(),A=(0,n.useCallback)(function(){y.current&&(y.current.disconnect(),w.current={})},[]),C=(0,n.useCallback)(function(e){e&&e!==j.current&&(A(),j.current=e),y.current&&j.current&&y.current.observe(j.current)},[A]),R=(0,n.useCallback)(function(){if(j.current){var e=j.current.getBoundingClientRect(),r=e.x,t=e.y;w.current={x:r,y:t}}},[j]);return(0,n.useEffect)(function(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window))return console.error("\uD83D\uDCA1 react-cool-inview: the browser doesn't support Intersection Observer, please install polyfill: https://github.com/wellyshen/react-cool-inview#intersection-observer-polyfill"),function(){return null};var e=!0;return y.current=new IntersectionObserver(function(r){var t=r[0],n=t.intersectionRatio,i=t.isIntersecting,o=t.boundingClientRect,s=o.x,d=o.y,c=t.isVisible,x={},f=Array.isArray(l)?Math.min.apply(Math,l):l,h=void 0!==i?i:n>0;h=f>0?n>=f:h,s<w.current.x&&(x.horizontal="left"),s>w.current.x&&(x.horizontal="right"),w.current.x=s,d<w.current.y&&(x.vertical="up"),d>w.current.y&&(x.vertical="down"),w.current.y=d;var y={entry:t,scrollDirection:x,observe:C,unobserve:A};a&&(void 0!==c||p.current||(console.warn("\uD83D\uDCA1 react-cool-inview: the browser doesn't support Intersection Observer v2, fallback to v1 behavior"),p.current=!0),void 0!==c&&(h=c)),h&&!v.current&&(u&&A(),g.current&&g.current(y)),!h&&v.current&&k.current&&k.current(y),b.current&&b.current(_extends({},y,{inView:h})),e&&m({inView:h,scrollDirection:x,entry:t}),v.current=h},{root:t,rootMargin:i,threshold:l,trackVisibility:a,delay:s}),C(),function(){e=!1,A()}},[u,t,i,JSON.stringify(l),a,s,C,A]),_extends({},h,{observe:C,unobserve:A,updatePosition:R})}},53404:function(e,r,t){var n=t(50959),i=t(40507),o=t.n(i);function _extends(){return(_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var l=(0,n.forwardRef)(function(e,r){var t=e.color,i=e.size,o=void 0===i?24:i,l=function(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,["color","size"]);return n.createElement("svg",_extends({ref:r,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===t?"currentColor":t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),n.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),n.createElement("polyline",{points:"5 12 12 5 19 12"}))});l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="ArrowUp",r.Z=l}}]);